<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Owen</title>
  
  
  <link href="/atom.xml" rel="self"/>
  
  <link href="https://owen027.github.io/"/>
  <updated>2020-05-28T06:31:00.457Z</updated>
  <id>https://owen027.github.io/</id>
  
  <author>
    <name>Owen Gao</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>js-utils</title>
    <link href="https://owen027.github.io/2020/05/28/js-utils/"/>
    <id>https://owen027.github.io/2020/05/28/js-utils/</id>
    <published>2020-05-28T05:38:43.000Z</published>
    <updated>2020-05-28T06:31:00.457Z</updated>
    
    <content type="html"><![CDATA[<h1 id="一些功能性函数"><a href="#一些功能性函数" class="headerlink" title="一些功能性函数"></a>一些功能性函数</h1><h2 id="关于原生JS"><a href="#关于原生JS" class="headerlink" title="关于原生JS"></a>关于原生JS</h2><h3 id="文件大小单位转换"><a href="#文件大小单位转换" class="headerlink" title="文件大小单位转换"></a>文件大小单位转换</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * @desc bytesToSize 字节单位换算</span></span><br><span class="line"><span class="comment"> * @param bytes 传入以bit为单位的数据</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">const</span> bytesToSize = <span class="function"><span class="keyword">function</span> (<span class="params">bytes</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">const</span> k = <span class="number">1024</span>;</span><br><span class="line">    <span class="keyword">if</span> (!bytes || bytes === <span class="number">0</span>) <span class="keyword">return</span> <span class="string">'0 B'</span>;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">typeof</span> (bytes) == <span class="string">'string'</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> bytes</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">const</span> byte = <span class="built_in">Math</span>.abs(bytes); <span class="comment">//正负数均变正数</span></span><br><span class="line">        <span class="keyword">const</span> sizes = [<span class="string">'B'</span>, <span class="string">'KB'</span>, <span class="string">'MB'</span>, <span class="string">'GB'</span>, <span class="string">'TB'</span>, <span class="string">'PB'</span>, <span class="string">'EB'</span>, <span class="string">'ZB'</span>, <span class="string">'YB'</span>];</span><br><span class="line">        <span class="keyword">const</span> i = <span class="built_in">Math</span>.floor(<span class="built_in">Math</span>.log(byte) / <span class="built_in">Math</span>.log(k));</span><br><span class="line">        <span class="keyword">return</span> (byte / <span class="built_in">Math</span>.pow(k, i)).toFixed(<span class="number">2</span>) + sizes[i];</span><br><span class="line">    &#125; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="解析URL后的参数并转换为对象"><a href="#解析URL后的参数并转换为对象" class="headerlink" title="解析URL后的参数并转换为对象"></a>解析URL后的参数并转换为对象</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * @param &#123;string&#125; url</span></span><br><span class="line"><span class="comment"> * @returns &#123;Object&#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">parseURL</span>(<span class="params">url</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> search = url.split(<span class="string">"?"</span>)[<span class="number">1</span>];</span><br><span class="line">  <span class="keyword">if</span> (!search) &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;&#125;;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">JSON</span>.parse(</span><br><span class="line">    <span class="string">'&#123;"'</span> +</span><br><span class="line">      <span class="built_in">decodeURIComponent</span>(search)</span><br><span class="line">        .replace(<span class="regexp">/"/g</span>, <span class="string">'\\"'</span>)</span><br><span class="line">        .replace(<span class="regexp">/&amp;/g</span>, <span class="string">'","'</span>)</span><br><span class="line">        .replace(<span class="regexp">/=/g</span>, <span class="string">'":"'</span>)</span><br><span class="line">        .replace(<span class="regexp">/\+/g</span>, <span class="string">" "</span>) +</span><br><span class="line">      <span class="string">'"&#125;'</span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="生成随机数"><a href="#生成随机数" class="headerlink" title="生成随机数"></a>生成随机数</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * @returns &#123;string&#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">createUniqueString</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> timestamp = +<span class="keyword">new</span> <span class="built_in">Date</span>() + <span class="string">""</span>;</span><br><span class="line">  <span class="keyword">const</span> randomNum = <span class="built_in">parseInt</span>((<span class="number">1</span> + <span class="built_in">Math</span>.random()) * <span class="number">65536</span>) + <span class="string">""</span>;</span><br><span class="line">  <span class="keyword">return</span> (+(randomNum + timestamp)).toString(<span class="number">32</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="关于-axios"><a href="#关于-axios" class="headerlink" title="关于 axios"></a>关于 axios</h2><h3 id="接收二进制流文件乱码问题。"><a href="#接收二进制流文件乱码问题。" class="headerlink" title="接收二进制流文件乱码问题。"></a>接收二进制流文件乱码问题。</h3><p><strong>1. 须将axios 配置中的<code>responseType</code>设置为’arraybuffer’，这样就不会让表格出现乱码现象；</strong><br><strong>2. 如果要动态设置文件名则需要让后台将名字设置到响应头中，否则将是一个乱码的文件名；</strong><br><strong>3. 然后通过<code>&lt;a&gt;&lt;/a&gt;</code> 标签的特性来，自动点击下载文件；</strong><br><strong>4. 如果要兼容IE则需要利用<code>navigator.msSaveOrOpenBlob</code>方法；</strong><br><strong>5. 兼容Firefox 须将<code>&lt;a&gt;&lt;/a&gt;</code> 标签添加到<code>body</code>中，最后再移除<code>&lt;a&gt;&lt;/a&gt;</code> 标签</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// axios config</span></span><br><span class="line"> config = &#123;</span><br><span class="line">     responseType: <span class="string">'arraybuffer'</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 返回数据处理</span></span><br><span class="line">getUserInfoExport(data).then(<span class="function">(<span class="params">&#123;data,headers&#125;</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">let</span> blob = <span class="keyword">new</span> Blob([data], &#123; <span class="attr">type</span>: <span class="string">'application/vnd.ms-excel'</span> &#125;) <span class="comment">// 将服务端返回的文件流（二进制）excel文件转化为blob</span></span><br><span class="line">        <span class="keyword">let</span> fileName = headers.filename</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (<span class="built_in">window</span>.navigator &amp;&amp; <span class="built_in">window</span>.navigator.msSaveOrOpenBlob) &#123; <span class="comment">// IE10+</span></span><br><span class="line">          <span class="built_in">window</span>.navigator.msSaveOrOpenBlob(blob, fileName)</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">          <span class="keyword">let</span> objectUrl = (<span class="built_in">window</span>.URL || <span class="built_in">window</span>.webkitURL).createObjectURL(blob)</span><br><span class="line">          <span class="keyword">let</span> downFile = <span class="built_in">document</span>.createElement(<span class="string">'a'</span>)</span><br><span class="line">          downFile.style.display = <span class="string">'none'</span></span><br><span class="line">          downFile.href = objectUrl</span><br><span class="line">          downFile.download = fileName <span class="comment">// 下载后文件名</span></span><br><span class="line">          <span class="built_in">document</span>.body.appendChild(downFile)</span><br><span class="line">          downFile.click()</span><br><span class="line">          <span class="built_in">document</span>.body.removeChild(downFile) <span class="comment">// 下载完成移除元素</span></span><br><span class="line">          <span class="comment">// window.location.href = objectUrl</span></span><br><span class="line">          <span class="built_in">window</span>.URL.revokeObjectURL(objectUrl) <span class="comment">// 只要映射存在，Blob就不能进行垃圾回收，因此一旦不再需要引用，就必须小心撤销URL，释放掉blob对象。</span></span><br><span class="line">        &#125;</span><br><span class="line">      &#125;)</span><br></pre></td></tr></table></figure><p><a href="https://www.w3.org/TR/FileAPI/#url">参考连接</a></p><h2 id="关于-Node"><a href="#关于-Node" class="headerlink" title="关于 Node"></a>关于 Node</h2><h3 id="获取本机-IP-地址"><a href="#获取本机-IP-地址" class="headerlink" title="获取本机 IP 地址"></a>获取本机 IP 地址</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> os = <span class="built_in">require</span>(<span class="string">'os'</span>);</span><br><span class="line"><span class="keyword">const</span> ip = showObj(os.networkInterfaces());</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">showObj</span>(<span class="params">obj</span>)</span>&#123;</span><br><span class="line"><span class="comment">/*     for (let devName in obj)&#123;</span></span><br><span class="line"><span class="comment">        let iface = obj[devName];</span></span><br><span class="line"><span class="comment">        for (let i = 0;i &lt; iface.length;i++)&#123;</span></span><br><span class="line"><span class="comment">            let alias = iface[i];</span></span><br><span class="line"><span class="comment">            if (alias.family === 'IPv4'</span></span><br><span class="line"><span class="comment">                &amp;&amp; alias.address !== '127.0.0.1'</span></span><br><span class="line"><span class="comment">                &amp;&amp; !alias.internal)&#123;</span></span><br><span class="line"><span class="comment">                return alias.address;</span></span><br><span class="line"><span class="comment">            &#125;</span></span><br><span class="line"><span class="comment">        &#125;</span></span><br><span class="line"><span class="comment">    &#125; */</span></span><br><span class="line">     <span class="keyword">for</span> (<span class="keyword">let</span> devName <span class="keyword">in</span> obj)&#123;</span><br><span class="line">             <span class="keyword">let</span> iface = obj[devName];</span><br><span class="line">             <span class="keyword">for</span> (<span class="keyword">let</span> alias <span class="keyword">of</span> iface )&#123;</span><br><span class="line">                <span class="keyword">if</span> ( alias.family === <span class="string">'IPv4'</span>  &amp;&amp; alias.address !== <span class="string">'127.0.0.1'</span>  &amp;&amp; !alias.internal) <span class="keyword">return</span> alias.address;</span><br><span class="line">             &#125;</span><br><span class="line">     &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;一些功能性函数&quot;&gt;&lt;a href=&quot;#一些功能性函数&quot; class=&quot;headerlink&quot; title=&quot;一些功能性函数&quot;&gt;&lt;/a&gt;一些功能性函数&lt;/h1&gt;&lt;h2 id=&quot;关于原生JS&quot;&gt;&lt;a href=&quot;#关于原生JS&quot; class=&quot;headerlink&quot; 
      
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>webRTC 搭建信令服务器学习</title>
    <link href="https://owen027.github.io/2020/04/02/webRTC_signaling/"/>
    <id>https://owen027.github.io/2020/04/02/webRTC_signaling/</id>
    <published>2020-04-01T16:00:00.000Z</published>
    <updated>2020-05-16T11:04:59.302Z</updated>
    
    <content type="html"><![CDATA[<p>信令，指为使通信网中各种设备协调运作，在设备之间传递的有关控制信息。用来说明各自的运行情况，提出相关设备的接续要求。</p><h2 id="通过NodeJs-搭建服务"><a href="#通过NodeJs-搭建服务" class="headerlink" title="通过NodeJs 搭建服务"></a>通过NodeJs 搭建服务</h2><p><strong>Node</strong> 基于V8引擎，是一个 JavaScript 运行环境，可以让JavaScript开发后端程序，打破了JavaScript 只能在浏览器中运行的居局面，同时开发周期短、开发成本低、学习成本低。</p><p>V8 JavaScript引擎是由Google公司使用C++语言开发的一种高性能JavaScript引擎</p><h3 id="Node-具有超高并发能力"><a href="#Node-具有超高并发能力" class="headerlink" title="Node 具有超高并发能力"></a>Node 具有超高并发能力</h3><p>在Java、PHP或者.NET等服务器语言中，会为每一个客户端连接创建一个新的线程。而每个线程需要耗费大约2MB内存，一个8GB内存的服务器可以同时连接的最大用户数为4000个左右。NodeJs仅使用一个线程，当有用户连接了，就触发一个内部事件，通过非阻塞I/O、事件驱动机制，，让Node.js程序宏观上也是并行的。使用Node.js，一个8GB内存的服务器，可以同时处理超过4万用户的连接。</p><p> Nodejs 的生态链非常的完整，有各种各样的功能库。可以根据自己的需要通过安装工具 NPM 快速安装</p><h2 id="使用socket-io-实现信令服务器"><a href="#使用socket-io-实现信令服务器" class="headerlink" title="使用socket.io 实现信令服务器"></a>使用<a href="https://socket.io/docs/">socket.io</a> 实现信令服务器</h2><h3 id="环境搭建"><a href="#环境搭建" class="headerlink" title="环境搭建"></a>环境搭建</h3><p> 官网下载 node (<a href="https://nodejs.org/en/">https://nodejs.org/en/</a>)<br> 安装 socket.io<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm install socket.io</span><br><span class="line">npm install node-static</span><br></pre></td></tr></table></figure></p><p>socket.io特别适合用来开发WebRTC的信令服务器，通过它来构建信令服务器特别的简单，这主要是因为它内置了<strong>房间</strong> 的概念。</p><p>socket.io 分为服务端和客户端两部分。服务端由 Nodejs加载后侦听某个服务端口，客户端要想与服务端相连，首先要加载 socket.io 的客户端库，然后调用 <code>io.connect();</code>就与服务端连上了。</p><h3 id="socket-io-API"><a href="#socket-io-API" class="headerlink" title="socket.io API"></a>socket.io API</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//给本次连接发消息</span></span><br><span class="line">socket.emit()</span><br><span class="line"></span><br><span class="line"><span class="comment">//给某个房间内所有人发消息</span></span><br><span class="line">io.in(room).emit()</span><br><span class="line"></span><br><span class="line"><span class="comment">//除本连接外，给某个房间内所有人发消息</span></span><br><span class="line">socket.to(room).emit()</span><br><span class="line"></span><br><span class="line"><span class="comment">//除本连接外，给所以人发消息</span></span><br><span class="line">socket.broadcast.emit()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//发送 command 命令</span></span><br><span class="line"> socket.emit(<span class="string">'cmd’);</span></span><br><span class="line"><span class="string">// 接收 cmd</span></span><br><span class="line"><span class="string"> socket.on('</span>cmd<span class="string">',function()&#123;...&#125;);</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">//送了一个 command 命令，带 data 数据</span></span><br><span class="line"><span class="string"> socket.emit('</span>action<span class="string">', data);</span></span><br><span class="line"><span class="string"> socket.on('</span>action<span class="string">',function(data)&#123;...&#125;);</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">// 发送了command命令，还有两个数据</span></span><br><span class="line"><span class="string"> socket.emit(action,arg1,arg2);</span></span><br><span class="line"><span class="string"> socket.on('</span>action<span class="string">',function(arg1,arg2)&#123;...&#125;);</span></span><br></pre></td></tr></table></figure><p><strong>客户端 demo</strong></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span> <span class="attr">content</span>=<span class="string">"width=device-width, initial-scale=1.0"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"X-UA-Compatible"</span> <span class="attr">content</span>=<span class="string">"ie=edge"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>WebRTC client<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"app"</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"/socket.io/socket.io.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"module"</span> <span class="attr">src</span>=<span class="string">"./socketIo.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// socketIo.js</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">用户写入要加入的房间,然后，通过 io.connect() 建立与服务端的连接，</span></span><br><span class="line"><span class="comment">根据socket返回的消息做不同的处理</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"> <span class="built_in">window</span>.onload = init</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">init</span> (<span class="params"></span>)</span>&#123;</span><br><span class="line"></span><br><span class="line">   <span class="keyword">let</span> room = prompt(<span class="string">'输入房间名'</span>)</span><br><span class="line">    <span class="keyword">if</span>(!room) &#123;</span><br><span class="line">        alert(<span class="string">'房间名不能为空'</span>)</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> socket = io.connect()</span><br><span class="line"></span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'Joining room: '</span>+ room )</span><br><span class="line"></span><br><span class="line">    socket.emit(<span class="string">'create or join'</span>,room)</span><br><span class="line"></span><br><span class="line">    socket.on(<span class="string">'join'</span>,<span class="function"><span class="keyword">function</span>(<span class="params">room</span>)</span>&#123; <span class="comment">// 监听 服务器返回的消息</span></span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'Making request to join room '</span>+ room + <span class="string">' is empty'</span>, <span class="string">'You are the initiator'</span>)</span><br><span class="line">        &#125;)</span><br><span class="line"></span><br><span class="line">    socket.on(<span class="string">'created'</span>,<span class="function"><span class="keyword">function</span>(<span class="params">room</span>)</span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'created '</span>+ room )</span><br><span class="line">        &#125;)</span><br><span class="line">    socket.on(<span class="string">'joined'</span>,<span class="function"><span class="keyword">function</span>(<span class="params">room</span>)</span>&#123;</span><br><span class="line">            <span class="built_in">console</span>.log(<span class="string">'joined '</span>+ room )</span><br><span class="line">            &#125;)</span><br><span class="line">    socket.on(<span class="string">'full'</span>,<span class="function"><span class="keyword">function</span>(<span class="params">room</span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'Room '</span>+ room + <span class="string">' is full'</span>)</span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">    socket.on(<span class="string">'empty'</span>,<span class="function"><span class="keyword">function</span>(<span class="params">room</span>)</span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'Room '</span>+ room + <span class="string">' is empty'</span>)</span><br><span class="line">        &#125;)</span><br><span class="line"></span><br><span class="line">    socket.on(<span class="string">'log'</span>,<span class="function"><span class="keyword">function</span>(<span class="params">array</span>)</span>&#123;</span><br><span class="line">            <span class="built_in">console</span>.log.apply(<span class="built_in">console</span>,array)</span><br><span class="line">            &#125;)</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>服务端 demo</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* socke.io 信令服务器</span></span><br><span class="line"><span class="comment">引入 node-static 库，发布静态文件</span></span><br><span class="line"><span class="comment">客户端（向服务端发起请求时，服务器通过该模块获得客户端运行的代码</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">最后通过 运行 node server.js 启动node服务</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">static</span> = <span class="built_in">require</span>(<span class="string">'node-static'</span>)</span><br><span class="line"><span class="keyword">const</span> http = <span class="built_in">require</span>(<span class="string">'http'</span>)</span><br><span class="line"><span class="keyword">const</span> file = <span class="keyword">new</span> (<span class="keyword">static</span>.Server)()</span><br><span class="line"><span class="keyword">const</span>  app = http.createServer(<span class="function">(<span class="params">req,res</span>)=&gt;</span>&#123;</span><br><span class="line">    file.serve(req,res)</span><br><span class="line">&#125;).listen(<span class="number">9800</span>)</span><br><span class="line"><span class="keyword">const</span> Io = <span class="built_in">require</span>(<span class="string">'socket.io'</span>).listen(app) <span class="comment">// 侦听 9800 端口</span></span><br><span class="line"></span><br><span class="line">Io.sockets.on(<span class="string">'connection'</span>,socket =&gt;&#123;</span><br><span class="line"></span><br><span class="line"> <span class="keyword">const</span> log = <span class="function">(<span class="params">...arg</span>)=&gt;</span>&#123;</span><br><span class="line">     <span class="keyword">const</span> array = [<span class="string">'&gt;&gt;&gt; Message from server: '</span>]</span><br><span class="line">     <span class="keyword">for</span> ( <span class="keyword">let</span> v <span class="keyword">of</span> arg)&#123;</span><br><span class="line">         array.push(v)</span><br><span class="line">     &#125;</span><br><span class="line">     socket.emit(<span class="string">'log'</span>,array)</span><br><span class="line">    &#125;</span><br><span class="line">    socket.on(<span class="string">'message'</span>,(message)=&gt;&#123;</span><br><span class="line">        log(<span class="string">'Got message: '</span>,message)</span><br><span class="line">        socket.broadcast.emit(<span class="string">'message'</span>,message) <span class="comment">// 给所有房间发送信息</span></span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">    socket.on(<span class="string">'message'</span>,(message)=&gt;&#123;</span><br><span class="line">        log(<span class="string">'Got message: '</span>,message)</span><br><span class="line">    &#125;)</span><br><span class="line">    socket.on(<span class="string">'create or join'</span>,room =&gt;&#123;</span><br><span class="line">        <span class="keyword">let</span> clientsInRoom = Io.sockets.adapter.rooms[room]</span><br><span class="line">        <span class="keyword">let</span> numClients = clientsInRoom?<span class="built_in">Object</span>.keys(clientsInroom.sockets).length:<span class="number">0</span> <span class="comment">// 房间人数</span></span><br><span class="line">        log(<span class="string">`Room <span class="subst">$&#123;room&#125;</span> has <span class="subst">$&#123;numClients&#125;</span> client(s) -- `</span>,<span class="string">`Request to create or join room <span class="subst">$&#123;room&#125;</span>`</span>)</span><br><span class="line">        <span class="keyword">switch</span>(<span class="literal">true</span>)&#123;</span><br><span class="line">            <span class="keyword">case</span>  numClients === <span class="number">0</span>:</span><br><span class="line">                socket.join(room)</span><br><span class="line">                socket.emit(<span class="string">'created'</span>,room)</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span>  numClients === <span class="number">1</span>:</span><br><span class="line">                Io.sockets.in(room).emit(<span class="string">'join'</span>,room) <span class="comment">// 向对应的房间推送消息</span></span><br><span class="line">                socket.join(room) <span class="comment">// 加入房间</span></span><br><span class="line">                scoket.emit(<span class="string">'joined'</span>,room) <span class="comment">// 向客户端推送消息</span></span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">default</span>:</span><br><span class="line">                <span class="comment">// 最多两人</span></span><br><span class="line">                socket.emit(<span class="string">'full'</span>, room); <span class="comment">//发送 "full" 消息</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'created or join end'</span>)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">let</span> message = <span class="string">`emit(): client <span class="subst">$&#123;socket.id&#125;</span> joind room <span class="subst">$&#123;room&#125;</span>`</span></span><br><span class="line">        socket.emit(message)</span><br><span class="line">        socket.broadcast.emit(message)</span><br><span class="line"></span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>参考<br><a href="https://webrtc.org.cn/webrtc-tutorial-1-setup-signaling/">WebRTC 入门教程（一）| 搭建WebRTC信令服务器</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;信令，指为使通信网中各种设备协调运作，在设备之间传递的有关控制信息。用来说明各自的运行情况，提出相关设备的接续要求。&lt;/p&gt;
&lt;h2 id=&quot;通过NodeJs-搭建服务&quot;&gt;&lt;a href=&quot;#通过NodeJs-搭建服务&quot; class=&quot;headerlink&quot; title=&quot;
      
    
    </summary>
    
      <category term="webRTC" scheme="https://owen027.github.io/categories/webRTC/"/>
    
    
      <category term="signaling serve" scheme="https://owen027.github.io/tags/signaling-serve/"/>
    
  </entry>
  
  <entry>
    <title>WebRTC信令控制与STUN/TURN服务器搭建 学习</title>
    <link href="https://owen027.github.io/2020/04/02/webRTCsignalingControl/"/>
    <id>https://owen027.github.io/2020/04/02/webRTCsignalingControl/</id>
    <published>2020-04-01T16:00:00.000Z</published>
    <updated>2020-05-20T10:55:00.620Z</updated>
    
    <content type="html"><![CDATA[<p> 信令服务器用于交换三种类型的信息：</p><ul><li>会话控制消息：初始化/关闭，各种业务逻辑消息以及错误报告。</li><li>网络相关：外部可识别的IP地址和端口。</li><li>媒体能力：客户端能控制的编解码器、分辩率，以及它想与谁通讯。</li></ul><h3 id="会话控制消息"><a href="#会话控制消息" class="headerlink" title="会话控制消息"></a>会话控制消息</h3><p>  房间的创建与销毁、加入房间、离开房间、开启音频/关闭音频、开启视频/关闭、获取房间人数、静音/取消静音、切换主讲人、视频轮询、白板中的画笔、各种图型等等这些都是会话控制消息。<br>  相对来说都是一些比较简单的消息。</p><h3 id="网络信息消息"><a href="#网络信息消息" class="headerlink" title="网络信息消息"></a>网络信息消息</h3><p>网络信息消息用于两个客户端之间交换网络信息。<br>由于它是基于点对点连接的，自然而然需要NAT （Network Address Translator 网络地址转换）穿越的技术，否则消息将无法传递。</p><p>在WebRTC中使用 <a href="https://www.rfc-editor.org/info/rfc5245">ICE</a> 机制建立网络连接。</p><h4 id="ICE-交互式连接创建"><a href="#ICE-交互式连接创建" class="headerlink" title="ICE(交互式连接创建)"></a>ICE(交互式连接创建)</h4><blockquote><p>交互式连接创建是由 <strong>IETF</strong> 的  MMUSIC  工作组开发出来的一种framework，可集成各种<a href="https://zh.wikipedia.org/wiki/NAT%E7%A9%BF%E9%80%8F">NAT穿透技术</a>，如STUN、TURN（Traversal Using Relay NAT，中继NAT实现的穿透）、RSIP（Realm Specific IP，特定域IP）等。该framework可以让SIP的客户端利用各种NAT穿透方式打穿远程的防火墙。</p></blockquote><h4 id="网络地址转换（NAT-又称网络掩蔽、IP掩蔽）"><a href="#网络地址转换（NAT-又称网络掩蔽、IP掩蔽）" class="headerlink" title="网络地址转换（NAT 又称网络掩蔽、IP掩蔽）"></a>网络地址转换（NAT 又称网络掩蔽、IP掩蔽）</h4><blockquote><p>在计算机网络中是一种在IP数据包通过路由器或防火墙时重写来源IP地址或目的IP地址的技术。这种技术被普遍使用在有多台主机但只通过一个公有IP地址访问互联网的私有网络中。它是一个方便且得到了广泛应用的技术。当然，NAT也让主机之间的通信变得复杂，导致了通信效率的降低。</p></blockquote><p>我们上网很可能会处在一个 <a href="https://zh.wikipedia.org/wiki/%E7%BD%91%E7%BB%9C%E5%9C%B0%E5%9D%80%E8%BD%AC%E6%8D%A2">NAT</a> 设备（无线路由器之类）之后。NAT设备会在IP封包通过设备时修改源/目的IP地址. 对于家用路由器来说, 使用的是网络地址端口转换(NAPT), 它不仅改IP, 还修改TCP和UDP协议的端口号, 这样就能让内网中的设备共用同一个外网IP</p><p>国内移动无线网络运营商在链路上一段时间内没有数据通讯后, 会淘汰NAT表中的对应项, 造成链路中断，出现<strong>NAT超时</strong>。 国内的运营商一般NAT超时的时间为5分钟，所以通常我们TCP长连接的心跳设置的时间间隔为3-5分钟</p><h4 id="STUN"><a href="#STUN" class="headerlink" title="STUN"></a>STUN</h4><blockquote><p><a href="https://www.rfc-editor.org/rfc/rfc5389.html">STUN/RFC5389</a> 是一种处理NAT传输的协议，但主要作为一个工具来服务于其他协议。<br>运行位于 NAT 后的客户端找出自己的公网地址，可以被终端用来发现其公网IP和端口。<br>同时可以检测端点间的连接性，也可以作为一种保活（keep-alive）协议来维持NAT的绑定。<br>这些信息被用在两个同时处在 NAT 路由器后的主机创建UDP通信。</p></blockquote><ul><li>参考地址 <a href="https://zhuanlan.zhihu.com/p/26797664">P2P通信标准协议之STUN</a></li></ul><h4 id="TURN"><a href="#TURN" class="headerlink" title="TURN"></a>TURN</h4><blockquote><p>一种数据传输协议,是STUN/RFC5389的一个拓展。允许在 TCP 或 UDP 的连线上在线跨域 NAT 或防火墙<br>为了保证通信能够建立，我们可以在没办法的情况下用保证成功的中继方法（Relaying）， 虽然使用中继会对服务器负担加重，而且也算不上P2P，但是至少保证了最坏情况下信道的通畅，从而不至于受NAT类型的限制。<br>TURN/RFC5766就是为此目的而进行的拓展。</p></blockquote><ul><li>参考地址 <a href="https://zhuanlan.zhihu.com/p/26797422">P2P通信标准协议之STUN</a></li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt; 信令服务器用于交换三种类型的信息：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;会话控制消息：初始化/关闭，各种业务逻辑消息以及错误报告。&lt;/li&gt;
&lt;li&gt;网络相关：外部可识别的IP地址和端口。&lt;/li&gt;
&lt;li&gt;媒体能力：客户端能控制的编解码器、分辩率，以及它想与谁通讯。&lt;/li&gt;
&lt;
      
    
    </summary>
    
      <category term="webRTC" scheme="https://owen027.github.io/categories/webRTC/"/>
    
    
      <category term="signaling control" scheme="https://owen027.github.io/tags/signaling-control/"/>
    
  </entry>
  
  <entry>
    <title>uniapp中使用vue的问题</title>
    <link href="https://owen027.github.io/2019/12/26/usingVueInUniapp/"/>
    <id>https://owen027.github.io/2019/12/26/usingVueInUniapp/</id>
    <published>2019-12-26T08:06:05.000Z</published>
    <updated>2019-12-31T12:23:44.498Z</updated>
    
    <content type="html"><![CDATA[<p><strong>uniapp完全支持vue的生命钩子函数、模板语法、计算属性、条件渲染、列表渲染</strong></p><h2 id="组件"><a href="#组件" class="headerlink" title="组件"></a>组件</h2><p><strong>uni-app只支持vue单文件组件（.vue 组件）</strong>render，和<code>&lt;script type=&quot;text/x-template&quot;&gt;</code>字符串模版等 非H5端都不支持<br>uni-app 支持配置全局组件，需在 main.js 里进行全局注册，注册后就可在所有页面里使用该组件。</p><p>表单控件推荐使用原生或uniapp生态库中的<a href="https://ext.dcloud.net.cn/">组件</a><br>非H5不支持v-html <a href="https://ask.dcloud.net.cn/article/35772">跨端的富文本处理方案详情</a><br>非H5端不支持列表：</p><ul><li>Slot（scoped 暂时还没做支持）</li><li>动态组件</li><li>异步组件</li><li>inline-template</li><li>X-Templates</li><li>keep-alive</li><li>transition （可使用 animation 或 CSS 动画替代）</li><li>老的非自定义组件编译模式不支持在组件引用时，在组件上定义 click 等原生事件、v-show（可用 v-if 代替）和 class style 等样式属性(例：<card - class="class-name"> </card> 样式是不会生效的)。建议更新为自定义组件模式</li><li><a href="https://ask.dcloud.net.cn/article/35843">老的非自定义组件编译模式</a>组件里使用 slot 嵌套的其他组件时不支持 v-for。建议更新为自定义组件模式</li></ul><h3 id="保留关键字"><a href="#保留关键字" class="headerlink" title="保留关键字"></a>保留关键字</h3><p>标准的 HTML 及 SVG 标签名不能作为组件名。<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line">a</span><br><span class="line">canvas</span><br><span class="line">cell</span><br><span class="line">content</span><br><span class="line">countdown</span><br><span class="line">datepicker</span><br><span class="line">div</span><br><span class="line">element</span><br><span class="line">embed</span><br><span class="line">header</span><br><span class="line">image</span><br><span class="line">img</span><br><span class="line">indicator</span><br><span class="line">input</span><br><span class="line">link</span><br><span class="line">list</span><br><span class="line">loading-indicator</span><br><span class="line">loading</span><br><span class="line">marquee</span><br><span class="line">meta</span><br><span class="line">refresh</span><br><span class="line">richtext</span><br><span class="line">script</span><br><span class="line">scrollable</span><br><span class="line">scroller</span><br><span class="line">select</span><br><span class="line">slider-neighbor</span><br><span class="line">slider</span><br><span class="line">slot</span><br><span class="line">span</span><br><span class="line">spinner</span><br><span class="line">style</span><br><span class="line">svg</span><br><span class="line">switch</span><br><span class="line">tabbar</span><br><span class="line">tabheader</span><br><span class="line">template</span><br><span class="line">text</span><br><span class="line">textarea</span><br><span class="line">timepicker</span><br><span class="line">trisition-group</span><br><span class="line">trisition</span><br><span class="line">video</span><br><span class="line">view</span><br><span class="line">web</span><br></pre></td></tr></table></figure></p><h3 id="组件属性设置不生效解决办法"><a href="#组件属性设置不生效解决办法" class="headerlink" title="组件属性设置不生效解决办法"></a>组件属性设置不生效解决办法</h3><p>当重复设置某些属性为相同的值时，不会同步到view层。每次将scroll-view组件的scroll-top属性值设置为0，只有第一次能顺利返回顶部。 这和props的单向数据流特性有关，组件内部scroll-top的实际值改动后，其绑定的属性并不会一同变化。<br>解决方法：</p><ul><li><p>监听scroll事件，记录组件内部变化的值，在设置新值之前先设置为记录的当前值 （推荐使用）</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">scroll-view</span> <span class="attr">:scroll-top</span>=<span class="string">"scrollTop"</span> <span class="attr">scroll-y</span>=<span class="string">"true"</span> @<span class="attr">scroll</span>=<span class="string">"scroll"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="undefined">    data() &#123;</span></span><br><span class="line"><span class="javascript">        <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="undefined">            scrollTop: 0,</span></span><br><span class="line"><span class="undefined">            old: &#123;</span></span><br><span class="line"><span class="undefined">                scrollTop: 0</span></span><br><span class="line"><span class="undefined">            &#125;</span></span><br><span class="line"><span class="undefined">        &#125;</span></span><br><span class="line"><span class="undefined">    &#125;,</span></span><br><span class="line"><span class="undefined">    methods: &#123;</span></span><br><span class="line"><span class="javascript">        scroll: <span class="function"><span class="keyword">function</span>(<span class="params">e</span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">            <span class="keyword">this</span>.old.scrollTop = e.detail.scrollTop</span></span><br><span class="line"><span class="undefined">        &#125;,</span></span><br><span class="line"><span class="javascript">        goTop: <span class="function"><span class="keyword">function</span>(<span class="params">e</span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">            <span class="keyword">this</span>.scrollTop = <span class="keyword">this</span>.old.scrollTop</span></span><br><span class="line"><span class="javascript">            <span class="keyword">this</span>.$nextTick(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">                <span class="keyword">this</span>.scrollTop = <span class="number">0</span></span></span><br><span class="line"><span class="undefined">            &#125;);</span></span><br><span class="line"><span class="undefined">        &#125;</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p>监听scroll事件，获取组件内部变化的值，实时更新其绑定值</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">    data() &#123;</span><br><span class="line">        <span class="keyword">return</span> &#123;</span><br><span class="line">            scrollTop: <span class="number">0</span>,</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    methods: &#123;</span><br><span class="line">        scroll: <span class="function"><span class="keyword">function</span>(<span class="params">e</span>) </span>&#123;</span><br><span class="line">            <span class="keyword">this</span>.scrollTop = e.detail.scrollTop</span><br><span class="line">        &#125;,</span><br><span class="line">        goTop: <span class="function"><span class="keyword">function</span>(<span class="params">e</span>) </span>&#123;</span><br><span class="line">            <span class="keyword">this</span>.scrollTop = <span class="number">0</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><h3 id="获取上页传递的数据"><a href="#获取上页传递的数据" class="headerlink" title="获取上页传递的数据"></a>获取上页传递的数据</h3><p>可在onLoad 里得到，onLoad 的参数是其他页面打开当前页面所传递的数据。<br>uni-app 内置了 vuex ，在app里的使用，可参考hello-uniapp store/index.js。</p><h2 id="各个平台使用v-for的差异"><a href="#各个平台使用v-for的差异" class="headerlink" title="各个平台使用v-for的差异"></a>各个平台使用v-for的差异</h2><ul><li>在H5中，<code>v-for=&quot;(item, index) in 10&quot;</code> item 是从 1开始，其它平台从0开始</li><li>非H5中，不支持第三个参数 <code>v-for=&quot;(value, name, index) in object&quot;</code> index 是不支持的</li></ul><h2 id="Class和Style"><a href="#Class和Style" class="headerlink" title="Class和Style"></a>Class和Style</h2><h3 id="class支持的语法"><a href="#class支持的语法" class="headerlink" title="class支持的语法"></a>class支持的语法</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">:class</span>=<span class="string">"&#123; active: isActive &#125;"</span>&gt;</span>111<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">"static"</span> <span class="attr">v-bind:class</span>=<span class="string">"&#123; active: isActive, 'text-danger': hasError &#125;"</span>&gt;</span>222<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">"static"</span> <span class="attr">:class</span>=<span class="string">"[activeClass, errorClass]"</span>&gt;</span>333<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">"static"</span> <span class="attr">v-bind:class</span>=<span class="string">"[isActive ? activeClass : '', errorClass]"</span>&gt;</span>444<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">"static"</span> <span class="attr">v-bind:class</span>=<span class="string">"[&#123; active: isActive &#125;, errorClass]"</span>&gt;</span>555<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="style支持的语法"><a href="#style支持的语法" class="headerlink" title="style支持的语法"></a>style支持的语法</h3><p><strong>以 :style=””方式设置的px单位是不会被编译器转换</strong><br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">v-bind:style</span>=<span class="string">"&#123; color: activeColor, fontSize: fontSize + 'px' &#125;"</span>&gt;</span>666<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">v-bind:style</span>=<span class="string">"[&#123; color: activeColor, fontSize: fontSize + 'px' &#125;]"</span>&gt;</span>777<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br></pre></td></tr></table></figure></p><p><strong>非H5端不支持 <code>classObject</code> 和<code>styleObject</code>语法，同时不支持在自定义组件上使用class和style的绑定</strong><br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 不支持的写法如下 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">view</span> <span class="attr">:class</span>=<span class="string">"[activeClass]"</span> <span class="attr">:style</span>=<span class="string">"[baseStyles,overridingStyles]"</span>&gt;</span><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript">    <span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="undefined">        data() &#123;</span></span><br><span class="line"><span class="javascript">            <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="undefined">                activeClass: &#123;</span></span><br><span class="line"><span class="javascript">                    <span class="string">'active'</span>: <span class="literal">true</span>,</span></span><br><span class="line"><span class="javascript">                    <span class="string">'text-danger'</span>: <span class="literal">false</span></span></span><br><span class="line"><span class="undefined">                &#125;,</span></span><br><span class="line"><span class="undefined">                baseStyles: &#123;</span></span><br><span class="line"><span class="javascript">                    color: <span class="string">'green'</span>,</span></span><br><span class="line"><span class="javascript">                    fontSize: <span class="string">'30px'</span></span></span><br><span class="line"><span class="undefined">                &#125;,</span></span><br><span class="line"><span class="undefined">                overridingStyles: &#123;</span></span><br><span class="line"><span class="javascript">                    <span class="string">'font-weight'</span>: <span class="string">'bold'</span></span></span><br><span class="line"><span class="undefined">                &#125;</span></span><br><span class="line"><span class="undefined">            &#125;</span></span><br><span class="line"><span class="undefined">        &#125;</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure></p><h3 id="事件处理器"><a href="#事件处理器" class="headerlink" title="事件处理器"></a>事件处理器</h3><p>vue与uniapp对应的事件名称：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 事件映射表，左侧为 WEB 事件，右侧为 ``uni-app`` 对应事件</span></span><br><span class="line">&#123;</span><br><span class="line">    click: <span class="string">'tap'</span>,</span><br><span class="line">    touchstart: <span class="string">'touchstart'</span>,</span><br><span class="line">    touchmove: <span class="string">'touchmove'</span>,</span><br><span class="line">    touchcancel: <span class="string">'touchcancel'</span>,</span><br><span class="line">    touchend: <span class="string">'touchend'</span>,</span><br><span class="line">    tap: <span class="string">'tap'</span>,</span><br><span class="line">    longtap: <span class="string">'longtap'</span>,</span><br><span class="line">    input: <span class="string">'input'</span>,</span><br><span class="line">    change: <span class="string">'change'</span>,</span><br><span class="line">    submit: <span class="string">'submit'</span>,</span><br><span class="line">    blur: <span class="string">'blur'</span>,</span><br><span class="line">    focus: <span class="string">'focus'</span>,</span><br><span class="line">    reset: <span class="string">'reset'</span>,</span><br><span class="line">    confirm: <span class="string">'confirm'</span>,</span><br><span class="line">    columnchange: <span class="string">'columnchange'</span>,</span><br><span class="line">    linechange: <span class="string">'linechange'</span>,</span><br><span class="line">    error: <span class="string">'error'</span>,</span><br><span class="line">    scrolltoupper: <span class="string">'scrolltoupper'</span>,</span><br><span class="line">    scrolltolower: <span class="string">'scrolltolower'</span>,</span><br><span class="line">    scroll: <span class="string">'scroll'</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="事件修饰符"><a href="#事件修饰符" class="headerlink" title="事件修饰符"></a>事件修饰符</h4><ul><li><code>.stop</code>各平台全支持</li><li><code>.prevent</code>仅H5</li><li><code>.self</code>仅H5</li><li><code>.once</code>仅H5</li><li><code>.capture</code>仅H5</li><li><code>.passive</code>仅H5</li></ul><p><strong>禁止蒙版下的页面滚动可使用 @touchmove.stop.prevent=”handle”</strong></p><p>无按键修饰符</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;strong&gt;uniapp完全支持vue的生命钩子函数、模板语法、计算属性、条件渲染、列表渲染&lt;/strong&gt;&lt;/p&gt;
&lt;h2 id=&quot;组件&quot;&gt;&lt;a href=&quot;#组件&quot; class=&quot;headerlink&quot; title=&quot;组件&quot;&gt;&lt;/a&gt;组件&lt;/h2&gt;&lt;p&gt;&lt;stro
      
    
    </summary>
    
      <category term="notes" scheme="https://owen027.github.io/categories/notes/"/>
    
    
      <category term="Notes using Vue in uniapp" scheme="https://owen027.github.io/tags/Notes-using-Vue-in-uniapp/"/>
    
  </entry>
  
  <entry>
    <title>uniapp manifest 应用的配置文件</title>
    <link href="https://owen027.github.io/2019/12/26/uniappManifest/"/>
    <id>https://owen027.github.io/2019/12/26/uniappManifest/</id>
    <published>2019-12-26T07:02:34.000Z</published>
    <updated>2019-12-29T09:41:24.789Z</updated>
    
    <content type="html"><![CDATA[<p><code>manifest.json</code> 是应用的配置文件，用于指定应用的名称、图标、权限等</p><table><thead><tr><th style="text-align:center">属性</th><th style="text-align:center">值类型</th><th style="text-align:center">默认值</th><th style="text-align:center">描述</th><th style="text-align:center">兼容</th></tr></thead><tbody><tr><td style="text-align:center">name</td><td style="text-align:center">String</td><td style="text-align:center"></td><td style="text-align:center">应用名称</td></tr><tr><td style="text-align:center">appid</td><td style="text-align:center">String</td><td style="text-align:center">新建项目时，DCloud云端分配<a href="https://ask.dcloud.net.cn/article/35907">详情</a> 勿自行修改</td><td style="text-align:center">应用标识</td></tr><tr><td style="text-align:center">description</td><td style="text-align:center">String</td><td style="text-align:center"></td><td style="text-align:center">应用描述</td></tr><tr><td style="text-align:center">versionName</td><td style="text-align:center">String</td><td style="text-align:center"></td><td style="text-align:center">版本名称</td></tr><tr><td style="text-align:center">versionCode</td><td style="text-align:center">String</td><td style="text-align:center"></td><td style="text-align:center">版本号</td></tr><tr><td style="text-align:center">transformPx</td><td style="text-align:center">Boolean</td><td style="text-align:center">true</td><td style="text-align:center">是否转化项目的px,true转化为rpx</td></tr><tr><td style="text-align:center">networkTimeout</td><td style="text-align:center">Object</td><td style="text-align:center"></td><td style="text-align:center">网络超时 <a href="https://uniapp.dcloud.io/collocation/manifest?id=networktimeout">见</a></td></tr><tr><td style="text-align:center">debug</td><td style="text-align:center">Boolean</td><td style="text-align:center">false</td><td style="text-align:center">是否开启debug模式</td></tr><tr><td style="text-align:center">app-plus</td><td style="text-align:center">Object</td><td style="text-align:center"></td><td style="text-align:center">5+App特有<a href="https://uniapp.dcloud.io/collocation/manifest?id=app-plus">配置</a></td></tr><tr><td style="text-align:center">h5</td><td style="text-align:center">Object</td><td style="text-align:center"></td><td style="text-align:center">H5特有<a href="https://uniapp.dcloud.io/collocation/manifest?id=h5">配置</a></td></tr><tr><td style="text-align:center">quickapp</td><td style="text-align:center">Object</td><td style="text-align:center"></td><td style="text-align:center">快应用特有配置，即将支持</td></tr><tr><td style="text-align:center">mp-weixin</td><td style="text-align:center">Object</td><td style="text-align:center"></td><td style="text-align:center">微信特有<a href="https://uniapp.dcloud.io/collocation/manifest?id=mp-weixin">配置</a></td></tr><tr><td style="text-align:center">mp-alipay</td><td style="text-align:center">Object</td><td style="text-align:center"></td><td style="text-align:center">支付宝特有<a href="https://uniapp.dcloud.io/collocation/manifest?id=mp-alipay">配置</a></td></tr><tr><td style="text-align:center">mp-baidu</td><td style="text-align:center">Object</td><td style="text-align:center"></td><td style="text-align:center">百度特有<a href="https://uniapp.dcloud.io/collocation/manifest?id=mp-baidu">配置</a></td></tr><tr><td style="text-align:center">mp-toutiao</td><td style="text-align:center">Object</td><td style="text-align:center"></td><td style="text-align:center">头条特有<a href="https://uniapp.dcloud.io/collocation/manifest?id=mp-toutiao">配置</a></td><td style="text-align:center">1.6.0</td></tr><tr><td style="text-align:center">mp-qq</td><td style="text-align:center">Object</td><td style="text-align:center"></td><td style="text-align:center">QQ特有<a href="https://uniapp.dcloud.io/collocation/manifest?id=mp-qq">配置</a></td><td style="text-align:center">2.1.0</td></tr></tbody></table><ul><li>versionName在云打包App和生成wgt应用资源时会使用。如需升级App版本，先修改此处再云打包。导出wgt资源用于离线打包和热更新时也会以此版本为依据。</li><li>在本地打包时和热更新时，App版本和wgt应用资源版本将不再保持一致。此时通过<a href="https://www.html5plus.org/doc/zh_cn/runtime.html#plus.runtime.version">plus.runtime.version</a>可获取App版本，通过<a href="https://www.html5plus.org/doc/zh_cn/runtime.html#plus.runtime.getProperty">plus.runtime.getProperty</a>获取wgt资源版本。</li></ul><h2 id="networkTimeout"><a href="#networkTimeout" class="headerlink" title="networkTimeout"></a>networkTimeout</h2><p><strong>各类网络请求的超时时间，默认值均为6000毫秒</strong></p><table><thead><tr><th style="text-align:center">属性</th><th style="text-align:center">值类型</th><th style="text-align:center">描述</th></tr></thead><tbody><tr><td style="text-align:center">request</td><td style="text-align:center">Number</td><td style="text-align:center"><code>uni.request</code>的超时时间</td></tr><tr><td style="text-align:center">connectSocket</td><td style="text-align:center">Number</td><td style="text-align:center"><code>uni.connectSocket</code>的超时时间</td></tr><tr><td style="text-align:center">uploadFile</td><td style="text-align:center">Number</td><td style="text-align:center"><code>uni.uploadFile</code>的超时时间</td></tr><tr><td style="text-align:center">downloadFile</td><td style="text-align:center">Number</td><td style="text-align:center"><code>uni.downloadFile</code>的超时时间</td></tr></tbody></table><h2 id="App-Splashscreen"><a href="#App-Splashscreen" class="headerlink" title="App Splashscreen"></a>App Splashscreen</h2><p><strong>splash是App必然存在，不可取消的</strong></p><table><thead><tr><th style="text-align:center">属性</th><th style="text-align:center">值类型</th><th style="text-align:center">默认值</th><th style="text-align:center">描述</th></tr></thead><tbody><tr><td style="text-align:center">alwaysShowBeforRender</td><td style="text-align:center">Boolean</td><td style="text-align:center">true</td><td style="text-align:center">首页白屏时不关闭启动界面，支持最低1.6.0版本</td></tr><tr><td style="text-align:center">autoclose</td><td style="text-align:center">Boolean</td><td style="text-align:center">true</td><td style="text-align:center">是否自动关闭程序启动界面。如须手动关闭，那么 <code>alwaysShowBeforeRender</code>及<code>autoclose</code>均须设置为false</td></tr><tr><td style="text-align:center">waiting</td><td style="text-align:center">Boolean</td><td style="text-align:center">true</td><td style="text-align:center">是否在程序启动界面显示等待圈或雪花</td></tr><tr><td style="text-align:center">delay</td><td style="text-align:center">Number</td><td style="text-align:center">0</td><td style="text-align:center">启动界面在应用的首页加载完毕后延迟关闭的时间</td></tr></tbody></table><ul><li>如果不配置自己的splash图，APP端会默认将App的Icon放到splash中</li><li>splash只能是标准png</li><li>相关改动，云打包生效，真机运行不生效。本地打包须自行在原生工程中配置</li><li>App启动图中IOS的MAX等大屏设备的splash图若不匹配，会导致IOS认为App未为MAX优化，将无法全屏</li><li>Android的splash <a href="https://ask.dcloud.net.cn/article/35527">详见</a></li></ul><h2 id="完整-manifest-json"><a href="#完整-manifest-json" class="headerlink" title="完整 manifest.json"></a>完整 manifest.json</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">&#123;</span><br><span class="line">    <span class="string">"appid"</span>: <span class="string">"__UNI__XXXXXX，创建应用时云端分配的，不要修改。"</span>,</span><br><span class="line">    <span class="string">"name"</span>: <span class="string">"应用名称，如uni-app"</span>,</span><br><span class="line">    <span class="string">"description"</span>: <span class="string">"应用描述"</span>,</span><br><span class="line">    <span class="string">"versionName"</span>: <span class="string">"1.0.0"</span>,</span><br><span class="line">    <span class="string">"versionCode"</span>: <span class="string">"100"</span>,</span><br><span class="line">    <span class="comment">// app-plus 节点是 5+App 特有配置，推荐在 HBuilderX 的 manifest.json 可视化界面操作完成配置。</span></span><br><span class="line">    <span class="string">"app-plus"</span>: &#123;</span><br><span class="line">        <span class="comment">// HBuilderX-&gt;manifest.json-&gt;模块权限配置</span></span><br><span class="line">        <span class="string">"modules"</span>: &#123;</span><br><span class="line">            <span class="string">"Contacts"</span>: &#123;&#125;,</span><br><span class="line">            <span class="string">"Fingerprint"</span>: &#123;&#125;,</span><br><span class="line">            <span class="string">"Maps"</span>: &#123;&#125;,</span><br><span class="line">            <span class="string">"Messaging"</span>: &#123;&#125;,</span><br><span class="line">            <span class="string">"OAuth"</span>: &#123;&#125;,</span><br><span class="line">            <span class="string">"Payment"</span>: &#123;&#125;,</span><br><span class="line">            <span class="string">"Push"</span>: &#123;&#125;,</span><br><span class="line">            <span class="string">"Share"</span>: &#123;&#125;,</span><br><span class="line">            <span class="string">"Speech"</span>: &#123;&#125;,</span><br><span class="line">            <span class="string">"Statistic"</span>: &#123;&#125;,</span><br><span class="line">            <span class="string">"VideoPlayer"</span>: &#123;&#125;,</span><br><span class="line">            <span class="string">"LivePusher"</span>: &#123;&#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="string">"distribute"</span>: &#123;</span><br><span class="line">            <span class="comment">// Android 与 iOS 证书相关信息均在打包时完成配置</span></span><br><span class="line">            <span class="string">"android"</span>: &#123;</span><br><span class="line">                <span class="string">"packagename"</span>: <span class="string">"Android应用包名，如io.dcloud.uniapp"</span>,</span><br><span class="line">                <span class="string">"keystore"</span>: <span class="string">"Android应用打包使用的密钥库文件"</span>,</span><br><span class="line">                <span class="string">"password"</span>: <span class="string">"Android应用打包使用密钥库中证书的密码"</span>,</span><br><span class="line">                <span class="string">"aliasname"</span>: <span class="string">"Android应用打包使用密钥库中证书的别名"</span>,</span><br><span class="line">                <span class="string">"schemes"</span>: [</span><br><span class="line">                    <span class="string">"应用支持的scheme，大小写相关，推荐使用小写"</span></span><br><span class="line">                ],</span><br><span class="line">                <span class="string">"theme"</span>: <span class="string">"程序使用的主题"</span>,</span><br><span class="line">                <span class="string">"android:name"</span>: <span class="string">"自定义程序入口类名"</span>,</span><br><span class="line">                <span class="string">"custompermissions"</span>: <span class="string">"Boolean类型，是否自定义android权限，true表示自定义权限，只使用permissions下指定的android权限，不根据用户使用的5+模块自动添加android权限，false表示自动根据用户使用的5+模块自动添加android权限"</span>,</span><br><span class="line">                <span class="string">"permissions"</span>: [</span><br><span class="line">                    <span class="string">"要添加的额外的android权限，如&lt;uses-permission android:name=\"com.android.launcher.permission.INSTALL_SHORTCUT\" /&gt;"</span>,</span><br><span class="line">                    <span class="string">"&lt;uses-permission android:name=\"com.android.launcher.permission.UNINSTALL_SHORTCUT\" /&gt;"</span></span><br><span class="line">                ],</span><br><span class="line">                <span class="string">"minSdkVersion"</span>: <span class="string">"apk支持的最低版本，默认值为14"</span>,</span><br><span class="line">                <span class="string">"targetSdkVersion"</span>: <span class="string">"apk的目标版本，默认值为21"</span></span><br><span class="line">            &#125;,</span><br><span class="line">            <span class="string">"ios"</span>: &#123;</span><br><span class="line">                <span class="string">"appid"</span>: <span class="string">"iOS应用标识，苹果开发网站申请的appid，如io.dcloud.uniapp"</span>,</span><br><span class="line">                <span class="string">"mobileprovision"</span>: <span class="string">"iOS应用打包配置文件"</span>,</span><br><span class="line">                <span class="string">"password"</span>: <span class="string">"iOS应用打包个人证书导入密码"</span>,</span><br><span class="line">                <span class="string">"p12"</span>: <span class="string">"iOS应用打包个人证书，打包配置文件关联的个人证书"</span>,</span><br><span class="line">                <span class="string">"devices"</span>: <span class="string">"iOS应用支持的设备类型，可取值iphone/ipad/universal"</span>,</span><br><span class="line">                <span class="string">"urltypes"</span>: [&#123;</span><br><span class="line">                        <span class="string">"urlschemes"</span>: [</span><br><span class="line">                            <span class="string">"hbuilder"</span>,</span><br><span class="line">                            <span class="string">"必选，程序所支持的自定义协议名称"</span></span><br><span class="line">                        ],</span><br><span class="line">                        <span class="string">"id"</span>: <span class="string">"可选，自定义协议的标识"</span>,</span><br><span class="line">                        <span class="string">"icon"</span>: <span class="string">"可选，打开程序时显示的图标"</span></span><br><span class="line">                    &#125;,</span><br><span class="line">                    &#123;</span><br><span class="line">                        <span class="string">"urlschemes"</span>: [</span><br><span class="line">                            <span class="string">"http"</span>,</span><br><span class="line">                            <span class="string">"https"</span>,</span><br><span class="line">                            <span class="string">"必选，程序所支持的自定义协议名称，大小写无关，推荐使用小写"</span></span><br><span class="line">                        ],</span><br><span class="line">                        <span class="string">"id"</span>: <span class="string">"可选，自定义协议的标识"</span>,</span><br><span class="line">                        <span class="string">"icon"</span>: <span class="string">"可选，打开程序时显示的图标"</span></span><br><span class="line">                    &#125;</span><br><span class="line">                ],</span><br><span class="line">                <span class="string">"frameworks"</span>: [<span class="string">"使用native.js调用API要引用的库文件名称，如CoreLocation.framework"</span>, <span class="string">"QuartzCore.framework"</span>],</span><br><span class="line">                <span class="string">"idfa"</span>: <span class="string">"true|false，是否使用广告标识符，默认值为false"</span>,</span><br><span class="line">                <span class="string">"plistcmds"</span>: [</span><br><span class="line">                    <span class="string">"Set :权限 使用权限的原因"</span>,</span><br><span class="line">                    <span class="string">"Set :NSCameraUsageDescription 说明使用用户相机的原因"</span></span><br><span class="line">                ]</span><br><span class="line">            &#125;,</span><br><span class="line">            <span class="comment">// HBuilderX-&gt;manifest.json-&gt;SDK配置</span></span><br><span class="line">            <span class="string">"sdkConfigs"</span>: &#123;</span><br><span class="line">                <span class="string">"maps"</span>: &#123;</span><br><span class="line">                    <span class="comment">// 地图只能选一个，这里选的是百度。</span></span><br><span class="line">                    <span class="string">"baidu"</span>: &#123;</span><br><span class="line">                        <span class="string">"appkey_ios"</span>: <span class="string">""</span>,</span><br><span class="line">                        <span class="string">"appkey_android"</span>: <span class="string">""</span></span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;,</span><br><span class="line">                <span class="string">"oauth"</span>: &#123;</span><br><span class="line">                    <span class="comment">// 微信登录</span></span><br><span class="line">                    <span class="string">"weixin"</span>: &#123;</span><br><span class="line">                        <span class="string">"appid"</span>: <span class="string">""</span>,</span><br><span class="line">                        <span class="string">"appsecret"</span>: <span class="string">""</span></span><br><span class="line">                    &#125;,</span><br><span class="line">                    <span class="comment">// QQ登录</span></span><br><span class="line">                    <span class="string">"qq"</span>: &#123;</span><br><span class="line">                        <span class="string">"appid"</span>: <span class="string">""</span></span><br><span class="line">                    &#125;,</span><br><span class="line">                    <span class="comment">// 新浪微博登录</span></span><br><span class="line">                    <span class="string">"sina"</span>: &#123;</span><br><span class="line">                        <span class="string">"appkey"</span>: <span class="string">""</span>,</span><br><span class="line">                        <span class="string">"appsecret"</span>: <span class="string">""</span>,</span><br><span class="line">                        <span class="string">"redirect_uri"</span>: <span class="string">""</span></span><br><span class="line">                    &#125;,</span><br><span class="line">                    <span class="comment">// 小米登录</span></span><br><span class="line">                    <span class="string">"xiaomi"</span>: &#123;</span><br><span class="line">                        <span class="string">"appid_ios"</span>: <span class="string">""</span>,</span><br><span class="line">                        <span class="string">"appsecret_ios"</span>: <span class="string">""</span>,</span><br><span class="line">                        <span class="string">"redirect_uri_ios"</span>: <span class="string">""</span>,</span><br><span class="line">                        <span class="string">"appid_android"</span>: <span class="string">""</span>,</span><br><span class="line">                        <span class="string">"appsecret_android"</span>: <span class="string">""</span>,</span><br><span class="line">                        <span class="string">"redirect_uri_android"</span>: <span class="string">""</span></span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;,</span><br><span class="line">                <span class="string">"payment"</span>: &#123;</span><br><span class="line">                    <span class="comment">// Apple应用内支付</span></span><br><span class="line">                    <span class="string">"appleiap"</span>: &#123;&#125;,</span><br><span class="line">                    <span class="comment">// 支付宝支付</span></span><br><span class="line">                    <span class="string">"alipay"</span>: &#123;</span><br><span class="line">                        <span class="string">"scheme"</span>: <span class="string">""</span></span><br><span class="line">                    &#125;,</span><br><span class="line">                    <span class="comment">// 微信支付</span></span><br><span class="line">                    <span class="string">"weixin"</span>: &#123;</span><br><span class="line">                        <span class="string">"appid"</span>: <span class="string">""</span></span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;,</span><br><span class="line">                <span class="string">"push"</span>: &#123;</span><br><span class="line">                    <span class="comment">// 推送只能选择一个，这里选的是个推。</span></span><br><span class="line">                    <span class="string">"igexin"</span>: &#123;</span><br><span class="line">                        <span class="string">"appid"</span>: <span class="string">""</span>,</span><br><span class="line">                        <span class="string">"appkey"</span>: <span class="string">""</span>,</span><br><span class="line">                        <span class="string">"appsecret"</span>: <span class="string">""</span></span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;,</span><br><span class="line">                <span class="string">"share"</span>: &#123;</span><br><span class="line">                    <span class="comment">// 微信分享</span></span><br><span class="line">                    <span class="string">"weixin"</span>: &#123;</span><br><span class="line">                        <span class="string">"appid"</span>: <span class="string">""</span></span><br><span class="line">                    &#125;,</span><br><span class="line">                    <span class="comment">// 新浪微博分享</span></span><br><span class="line">                    <span class="string">"sina"</span>: &#123;</span><br><span class="line">                        <span class="string">"appkey"</span>: <span class="string">""</span>,</span><br><span class="line">                        <span class="string">"appsecret"</span>: <span class="string">""</span>,</span><br><span class="line">                        <span class="string">"redirect_uri"</span>: <span class="string">""</span></span><br><span class="line">                    &#125;,</span><br><span class="line">                    <span class="comment">// 分享到QQ</span></span><br><span class="line">                    <span class="string">"qq"</span>: &#123;</span><br><span class="line">                        <span class="string">"appid"</span>: <span class="string">""</span></span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;,</span><br><span class="line">                <span class="string">"statics"</span>: &#123;</span><br><span class="line">                    <span class="comment">// 友盟统计</span></span><br><span class="line">                    <span class="string">"umeng"</span>: &#123;</span><br><span class="line">                        <span class="string">"appkey_ios"</span>: <span class="string">""</span>,</span><br><span class="line">                        <span class="string">"channelid_ios"</span>: <span class="string">""</span>,</span><br><span class="line">                        <span class="string">"appkey_android"</span>: <span class="string">""</span>,</span><br><span class="line">                        <span class="string">"channelid_android"</span>: <span class="string">""</span></span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;,</span><br><span class="line">            <span class="comment">// 屏幕方向 需要云打包/本地打包/自定义基座生效</span></span><br><span class="line">            <span class="string">"orientation"</span>: [</span><br><span class="line">                <span class="string">"portrait-primary"</span>,</span><br><span class="line">                <span class="string">"landscape-primary"</span>,</span><br><span class="line">                <span class="string">"portrait-secondary"</span>,</span><br><span class="line">                <span class="string">"landscape-secondary"</span></span><br><span class="line">            ],</span><br><span class="line">            <span class="comment">// HBuilderX-&gt;manifest.json-&gt;图标配置</span></span><br><span class="line">            <span class="string">"icons"</span>: &#123;</span><br><span class="line">                <span class="string">"ios"</span>: &#123;</span><br><span class="line">                    <span class="string">"appstore"</span>: <span class="string">"必选, 1024x1024, 提交app sotre使用的图标"</span>,</span><br><span class="line">                    <span class="string">"iphone"</span>: &#123;</span><br><span class="line">                        <span class="string">"app@2x"</span>: <span class="string">"可选，120x120，iOS7-11程序图标（iPhone4S/5/6/7/8）"</span>,</span><br><span class="line">                        <span class="string">"app@3x"</span>: <span class="string">"可选，180x180，iOS7-11程序图标（iPhone6plus/7plus/8plus/X）"</span>,</span><br><span class="line">                        <span class="string">"spotlight@2x"</span>: <span class="string">"可选，80x80，iOS7-11 Spotlight搜索图标（iPhone5/6/7/8）"</span>,</span><br><span class="line">                        <span class="string">"spotlight@3x"</span>: <span class="string">"可选，120x120，iOS7-11 Spotlight搜索图标（iPhone6plus/7plus/8plus/X）"</span>,</span><br><span class="line">                        <span class="string">"settings@2x"</span>: <span class="string">"可选，58x58，iOS5-11 Settings设置图标（iPhone5/6/7/8）"</span>,</span><br><span class="line">                        <span class="string">"settings@3x"</span>: <span class="string">"可选，87x87，iOS5-11 Settings设置图标（iPhone6plus/7plus/8plus/X）"</span>,</span><br><span class="line">                        <span class="string">"notification@2x"</span>: <span class="string">"可选，40x40，iOS7-11 通知栏图标（iPhone5/6/7/8）"</span>,</span><br><span class="line">                        <span class="string">"notification@3x"</span>: <span class="string">"可选，60x60，iOS7-11 通知栏图标（iPhone6plus/7plus/8plus/X）"</span></span><br><span class="line">                    &#125;,</span><br><span class="line">                    <span class="string">"ipad"</span>: &#123;</span><br><span class="line">                        <span class="string">"app"</span>: <span class="string">"可选，76x76，iOS7-11程序图标"</span>,</span><br><span class="line">                        <span class="string">"app@2x"</span>: <span class="string">"可选，152x152，iOS7-11程序图标（高分屏）"</span>,</span><br><span class="line">                        <span class="string">"proapp@2x"</span>: <span class="string">"可选，167x167，iOS9-11程序图标（iPad Pro）"</span>,</span><br><span class="line">                        <span class="string">"spotlight"</span>: <span class="string">"可选，40x40，iOS7-11 Spotlight搜索图标"</span>,</span><br><span class="line">                        <span class="string">"spotlight@2x"</span>: <span class="string">"可选，80x80，iOS7-11 Spotlight搜索图标（高分屏）"</span>,</span><br><span class="line">                        <span class="string">"settings"</span>: <span class="string">"可选，29x29，iOS5-11 设置图标"</span>,</span><br><span class="line">                        <span class="string">"settings@2x"</span>: <span class="string">"可选，58x58，iOS5-11 设置图标（高分屏）"</span>,</span><br><span class="line">                        <span class="string">"notification"</span>: <span class="string">"可选，20x20，iOS7-11 通知栏图标"</span>,</span><br><span class="line">                        <span class="string">"notification@2x"</span>: <span class="string">"可选，40x40，iOS7-11 通知栏图标（高分屏）"</span></span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;,</span><br><span class="line">                <span class="string">"android"</span>: &#123;</span><br><span class="line">                    <span class="string">"mdpi"</span>: <span class="string">"必选，48x48，普通屏程序图标"</span>,</span><br><span class="line">                    <span class="string">"ldpi"</span>: <span class="string">"必选，48x48，大屏程序图标"</span>,</span><br><span class="line">                    <span class="string">"hdpi"</span>: <span class="string">"必选，72x72，高分屏程序图标"</span>,</span><br><span class="line">                    <span class="string">"xhdpi"</span>: <span class="string">"必选，96x96，720P高分屏程序图标"</span>,</span><br><span class="line">                    <span class="string">"xxhdpi"</span>: <span class="string">"必选，144x144，1080P高分屏程序图标"</span>,</span><br><span class="line">                    <span class="string">"xxxhdpi"</span>: <span class="string">"可选，192x192"</span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;,</span><br><span class="line">            <span class="comment">// HBuilderX-&gt;manifest.json-&gt;启动图配置</span></span><br><span class="line">            <span class="string">"splashscreen"</span>: &#123;</span><br><span class="line">                <span class="string">"ios"</span>: &#123;</span><br><span class="line">                    <span class="string">"iphone"</span>: &#123;</span><br><span class="line">                        <span class="string">"retina35"</span>: <span class="string">"可选，640x960，3.5英寸设备(iPhone4)启动图片"</span>,</span><br><span class="line">                        <span class="string">"retina40"</span>: <span class="string">"可选，640x1136，4.0英寸设备(iPhone5)启动图片"</span>,</span><br><span class="line">                        <span class="string">"retina40l"</span>: <span class="string">"可选，1136x640，4.0英寸设备(iPhone5)横屏启动图片"</span>,</span><br><span class="line">                        <span class="string">"retina47"</span>: <span class="string">"可选，750x1334，4.7英寸设备（iPhone6）启动图片"</span>,</span><br><span class="line">                        <span class="string">"retina47l"</span>: <span class="string">"可选，1334x750，4.7英寸设备（iPhone6）横屏启动图片"</span>,</span><br><span class="line">                        <span class="string">"retina55"</span>: <span class="string">"可选，1242x2208，5.5英寸设备（iPhone6Plus）启动图片"</span>,</span><br><span class="line">                        <span class="string">"retina55l"</span>: <span class="string">"可选，2208x1242，5.5英寸设备（iPhone6Plus）横屏启动图片"</span>,</span><br><span class="line">                        <span class="string">"iphonex"</span>: <span class="string">"可选，1125x2436，iPhoneX启动图片"</span>,</span><br><span class="line">                        <span class="string">"iphonexl"</span>: <span class="string">"可选，2436x1125，iPhoneX横屏启动图片"</span></span><br><span class="line">                    &#125;,</span><br><span class="line">                    <span class="string">"ipad"</span>: &#123;</span><br><span class="line">                        <span class="string">"portrait"</span>: <span class="string">"可选，768x1004，需支持iPad时必选，iPad竖屏启动图片"</span>,</span><br><span class="line">                        <span class="string">"portrait-retina"</span>: <span class="string">"可选，1536x2008，需支持iPad时必选，iPad高分屏竖屏图片"</span>,</span><br><span class="line">                        <span class="string">"landscape"</span>: <span class="string">"可选，1024x748，需支持iPad时必选，iPad横屏启动图片"</span>,</span><br><span class="line">                        <span class="string">"landscape-retina"</span>: <span class="string">"可选，2048x1496，需支持iPad时必选，iPad高分屏横屏启动图片"</span>,</span><br><span class="line">                        <span class="string">"portrait7"</span>: <span class="string">"可选，768x1024，需支持iPad iOS7时必选，iPad竖屏启动图片"</span>,</span><br><span class="line">                        <span class="string">"portrait-retina7"</span>: <span class="string">"可选，1536x2048，需支持iPad iOS7时必选，iPad高分屏竖屏图片"</span>,</span><br><span class="line">                        <span class="string">"landscape7"</span>: <span class="string">"可选，1024x768，需支持iPad iOS7时必选，iPad横屏启动图片"</span>,</span><br><span class="line">                        <span class="string">"landscape-retina7"</span>: <span class="string">"可选，2048x1536，需支持iPad iOS7时必选，iPad高分屏横屏启动图片"</span></span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;,</span><br><span class="line">                <span class="string">"android"</span>: &#123;</span><br><span class="line">                    <span class="string">"mdpi"</span>: <span class="string">"必选，240x282，普通屏启动图片"</span>,</span><br><span class="line">                    <span class="string">"ldpi"</span>: <span class="string">"必选，320x442，大屏启动图片"</span>,</span><br><span class="line">                    <span class="string">"hdpi"</span>: <span class="string">"必选，480x762，高分屏启动图片"</span>,</span><br><span class="line">                    <span class="string">"xhdpi"</span>: <span class="string">"必选，720x1242，720P高分屏启动图片"</span>,</span><br><span class="line">                    <span class="string">"xxhdpi"</span>: <span class="string">"必选，1080x1882，1080P高分屏启动图片"</span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="comment">// HBuilderX-&gt;manifest.json-&gt;启动图配置-&gt;启动界面选项</span></span><br><span class="line">        <span class="string">"splashscreen"</span>: &#123;</span><br><span class="line">            <span class="string">"waiting"</span>: <span class="literal">true</span>,</span><br><span class="line">            <span class="string">"autoclose"</span>: <span class="literal">true</span>,</span><br><span class="line">            <span class="string">"delay"</span>: <span class="number">0</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="string">"error"</span>: &#123;</span><br><span class="line">            <span class="string">"url"</span>: <span class="string">"页面加载错误时打开的页面地址，可以是网络地址，也可以是本地地址"</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="string">"useragent"</span>: &#123;</span><br><span class="line">            <span class="string">"value"</span>: <span class="string">"自定义ua字符串"</span>,</span><br><span class="line">            <span class="string">"concatenate"</span>: <span class="string">"是否为追加模式"</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="string">"useragent_ios"</span>: &#123;</span><br><span class="line">            <span class="string">"value"</span>: <span class="string">"与useragent的value一致，仅在iOS平台生效，当useragent和useragent_ios同时存在时优先级useragent_ios&gt;useragent"</span>,</span><br><span class="line">            <span class="string">"concatenate"</span>: <span class="string">"与useragent的concatenate一致，仅iOS平台生效"</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="string">"useragent_android"</span>: &#123;</span><br><span class="line">            <span class="string">"value"</span>: <span class="string">"与useragent的value一致，仅在Android平台生效，当useragent和useragent_android同时存在时优先级useragent_android&gt;useragent"</span>,</span><br><span class="line">            <span class="string">"concatenate"</span>: <span class="string">"与useragent的concatenate一致，仅Android平台生效"</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="string">"ssl"</span>: <span class="string">"accept|refuse|warning，访问https网络时对非受信证书的处理逻辑"</span>,</span><br><span class="line">        <span class="string">"runmode"</span>: <span class="string">"normal"</span>,</span><br><span class="line">        <span class="string">"appWhitelist"</span>: [</span><br><span class="line">            <span class="string">"Android平台下载apk地址白名单列表"</span>,</span><br><span class="line">            <span class="string">"iOS平台跳转appstore地址白名单列表"</span></span><br><span class="line">        ],</span><br><span class="line">        <span class="string">"schemeWhitelist"</span>: [</span><br><span class="line">            <span class="string">"URL Scheme白名单列表，如：mqq"</span> <span class="comment">//iOS要求预先指定要打开的App名单，不能随意调用任何App</span></span><br><span class="line">        ],</span><br><span class="line">        <span class="string">"channel"</span>: <span class="string">"渠道标记，可在DCloud开发者中心查看各渠道应用的统计数据"</span>,</span><br><span class="line">        <span class="string">"adid"</span>: <span class="string">"广告联盟会员id，在DCloud开发者中心申请后填写"</span>,</span><br><span class="line">        <span class="string">"safearea"</span>: &#123; <span class="comment">//安全区域配置，仅iOS平台生效</span></span><br><span class="line">            <span class="string">"background"</span>: <span class="string">"#CCCCCC"</span>, <span class="comment">//安全区域外的背景颜色，默认值为"#FFFFFF"</span></span><br><span class="line">            <span class="string">"bottom"</span>: &#123; <span class="comment">// 底部安全区域配置</span></span><br><span class="line">                <span class="string">"offset"</span>: <span class="string">"none|auto"</span> <span class="comment">// 底部安全区域偏移，"none"表示不空出安全区域，"auto"自动计算空出安全区域，默认值为"none"</span></span><br><span class="line">            &#125;,</span><br><span class="line">            <span class="string">"left"</span>: &#123; <span class="comment">//左侧安全区域配置（横屏显示时有效）</span></span><br><span class="line">                <span class="string">"offset"</span>: <span class="string">"none|auto"</span></span><br><span class="line">            &#125;,</span><br><span class="line">            <span class="string">"right"</span>: &#123; <span class="comment">//右侧安全区域配置（横屏显示时有效）</span></span><br><span class="line">                <span class="string">"offset"</span>: <span class="string">"none|auto"</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="string">"softinput"</span>: &#123;</span><br><span class="line">            <span class="string">"navBar"</span>: <span class="string">"auto"</span>, <span class="comment">//是否显示iOS软键盘上的“完成”导航条</span></span><br><span class="line">            <span class="string">"mode"</span>: <span class="string">"adjustResize|adjustPan"</span> <span class="comment">//软键盘弹出模式，</span></span><br><span class="line">        &#125;,</span><br><span class="line">    <span class="string">"popGesture"</span>: <span class="string">"none"</span> <span class="comment">//iOS上是否支持屏幕左边滑动关闭当前页面。默认是可关闭。设为none则不响应左滑动画。</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// 快应用特有配置</span></span><br><span class="line">    <span class="string">"quickapp"</span>: &#123;&#125;,</span><br><span class="line">    <span class="comment">// 微信小程序特有配置</span></span><br><span class="line">    <span class="string">"mp-weixin"</span>: &#123;</span><br><span class="line">        <span class="string">"appid"</span>: <span class="string">"wx开头的微信小程序appid"</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// 百度小程序特有配置</span></span><br><span class="line">    <span class="string">"mp-baidu"</span>: &#123;</span><br><span class="line">        <span class="string">"appid"</span>: <span class="string">"百度小程序appid"</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// 头条小程序特有配置</span></span><br><span class="line">    <span class="string">"mp-toutiao"</span>: &#123;</span><br><span class="line">        <span class="string">"appid"</span>: <span class="string">"头条小程序appid"</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="string">"h5"</span>: &#123;</span><br><span class="line">        <span class="string">"title"</span>: <span class="string">"演示"</span>, <span class="comment">//页面标题，默认使用 manifest.json 的 name</span></span><br><span class="line">        <span class="string">"template"</span>: <span class="string">"index.html"</span>, <span class="comment">//index.html模板路径，相对于应用根目录，可定制生成的 html 代码</span></span><br><span class="line">        <span class="string">"router"</span>: &#123;</span><br><span class="line">            <span class="string">"mode"</span>: <span class="string">"history"</span>, <span class="comment">//路由跳转模式，支持 hash|history ,默认 hash</span></span><br><span class="line">            <span class="string">"base"</span>: <span class="string">"/hello/"</span> <span class="comment">//应用基础路径，例如，如果整个单页应用服务在 /app/ 下，然后 base 就应该设为 "/app/"</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="string">"async"</span>: &#123; <span class="comment">//页面js异步加载配置</span></span><br><span class="line">            <span class="string">"loading"</span>: <span class="string">"AsyncLoading"</span>, <span class="comment">//页面js加载时使用的组件（需注册为全局组件）</span></span><br><span class="line">            <span class="string">"error"</span>: <span class="string">"AsyncError"</span>, <span class="comment">//页面js加载失败时使用的组件（需注册为全局组件）</span></span><br><span class="line">            <span class="string">"delay"</span>: <span class="number">200</span>, <span class="comment">//展示 loading 加载组件的延时时间（页面 js 若在 delay 时间内加载完成，则不会显示 loading 组件）</span></span><br><span class="line">            <span class="string">"timeout"</span>: <span class="number">3000</span> <span class="comment">//页面js加载超时时间（超时后展示 error 对应的组件）</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;code&gt;manifest.json&lt;/code&gt; 是应用的配置文件，用于指定应用的名称、图标、权限等&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th style=&quot;text-align:center&quot;&gt;属性&lt;/th&gt;
&lt;th style=&quot;text-align
      
    
    </summary>
    
      <category term="notes" scheme="https://owen027.github.io/categories/notes/"/>
    
    
      <category term="uniappManifest" scheme="https://owen027.github.io/tags/uniappManifest/"/>
    
  </entry>
  
  <entry>
    <title>uniapp的路由配置</title>
    <link href="https://owen027.github.io/2019/12/25/uniappPagesConfigs/"/>
    <id>https://owen027.github.io/2019/12/25/uniappPagesConfigs/</id>
    <published>2019-12-25T06:36:18.000Z</published>
    <updated>2019-12-29T09:41:24.790Z</updated>
    
    <content type="html"><![CDATA[<p><code>uniapp</code>通过根目录中的<code>pages.json</code>文件决定页面文件的路径、窗口样式、原生导航栏、底部原生tarBar等</p><h2 id="配置项列表"><a href="#配置项列表" class="headerlink" title="配置项列表"></a>配置项列表</h2><table><thead><tr><th style="text-align:center">属性</th><th style="text-align:center">值类型</th><th style="text-align:center">是否必选</th><th style="text-align:center">描述</th><th style="text-align:center">兼容</th></tr></thead><tbody><tr><td style="text-align:center"><a href="https://uniapp.dcloud.io/collocation/pages?id=globalstyle">globalStyle</a></td><td style="text-align:center">Object</td><td style="text-align:center">否</td><td style="text-align:center">设置默认页面的窗口表现,可设置应用的状态栏、导航条、标题、窗口背景色等。</td></tr><tr><td style="text-align:center"><a href="https://uniapp.dcloud.io/collocation/pages?id=pages">pages</a></td><td style="text-align:center">Object,Array</td><td style="text-align:center">是</td><td style="text-align:center">设置页面的路径及窗口表现</td></tr><tr><td style="text-align:center"><a href="https://uniapp.dcloud.io/collocation/pages?id=easycom">easycom</a></td><td style="text-align:center">Object</td><td style="text-align:center">否</td><td style="text-align:center">组件自动引入规则</td><td style="text-align:center">2.5.0+</td></tr><tr><td style="text-align:center"><a href="https://uniapp.dcloud.io/collocation/pages?id=tabBar">tabBar</a></td><td style="text-align:center">Object</td><td style="text-align:center">否</td><td style="text-align:center">设置底部tab的表现</td></tr><tr><td style="text-align:center"><a href="https://uniapp.dcloud.io/collocation/pages?id=condition">condition</a></td><td style="text-align:center">Object</td><td style="text-align:center">否</td><td style="text-align:center">启动模式配置</td></tr><tr><td style="text-align:center"><a href="https://uniapp.dcloud.io/collocation/pages?id=subPackages">subPackages</a></td><td style="text-align:center">Object,Array</td><td style="text-align:center">否</td><td style="text-align:center">分包加载配置</td></tr><tr><td style="text-align:center"><a href="https://uniapp.dcloud.io/collocation/pages?id=preloadRule">preloadRule</a></td><td style="text-align:center">Object</td><td style="text-align:center">否</td><td style="text-align:center">分包预下载规则</td><td style="text-align:center">微信小程序</td></tr><tr><td style="text-align:center"><a href="https://uniapp.dcloud.io/collocation/pages?id=workers">workers</a></td><td style="text-align:center">Scring</td><td style="text-align:center">否</td><td style="text-align:center">Worker 代码放置目录</td><td style="text-align:center">微信小程序</td></tr></tbody></table><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="string">"pages"</span>: [&#123; <span class="comment">// pages节点的第一项为应用入口页（即首页）,应用中新增/减少页面，都需要对 pages 数组进行修改,文件名不需要写后缀，框架会自动寻找路径下的页面资源</span></span><br><span class="line">        <span class="string">"path"</span>: <span class="string">"pages/component/index"</span>, <span class="comment">// 配置页面路径</span></span><br><span class="line">        <span class="string">"style"</span>: &#123; <span class="comment">// 配置页面窗口表现,用于设置对应页面的状态栏、导航条、标题、窗口背景色等。 其配置项与 globalStyle 一致，此配置会覆盖 globalStyle</span></span><br><span class="line">            <span class="string">"disableScroll"</span>: <span class="literal">false</span>,<span class="comment">//禁用滚动 全局中无此设置 //仅支持微信小程序（iOS）、百度小程序（iOS）</span></span><br><span class="line">            <span class="string">"navigationBarShadow"</span>:&#123;</span><br><span class="line">                <span class="comment">//导航栏阴影</span></span><br><span class="line">                <span class="string">"colorType"</span>:<span class="string">"grey"</span> <span class="comment">// 支持颜色：grey、blue、green、orange、red、yellow</span></span><br><span class="line">            &#125;,</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;, &#123;</span><br><span class="line">        <span class="string">"path"</span>: <span class="string">"pages/API/index"</span>,</span><br><span class="line">        <span class="string">"style"</span>: &#123;</span><br><span class="line">            <span class="string">"navigationBarTitleText"</span>: <span class="string">"接口"</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;, &#123;</span><br><span class="line">        <span class="string">"path"</span>: <span class="string">"pages/component/view/index"</span>,</span><br><span class="line">        <span class="string">"style"</span>: &#123;</span><br><span class="line">            <span class="string">"navigationBarTitleText"</span>: <span class="string">"view"</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;],</span><br><span class="line">    <span class="string">"condition"</span>: &#123; <span class="comment">//模式配置，仅开发期间生效</span></span><br><span class="line">        <span class="string">"current"</span>: <span class="number">0</span>, <span class="comment">//当前激活的模式（list 的索引项）</span></span><br><span class="line">        <span class="string">"list"</span>: [&#123;</span><br><span class="line">            <span class="string">"name"</span>: <span class="string">"test"</span>, <span class="comment">//模式名称</span></span><br><span class="line">            <span class="string">"path"</span>: <span class="string">"pages/component/view/index"</span> <span class="comment">//启动页面，必选</span></span><br><span class="line">        &#125;]</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="string">"globalStyle"</span>: &#123;</span><br><span class="line">        <span class="string">"navigationBarTextStyle"</span>: <span class="string">"black"</span>, <span class="comment">// 导航栏标题颜色及状态栏前景颜色，仅支持 black/white</span></span><br><span class="line"></span><br><span class="line">        <span class="string">"navigationBarTitleText"</span>: <span class="string">"演示"</span>, <span class="comment">// 导航栏标题文字内容</span></span><br><span class="line"></span><br><span class="line">        <span class="string">"navigationBarBackgroundColor"</span>: <span class="string">"#F8F8F8"</span>, <span class="comment">// 导航栏背景色</span></span><br><span class="line"></span><br><span class="line">        <span class="string">"backgroundColor"</span>: <span class="string">"#F8F8F8"</span>,</span><br><span class="line"></span><br><span class="line">        <span class="string">"navigationStyle"</span>:<span class="string">"default"</span>, <span class="comment">// 导航栏样式，仅支持 default/custom。custom即取消默认的原生导航栏 //仅支持 微信小程序 7.0+、百度小程序、H5、App（2.0.3+）</span></span><br><span class="line"></span><br><span class="line">        <span class="string">"backgroundColor"</span>:<span class="string">"#ffffff"</span>, <span class="comment">//窗口背景色 //仅支持微信小程序</span></span><br><span class="line"></span><br><span class="line">        <span class="string">"backgroundTextStyle"</span>:<span class="string">"dark"</span>, <span class="comment">// 下拉loading样式，仅支持dark/light //仅支持微信小程序</span></span><br><span class="line"></span><br><span class="line">        <span class="string">"enablePullDownRefresh"</span>:<span class="literal">false</span>,<span class="comment">// 是否开启下拉刷新</span></span><br><span class="line"></span><br><span class="line">        <span class="string">"onReachBottomDistance"</span>:<span class="number">50</span>,<span class="comment">// 上拉触底事件触发时距离页面底部距离，单位仅支持px</span></span><br><span class="line"></span><br><span class="line">        <span class="string">"backgroundColorTop"</span>:<span class="string">"#ffffff"</span>,<span class="comment">// 顶部窗口的背景色（bounce回弹区域）//仅支持iOS</span></span><br><span class="line"></span><br><span class="line">        <span class="string">"backgroundColorBottom"</span>:<span class="string">"#ffffff"</span>,<span class="comment">// 底部部窗口的背景色（bounce回弹区域）//仅支持iOS</span></span><br><span class="line"></span><br><span class="line">        <span class="string">"titleImage"</span>:<span class="string">""</span>, <span class="comment">// 导航栏图片地址（替换当前文字标题），支付宝小程序内必须使用https的图片链接地址 //仅支持支付宝小程序、H5、APP</span></span><br><span class="line"></span><br><span class="line">        <span class="string">"transparentTitle"</span>:<span class="string">"none"</span>, <span class="comment">// 导航栏透明设置。支持 always 一直透明 / auto 滑动自适应 / none 不透明//仅支持支付宝小程序、H5、APP</span></span><br><span class="line"></span><br><span class="line">        <span class="string">"titlePenetrate"</span>:<span class="string">"NO"</span>,<span class="comment">// 导航栏点击穿透</span></span><br><span class="line"></span><br><span class="line">        <span class="string">"pageOrientation"</span>:<span class="string">"portrait"</span>, <span class="comment">// 横屏配置，屏幕旋转设置，仅支持 auto/portrait/landscape // 仅支持App 2.4.7+、微信小程序</span></span><br><span class="line"></span><br><span class="line">        <span class="string">"animationType"</span>:<span class="string">"pop-in"</span>, <span class="comment">// 窗口显示的动画效果 // 仅支持App</span></span><br><span class="line"></span><br><span class="line">        <span class="string">"animationDuration"</span>:<span class="number">300</span>, <span class="comment">// 窗口动画的持续时间 // 仅支持App</span></span><br><span class="line"></span><br><span class="line">        <span class="string">"app-plus"</span>:&#123;<span class="comment">//编译到APP 平台的特定样式 详情见uniapp官网 https://uniapp.dcloud.io/collocation/pages?id=app-plus // 仅支持App</span></span><br><span class="line">        &#125;,</span><br><span class="line"></span><br><span class="line">        <span class="string">"h5"</span>:&#123;<span class="comment">//编译到h5 平台的特定样式 // 仅支持h5</span></span><br><span class="line">        &#125;,</span><br><span class="line"></span><br><span class="line">        <span class="string">"mp-alipay"</span>:&#123;<span class="comment">//编译到mp-alipay 平台的特定样式 // 仅支持mp-alipay 支付包</span></span><br><span class="line">        &#125;,</span><br><span class="line"></span><br><span class="line">        <span class="string">"mp-weixin"</span>:&#123;<span class="comment">//编译到mp-weixin平台的特定样式 // 仅支持微信小程序</span></span><br><span class="line">        &#125;,</span><br><span class="line"></span><br><span class="line">        <span class="string">"mp-baidu"</span>:&#123;<span class="comment">//编译到"mp-baidu 平台的特定样式 // 仅支持百度小程序</span></span><br><span class="line">        &#125;,</span><br><span class="line"></span><br><span class="line">        <span class="string">"mp-toutiao"</span>:&#123;<span class="comment">//编译到mp-toutiao 平台的特定样式 // 仅支持字节跳动小程序</span></span><br><span class="line">        &#125;,</span><br><span class="line"></span><br><span class="line">        <span class="string">"mp-qq"</span>:&#123;<span class="comment">//编译到mp-qq 平台的特定样式 // 仅支持QQ小程序</span></span><br><span class="line">        &#125;,</span><br><span class="line"></span><br><span class="line">        <span class="string">"usingComponents"</span>:&#123; <span class="comment">// 引用小程序组件</span></span><br><span class="line">            <span class="string">"collapse-tree-item"</span>:<span class="string">"/components/collapse-tree-item"</span></span><br><span class="line">        &#125;,</span><br><span class="line">    <span class="string">"pageOrientation"</span>: <span class="string">"portrait"</span><span class="comment">//横屏配置，全局屏幕旋转设置(仅 APP/微信/QQ小程序)，支持 auto / portrait / landscape</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="string">"tabBar"</span>: &#123;</span><br><span class="line">        <span class="string">"color"</span>: <span class="string">"#7A7E83"</span>,</span><br><span class="line">        <span class="string">"selectedColor"</span>: <span class="string">"#3cc51f"</span>,</span><br><span class="line">        <span class="string">"borderStyle"</span>: <span class="string">"black"</span>,</span><br><span class="line">        <span class="string">"backgroundColor"</span>: <span class="string">"#ffffff"</span>,</span><br><span class="line">        <span class="string">"height"</span>: <span class="string">"50px"</span>,</span><br><span class="line">        <span class="string">"fontSize"</span>: <span class="string">"10px"</span>,</span><br><span class="line">        <span class="string">"iconWidth"</span>: <span class="string">"24px"</span>,</span><br><span class="line">        <span class="string">"spacing"</span>: <span class="string">"3px"</span>,</span><br><span class="line">        <span class="string">"list"</span>: [&#123;</span><br><span class="line">            <span class="string">"pagePath"</span>: <span class="string">"pages/component/index"</span>,</span><br><span class="line">            <span class="string">"iconPath"</span>: <span class="string">"static/image/icon_component.png"</span>,</span><br><span class="line">            <span class="string">"selectedIconPath"</span>: <span class="string">"static/image/icon_component_HL.png"</span>,</span><br><span class="line">            <span class="string">"text"</span>: <span class="string">"组件"</span></span><br><span class="line">        &#125;, &#123;</span><br><span class="line">            <span class="string">"pagePath"</span>: <span class="string">"pages/API/index"</span>,</span><br><span class="line">            <span class="string">"iconPath"</span>: <span class="string">"static/image/icon_API.png"</span>,</span><br><span class="line">            <span class="string">"selectedIconPath"</span>: <span class="string">"static/image/icon_API_HL.png"</span>,</span><br><span class="line">            <span class="string">"text"</span>: <span class="string">"接口"</span></span><br><span class="line">        &#125;],</span><br><span class="line">        <span class="string">"midButton"</span>: &#123;</span><br><span class="line">            <span class="string">"width"</span>: <span class="string">"80px"</span>,</span><br><span class="line">            <span class="string">"height"</span>: <span class="string">"50px"</span>,</span><br><span class="line">            <span class="string">"text"</span>: <span class="string">"文字"</span>,</span><br><span class="line">            <span class="string">"iconPath"</span>: <span class="string">"static/image/midButton_iconPath.png"</span>,</span><br><span class="line">            <span class="string">"iconWidth"</span>: <span class="string">"24px"</span>,</span><br><span class="line">            <span class="string">"backgroundImage"</span>: <span class="string">"static/image/midButton_backgroundImage.png"</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">  <span class="string">"easycom"</span>: &#123;</span><br><span class="line">    <span class="string">"uni-(.*)"</span>: <span class="string">"@/components/uni-$1/uni-$1.vue"</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="自定义导航栏使用注意事项"><a href="#自定义导航栏使用注意事项" class="headerlink" title="自定义导航栏使用注意事项"></a>自定义导航栏使用注意事项</h3><p>当 <code>navigationStyle&quot;:custom</code>或<code>titleNView:false</code>时，原生导航栏不显示同时需注意：</p><ul><li>非H5段，手机顶部状态栏区域会被页面内容覆盖。<code>uniapp</code>提供状态栏css变量，可使用view占用其位置</li><li>如果原生导航不满足要求，可使用自定义导航栏 <a href="https://ext.dcloud.net.cn/plugin?id=52">NavBar</a></li><li>导航栏搭配原生下拉刷新问题：微信小程序ios端需要拉更长才能看到下来刷新，Android则从屏幕底部下拉，无法从状态栏下拉，如需，请前端模拟， <a href="https://ext.dcloud.net.cn/plugin?id=343">推荐插件</a></li><li>非H5段，前端导航盖不住原生组件，如页面有viedo,map等原生组件，滚动时会覆盖导航栏，小程序可使用<code>cover-view</code>来解决，APP可使用titleNView 或subNVue</li><li>前端组件渲染不如原生导航，原生导航可保证动画期间不白屏</li><li>页面禁用原生导航后想，改变状态栏前景字体，可设置<code>navigationBarTextStyle</code>,部分低端手机不支持</li></ul><p>鉴于以上问题，原生导航等满足业务需求，使用原生导航，甚至可牺牲一些不重要的需求。<a href="https://ask.dcloud.net.cn/article/34921">更多详情</a></p><h3 id="easycom-配置说明"><a href="#easycom-配置说明" class="headerlink" title="easycom 配置说明"></a>easycom 配置说明</h3><ul><li>通过正则匹配来自动引入组件</li><li>此方式引入的组件无需在页面内<code>import</code>,也无需在<code>components</code>中声明，即可在页面中使用</li><li>组件名完全一致的情况下，优先级低于手动</li><li>修改easycom 不会重新编译，须手动改动页面触发</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">"easycom"</span>: &#123;</span><br><span class="line">  <span class="string">"uni-(.*)"</span>: <span class="string">"@/components/uni-$1/uni-$1.vue"</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="tabBar-配置说明"><a href="#tabBar-配置说明" class="headerlink" title="tabBar 配置说明"></a>tabBar 配置说明</h3><ul><li>position为top时 不显示ICON, top值仅支持微信小程序</li><li>tabBar中list是数组最少配置2个，最多5个tab,按数组顺序排列</li><li>切换第一次加载时可能渲染不及时，可在每个Tabbar页面的onLoad生命周期中先弹出一个loading</li><li>页面出现过后，保存在内存中，切换tabbar,之后触发onShow,不在触发onLoad</li></ul><table><thead><tr><th style="text-align:center">属性</th><th style="text-align:center">是否必选</th><th style="text-align:center">值类型</th><th style="text-align:center">默认值</th><th style="text-align:center">描述</th><th style="text-align:center">平台差异</th></tr></thead><tbody><tr><td style="text-align:center">color</td><td style="text-align:center">是</td><td style="text-align:center">HexColor</td><td style="text-align:center"></td><td style="text-align:center">tab字体默认颜色</td><td style="text-align:center"></td></tr><tr><td style="text-align:center">selectedColor</td><td style="text-align:center">是</td><td style="text-align:center">HexColor</td><td style="text-align:center"></td><td style="text-align:center">选中颜色</td><td style="text-align:center"></td></tr><tr><td style="text-align:center">backgroundColor</td><td style="text-align:center">是</td><td style="text-align:center">HexColor</td><td style="text-align:center"></td><td style="text-align:center">背景色</td><td style="text-align:center"></td></tr><tr><td style="text-align:center">borderStyle</td><td style="text-align:center">否</td><td style="text-align:center">String</td><td style="text-align:center">black</td><td style="text-align:center">边框颜色仅支持black/white</td><td style="text-align:center">App最新版支持其它颜色</td></tr><tr><td style="text-align:center">list</td><td style="text-align:center">是</td><td style="text-align:center">Array</td><td style="text-align:center"></td><td style="text-align:center">tab列表最少2，最多5</td><td style="text-align:center"></td></tr><tr><td style="text-align:center">position</td><td style="text-align:center">否</td><td style="text-align:center">String</td><td style="text-align:center">bottom</td><td style="text-align:center">位置 bottom\top</td><td style="text-align:center">仅微信支持top</td></tr><tr><td style="text-align:center">fontSize</td><td style="text-align:center">否</td><td style="text-align:center">String</td><td style="text-align:center">10px</td><td style="text-align:center">字体大小</td><td style="text-align:center">App2.3.4+</td></tr><tr><td style="text-align:center">iconWidth</td><td style="text-align:center">否</td><td style="text-align:center">String</td><td style="text-align:center">24px</td><td style="text-align:center">icon默认宽度</td><td style="text-align:center">App2.3.4+</td></tr><tr><td style="text-align:center">spacing</td><td style="text-align:center">否</td><td style="text-align:center">String</td><td style="text-align:center">3px</td><td style="text-align:center">图标与文字间间距</td><td style="text-align:center">App2.3.4+</td></tr><tr><td style="text-align:center">height</td><td style="text-align:center">否</td><td style="text-align:center">String</td><td style="text-align:center">50px</td><td style="text-align:center">默认高度</td><td style="text-align:center">App2.3.4+</td></tr><tr><td style="text-align:center">mindButton</td><td style="text-align:center">否</td><td style="text-align:center">Object</td><td style="text-align:center"></td><td style="text-align:center">中间按钮仅在list为偶数时生效</td><td style="text-align:center">App2.3.4+</td></tr></tbody></table><h4 id="list-属性说明"><a href="#list-属性说明" class="headerlink" title="list 属性说明"></a>list 属性说明</h4><p>list数组中的子项都为对象，其属性为：</p><table><thead><tr><th style="text-align:center">属性</th><th style="text-align:center">值类型</th><th style="text-align:center">是否必选</th><th style="text-align:center">说明</th></tr></thead><tbody><tr><td style="text-align:center">pagePath</td><td style="text-align:center">String</td><td style="text-align:center">是</td><td style="text-align:center">页面路径，须在pages中选定义</td></tr><tr><td style="text-align:center">text</td><td style="text-align:center">String</td><td style="text-align:center">是</td><td style="text-align:center">tab是按钮文字，H5、5+APP平台非必填</td></tr><tr><td style="text-align:center">iconPath</td><td style="text-align:center">String</td><td style="text-align:center">否</td><td style="text-align:center">图片路径，大小40kB,尺寸81*81，只支持静态图片，不支持字体图</td></tr><tr><td style="text-align:center">selectedIconPath</td><td style="text-align:center">String</td><td style="text-align:center">否</td><td style="text-align:center">选中时的图片</td></tr></tbody></table><h4 id="midButton"><a href="#midButton" class="headerlink" title="midButton"></a>midButton</h4><table><thead><tr><th style="text-align:center">属性</th><th style="text-align:center">值类型</th><th style="text-align:center">是否必选</th><th style="text-align:center">默认值</th><th style="text-align:center">说明</th></tr></thead><tbody><tr><td style="text-align:center">width</td><td style="text-align:center">String</td><td style="text-align:center">否</td><td style="text-align:center">中间按钮的宽度，tabBar中其它项为减去此宽度后平分，默认值为与其它项平分</td></tr><tr><td style="text-align:center">height</td><td style="text-align:center">String</td><td style="text-align:center">否</td><td style="text-align:center">中间按钮的高度</td></tr><tr><td style="text-align:center">text</td><td style="text-align:center">String</td><td style="text-align:center">否</td><td style="text-align:center">中间按钮的文字</td></tr><tr><td style="text-align:center">iconPath</td><td style="text-align:center">String</td><td style="text-align:center">否</td><td style="text-align:center">中间按钮的图片路径</td></tr><tr><td style="text-align:center">iconWidth</td><td style="text-align:center">String</td><td style="text-align:center">否</td><td style="text-align:center">图片宽度</td></tr><tr><td style="text-align:center">backgroundImage</td><td style="text-align:center">String</td><td style="text-align:center">否</td><td style="text-align:center">背景图</td></tr></tbody></table><p>mindButton 没有pagePath,需监听点击事件，自行处理点击后的逻辑，监听事件：<code>uni.onTabBarMidBottonTap</code><a href="https://uniapp.dcloud.io/api/ui/tabbar?id=ontabbarmidbuttontap">详情</a>，此事件仅支持 App</p><h4 id="tabBar常见问题-详情"><a href="#tabBar常见问题-详情" class="headerlink" title="tabBar常见问题 详情"></a>tabBar常见问题 <a href="tabbar常见问题">详情</a></h4><ul><li>tabBar在各个平台的默认高度不一，App在HBuilderX 2.3.4起从56px调整为50px,</li><li>通过<code>JS API</code>实现动态修改<a href="https://uniapp.dcloud.io/api/ui/tabbar">tabBar</a></li><li>JS代码跳转至tabBar页面，API 只能使用<code>uni.switchTab</code>,不能使用<code>uni.navigateTo</code>、<code>uni,rediretTo</code>,使用 <code>navigator</code>组件跳转时须设置属性<code>open-type=&quot;switchTab&quot;</code></li><li>原生tabBar有且只有一个在首页，二级页如需Tab,须自行实现</li><li><p>如需先登录，后进入tab页面，无须将登录页设为首页，可参考HBuilderX新建项目时的登录模板</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">"tabBar"</span>: &#123;</span><br><span class="line">    <span class="string">"color"</span>: <span class="string">"#7A7E83"</span>,</span><br><span class="line">    <span class="string">"selectedColor"</span>: <span class="string">"#3cc51f"</span>,</span><br><span class="line">    <span class="string">"borderStyle"</span>: <span class="string">"black"</span>,</span><br><span class="line">    <span class="string">"backgroundColor"</span>: <span class="string">"#ffffff"</span>,</span><br><span class="line">    <span class="string">"list"</span>: [&#123;</span><br><span class="line">        <span class="string">"pagePath"</span>: <span class="string">"pages/component/index"</span>,</span><br><span class="line">        <span class="string">"iconPath"</span>: <span class="string">"static/image/icon_component.png"</span>,</span><br><span class="line">        <span class="string">"selectedIconPath"</span>: <span class="string">"static/image/icon_component_HL.png"</span>,</span><br><span class="line">        <span class="string">"text"</span>: <span class="string">"组件"</span></span><br><span class="line">    &#125;, &#123;</span><br><span class="line">        <span class="string">"pagePath"</span>: <span class="string">"pages/API/index"</span>,</span><br><span class="line">        <span class="string">"iconPath"</span>: <span class="string">"static/image/icon_API.png"</span>,</span><br><span class="line">        <span class="string">"selectedIconPath"</span>: <span class="string">"static/image/icon_API_HL.png"</span>,</span><br><span class="line">        <span class="string">"text"</span>: <span class="string">"接口"</span></span><br><span class="line">    &#125;]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><h3 id="condition"><a href="#condition" class="headerlink" title="condition"></a>condition</h3><p>启动模式配置，仅开放环境有效，模拟直达页面的场景，（如：小程序转发后，用户点击所打开的页面）</p><table><thead><tr><th style="text-align:center">属性</th><th style="text-align:center">值类型</th><th style="text-align:center">是否必选</th><th style="text-align:center">描述</th></tr></thead><tbody><tr><td style="text-align:center">current</td><td style="text-align:center">Number</td><td style="text-align:center">是</td><td style="text-align:center">当前激活的模式，list节点的索引值</td></tr><tr><td style="text-align:center">list</td><td style="text-align:center">Array</td><td style="text-align:center">是</td><td style="text-align:center">启动模式列表</td></tr></tbody></table><h4 id="list"><a href="#list" class="headerlink" title="list"></a>list</h4><table><thead><tr><th style="text-align:center">属性</th><th style="text-align:center">值类型</th><th style="text-align:center">是否必选</th><th style="text-align:center">描述</th></tr></thead><tbody><tr><td style="text-align:center">name</td><td style="text-align:center">String</td><td style="text-align:center">是</td><td style="text-align:center">启动模式名</td></tr><tr><td style="text-align:center">path</td><td style="text-align:center">String</td><td style="text-align:center">是</td><td style="text-align:center">启动页面路径</td></tr><tr><td style="text-align:center">query</td><td style="text-align:center">String</td><td style="text-align:center">否</td><td style="text-align:center">启动参数，可在onLoad中获取</td></tr></tbody></table><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">"condition"</span>: &#123; <span class="comment">//模式配置，仅开发期间生效</span></span><br><span class="line">    <span class="string">"current"</span>: <span class="number">0</span>, <span class="comment">//当前激活的模式（list 的索引项）</span></span><br><span class="line">    <span class="string">"list"</span>: [&#123;</span><br><span class="line">            <span class="string">"name"</span>: <span class="string">"swiper"</span>, <span class="comment">//模式名称</span></span><br><span class="line">            <span class="string">"path"</span>: <span class="string">"pages/component/swiper/swiper"</span>, <span class="comment">//启动页面，必选</span></span><br><span class="line">            <span class="string">"query"</span>: <span class="string">"interval=4000&amp;autoplay=false"</span> <span class="comment">//启动参数，在页面的onLoad函数里面得到。</span></span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="string">"name"</span>: <span class="string">"test"</span>,</span><br><span class="line">            <span class="string">"path"</span>: <span class="string">"pages/component/switch/switch"</span></span><br><span class="line">        &#125;</span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="subPackages"><a href="#subPackages" class="headerlink" title="subPackages"></a>subPackages</h3><p>分包加载配置<strong>此配置为小程序的分包加载机制</strong></p><ul><li>微信、百度每个分包大概2M，总共不能超过8M</li><li>支付宝每个分包大概2M，不能超过4M</li><li><strong>subPackages 的pages路径为 <code>root</code>下的相对路径</strong></li><li><a href="https://uniapp.dcloud.io/collocation/manifest?id=%e5%85%b3%e4%ba%8e%e5%88%86%e5%8c%85%e4%bc%98%e5%8c%96%e7%9a%84%e8%af%b4%e6%98%8e">分包优化详情</a></li><li>对于<code>vendor.js</code>过大情况可使用运行是压缩代码：HBuilderX创建的项目勾选 运行-&gt;运行到小程序模拟器-&gt;运行时是否压缩代码；cli项目可在 <code>packge.json</code>中添加参数 <code>--minimize</code></li></ul><table><thead><tr><th style="text-align:center">属性</th><th style="text-align:center">值类型</th><th style="text-align:center">是否必选</th><th style="text-align:center">描述</th></tr></thead><tbody><tr><td style="text-align:center">root</td><td style="text-align:center">String</td><td style="text-align:center">是</td><td style="text-align:center">子包根目录</td></tr><tr><td style="text-align:center">pages</td><td style="text-align:center">Array</td><td style="text-align:center">是</td><td style="text-align:center">子包由哪些页面组成参数同 <code>pages</code></td></tr></tbody></table><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="string">"pages"</span>: [&#123;</span><br><span class="line">        <span class="string">"path"</span>: <span class="string">"pages/index/index"</span>,</span><br><span class="line">        <span class="string">"style"</span>: &#123; ...&#125;</span><br><span class="line">        &#125;, &#123;</span><br><span class="line">        <span class="string">"path"</span>: <span class="string">"pages/login/login"</span>,</span><br><span class="line">        <span class="string">"style"</span>: &#123; ...&#125;</span><br><span class="line">        &#125;</span><br><span class="line">    ],</span><br><span class="line">    <span class="string">"subPackages"</span>: [&#123;</span><br><span class="line">        <span class="string">"root"</span>: <span class="string">"pagesA"</span>,</span><br><span class="line">        <span class="string">"pages"</span>: [&#123;</span><br><span class="line">            <span class="string">"path"</span>: <span class="string">"list/list"</span>,</span><br><span class="line">            <span class="string">"style"</span>: &#123; ...&#125;</span><br><span class="line">            &#125;]</span><br><span class="line">        &#125;,</span><br><span class="line"></span><br><span class="line">        &#123;</span><br><span class="line">        <span class="string">"root"</span>: <span class="string">"pagesB"</span>,</span><br><span class="line">        <span class="string">"pages"</span>: [&#123;</span><br><span class="line">            <span class="string">"path"</span>: <span class="string">"detail/detail"</span>,</span><br><span class="line">            <span class="string">"style"</span>: &#123; ...&#125;</span><br><span class="line">            &#125;]</span><br><span class="line">        &#125;</span><br><span class="line">    ],</span><br><span class="line">    <span class="string">"preloadRule"</span>: &#123;</span><br><span class="line">        <span class="string">"pagesA/list/list"</span>: &#123;</span><br><span class="line">            <span class="string">"network"</span>: <span class="string">"all"</span>,</span><br><span class="line">            <span class="string">"packages"</span>: [<span class="string">"__APP__"</span>]</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="string">"pagesB/detail/detail"</span>: &#123;</span><br><span class="line">            <span class="string">"network"</span>: <span class="string">"all"</span>,</span><br><span class="line">            <span class="string">"packages"</span>: [<span class="string">"pagesA"</span>]</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="preloadRule"><a href="#preloadRule" class="headerlink" title="preloadRule"></a>preloadRule</h3><p>分包预加载配置。</p><table><thead><tr><th style="text-align:center">属性</th><th style="text-align:center">值类型</th><th style="text-align:center">是否必选</th><th style="text-align:center">描述</th></tr></thead><tbody><tr><td style="text-align:center">packages</td><td style="text-align:center">Array<string></string></td><td style="text-align:center">是</td><td style="text-align:center">进入页面后预下载分包的root或name</td></tr><tr><td style="text-align:center">network</td><td style="text-align:center">String</td><td style="text-align:center">否</td><td style="text-align:center">在指定网络下预下载，all(不限网络)、wifi(默认仅WiFi下预下载)</td></tr></tbody></table>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;code&gt;uniapp&lt;/code&gt;通过根目录中的&lt;code&gt;pages.json&lt;/code&gt;文件决定页面文件的路径、窗口样式、原生导航栏、底部原生tarBar等&lt;/p&gt;
&lt;h2 id=&quot;配置项列表&quot;&gt;&lt;a href=&quot;#配置项列表&quot; class=&quot;headerlink
      
    
    </summary>
    
      <category term="notes" scheme="https://owen027.github.io/categories/notes/"/>
    
    
      <category term="uniappPages" scheme="https://owen027.github.io/tags/uniappPages/"/>
    
  </entry>
  
  <entry>
    <title>uniapp 开发文档</title>
    <link href="https://owen027.github.io/2019/12/24/uniappStudy/"/>
    <id>https://owen027.github.io/2019/12/24/uniappStudy/</id>
    <published>2019-12-24T02:33:23.000Z</published>
    <updated>2019-12-29T09:41:24.791Z</updated>
    
    <content type="html"><![CDATA[<h2 id="概叙"><a href="#概叙" class="headerlink" title="概叙"></a>概叙</h2><p><code>uni-app</code>是基于vueJS框架开发的微端应用框架，可一套代码跨ios\Android\H5\小程序等多个平台运行</p><p>可通过官方开发的<a href="https://www.dcloud.io/hbuilderx.html">HBuilderX</a> IDE 创建<code>uni-app</code>项目，开箱即用，可<a href="https://uniapp.dcloud.io/quickstart">快速上手</a>。</p><h2 id="开发规范"><a href="#开发规范" class="headerlink" title="开发规范"></a>开发规范</h2><ul><li>页面文件遵循Vue 单文件组件<a href="https://vue-loader.vuejs.org/zh/spec.html">规范</a>，数据绑定及数据处理支持<code>vue</code>规范</li><li>组件标签靠近小程序<a href="https://uniapp.dcloud.io/component/README">规范</a></li><li>接口API靠近微信小程序<a href="https://uniapp.dcloud.io/api/README">规范</a>，将前缀<code>wx</code>改为<code>uni</code></li><li>推荐使用<code>Flex</code>布局</li></ul><h2 id="目录结构"><a href="#目录结构" class="headerlink" title="目录结构"></a>目录结构</h2><p>┌─common                uni-app公共资源目录<br>│  └─com-a.js<br>│  └─com-a.css<br>┌─components            uni-app组件目录<br>│  └─comp-a.vue         可复用的a组件<br>├─hybrid                存放本地网页的目录，<a href="https://uniapp.dcloud.io/component/web-view">详见</a><br>├─platforms             存放各平台专用页面的目录，<a href="https://uniapp.dcloud.io/platform">详见</a><br>├─pages                 业务页面文件存放的目录<br>│  ├─index<br>│  │  └─index.vue       index页面<br>│  └─list<br>│     └─list.vue        list页面<br>├─static                存放应用引用静态资源（如图片、视频等）的目录，注意：静态资源只能存放于此<br>├─wxcomponents          存放小程序组件的目录，<a href="https://uniapp.dcloud.io/frame?id=%E5%B0%8F%E7%A8%8B%E5%BA%8F%E7%BB%84%E4%BB%B6%E6%94%AF%E6%8C%81">详见</a><br>├─main.js               Vue初始化入口文件<br>├─App.vue               应用配置，用来配置App全局样式以及监听 应用生命周期 <a href="https://uniapp.dcloud.io/frame?id=%E5%BA%94%E7%94%A8%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F">详见</a><br>├─manifest.json         配置应用名称、appid、logo、版本等打包信息，<a href="https://uniapp.dcloud.io/collocation/manifest">详见</a><br>└─pages.json            配置页面路由、导航条、选项卡等页面类信息，<a href="https://uniapp.dcloud.io/collocation/pages">详见</a></p><blockquote><p>static中的 js文件不会被编译，如果使用ES6将会报错<br>css、less等资源放入公共资源目录中</p></blockquote><h2 id="生命周期"><a href="#生命周期" class="headerlink" title="生命周期"></a>生命周期</h2><h3 id="应用生命周期"><a href="#应用生命周期" class="headerlink" title="应用生命周期"></a>应用生命周期</h3><p>应用生命周期仅只 <code>App.vue</code>中可监听</p><table><thead><tr><th style="text-align:center">函数名</th><th style="text-align:center">说明</th></tr></thead><tbody><tr><td style="text-align:center">onLaunch</td><td style="text-align:center">初始化项目完成时触发（仅触发一次）</td></tr><tr><td style="text-align:center">onShow</td><td style="text-align:center">启动项目或从后台进入前台显示时触发</td></tr><tr><td style="text-align:center">onHide</td><td style="text-align:center">从前台隐藏至后台时触发</td></tr><tr><td style="text-align:center">onError</td><td style="text-align:center">程序出错时触发</td></tr><tr><td style="text-align:center">onuniViewMessage</td><td style="text-align:center">对 nvue 页面发送数据进行监听 <a href="https://uniapp.dcloud.io/use-weex?id=nvue-%e5%90%91-vue-%e9%80%9a%e8%ae%af">详情</a></td></tr></tbody></table><h3 id="页面生命周期-详情"><a href="#页面生命周期-详情" class="headerlink" title="页面生命周期 详情"></a>页面生命周期 <a href="https://uniapp.dcloud.io/frame?id=%e9%a1%b5%e9%9d%a2%e7%94%9f%e5%91%bd%e5%91%a8%e6%9c%9f">详情</a></h3><table><thead><tr><th style="text-align:center">函数名</th><th style="text-align:center">说明</th></tr></thead><tbody><tr><td style="text-align:center">onLoad</td><td style="text-align:center">监听页面加载，可接受上个页面传递的数据，param[Object], <a href="https://uniapp.dcloud.io/api/router?id=navigateto">详情</a></td></tr><tr><td style="text-align:center">onShow</td><td style="text-align:center">监听页面显示，每次出现在屏幕时触发</td></tr><tr><td style="text-align:center">onReady</td><td style="text-align:center">页面初次渲染完成时触发，可能会在页面进入动画完成前触发</td></tr><tr><td style="text-align:center">onHide</td><td style="text-align:center">从隐藏至后台时触发</td></tr><tr><td style="text-align:center">onUnload</td><td style="text-align:center">监听页面卸载</td></tr><tr><td style="text-align:center">onResize</td><td style="text-align:center">监听窗口变化 仅支持 5+App、微信小程序</td></tr><tr><td style="text-align:center">onPullDownRefresh</td><td style="text-align:center">监听用户下拉动作，<a href="https://uniapp.dcloud.io/api/ui/pulldown">详情</a></td></tr><tr><td style="text-align:center">onReachBottom</td><td style="text-align:center">监听页面上拉触底事件</td></tr><tr><td style="text-align:center">onTabItemTap</td><td style="text-align:center">点击Tab触发，param[Object]：( &nbsp;{index:String,pagePath:String,text:String} &nbsp;)。仅支持 微信小程序、百度小程序、H5、5+App（自定义组件模式）</td></tr><tr><td style="text-align:center">onShareAppMessage</td><td style="text-align:center">用户点击右上角分享触发  仅支持 微信小程序、百度小程序、头条小程序、支付宝小程序</td></tr><tr><td style="text-align:center">onPageScroll</td><td style="text-align:center">监听页面滚动，param[Object]：（ &nbsp; {scrollTop:Number} 页面在垂直方向已滚动的距离（单位px） ）</td></tr><tr><td style="text-align:center">onNavigationBarButtonTap</td><td style="text-align:center">监听原生标题栏按钮点击事件，param[Object]:(&nbsp; {index:Number} &nbsp;) 原生标题栏按钮数组的下标 仅支持     5+ App、H5</td></tr><tr><td style="text-align:center">onBackPress</td><td style="text-align:center">监听页面返回，event对象为 {from:backbutton,navigateBack},backbutton:来源于左上角按钮或android返回键，navigateBack:来源于uni.navigateBack。<a href="https://ask.dcloud.net.cn/article/35120">详情</a> 仅支持     5+ App、H5</td></tr><tr><td style="text-align:center">onNavigationBarSearchInputChanged</td><td style="text-align:center">监听原生标题栏搜索输入框内容变化，param[Object] 仅支持     5+ App、H5</td></tr><tr><td style="text-align:center">onNavigationBarSearchInputConfirmed</td><td style="text-align:center">监听原生标题栏搜索输入框搜索事件，点击软键盘上的搜索按钮，param[Object] 仅支持     5+ App、H5</td></tr><tr><td style="text-align:center">onNavigationBarSearchInputClicked</td><td style="text-align:center">监听原生标题栏搜索输入框点击事件，param[Object] 仅支持     5+ App、H5</td></tr></tbody></table><ul><li>onTabItemTap 常用于点击当前tabItem,滚动或刷新当前页面。</li></ul><h2 id="路由"><a href="#路由" class="headerlink" title="路由"></a>路由</h2><p><code>uni-app</code> 的路由全权由框架统一管理，通过<code>pages.json</code>配置每个路由页面路径及样式，不支持 <code>vueRouter</code><br>其路由有两种方式可跳转：使用 <a href="https://uniapp.dcloud.io/component/navigator">navigation</a> 组件跳转、调用<a href="https://uniapp.dcloud.io/api/router">API</a>跳转<br>框架是以栈的形式管理所有页面，当路由切换时，页面栈的表现详见<a href="https://uniapp.dcloud.io/frame?id=%e9%a1%b5%e9%9d%a2%e6%a0%88">详情</a></p><h2 id="运行环境的判断"><a href="#运行环境的判断" class="headerlink" title="运行环境的判断"></a>运行环境的判断</h2><ul><li><p>判断开发生产环境（process.env.NODE_ENV）<a href="https://uniapp.dcloud.io/frame?id=%e5%bc%80%e5%8f%91%e7%8e%af%e5%a2%83%e5%92%8c%e7%94%9f%e4%ba%a7%e7%8e%af%e5%a2%83">详情</a></p></li><li><p>判断平台通过编辑条件判断编译出包后的代码<a href="https://uniapp.dcloud.io/platform">详情</a>,通过API <code>uni.getSystemInfoSync().platform</code> 判断客户端环境 android/ios/devtools （小程序）</p></li></ul><h2 id="布局"><a href="#布局" class="headerlink" title="布局"></a>布局</h2><h3 id="单位-详见"><a href="#单位-详见" class="headerlink" title="单位 详见"></a>单位 <a href="https://uniapp.dcloud.io/frame?id=%e9%a1%b5%e9%9d%a2%e6%a0%b7%e5%bc%8f%e4%b8%8e%e5%b8%83%e5%b1%80">详见</a></h3><p><code>uni-app</code>支持通用单位<code>px</code>,<code>rpx</code><br><code>px</code>：固定的屏幕像素<br><code>rpx</code>：响应式像素，是相对于基准宽度的单位，可以根据屏幕宽度进行自适应，<code>uni-app</code> 规定屏幕基准宽度 750rpx。转化公式（750 * 元素在设计稿中的宽度 / 设计稿基准宽度）</p><ul><li>rpx和宽度相关，屏幕越框，实际像素越大，它不支持动态横竖屏切换计算，如果使用<code>rpx</code>建议锁定屏幕方向</li><li>设计师可用iphone6作为视稿标准</li><li>如果设计稿不是 750px，HBuilderX提供了工具自动换算，<a href="https://ask.dcloud.net.cn/article/35445">详见</a></li></ul><h4 id="H5单位"><a href="#H5单位" class="headerlink" title="H5单位"></a>H5单位</h4><ul><li>rem: 默认根字体大小为 屏幕宽度/20 (支持 微信小程序、头条小程序、App、H5)</li><li>vh: 1vh等于视窗高度的1%</li><li>vw: 1vw等于视窗宽度的1%</li></ul><p><strong>nvue 不支持百分比，App端，在 pages.json仅支持px</strong></p><h3 id="内联样式"><a href="#内联样式" class="headerlink" title="内联样式"></a>内联样式</h3><p>静态样式统一写至class中，style只接受动态样式，这样可以避免性能的消耗</p><p>目前支持的选择器<br>class,id,element,::before:/::after(仅微信小程序和5+APP生效)</p><p><strong>无法使用<code>*</code>,page相当于body</strong><br>App.vue 中的样式为全局样式，nvue不支持全局样式</p><h4 id="css变量"><a href="#css变量" class="headerlink" title="css变量"></a>css变量</h4><table><thead><tr><th style="text-align:center">变量</th><th style="text-align:center">描述</th></tr></thead><tbody><tr><td style="text-align:center">–status-bar-height</td><td style="text-align:center">系统状态栏高度，小程序为25px，H5为0</td></tr><tr><td style="text-align:center">–window-top</td><td style="text-align:center">内容区域距离顶部的距离，小程序为0 ，H5为NavigationBar高度</td></tr><tr><td style="text-align:center">–window-bottom</td><td style="text-align:center">内容区域距离底部部的距离，小程序为0 ，H5为TabBar高度</td></tr></tbody></table><ul><li>当设置 <code>navigationStyle:&quot;custom&quot;</code>取消原生导航栏，由于窗体沉浸式，占据了状态栏位置。此时可使用<code>var(--status-bar-height)</code>的view放在页面顶部，避免页面内容出现在状态栏。</li><li>由于H5端部存在原生导航栏和tabBar,因此由前端模拟</li><li>目前 nvue 不支持<code>--status-bar-height</code>,可在页面onLoad时通过<code>uni.getSystemInfoSync().statusBarHeight</code>获取状态栏高度，然后通过style绑定方式给占位view设定高度。</li></ul><p><strong>NavigationBar导航栏( 固定高度<code>44px</code> 不可修改),TabBar 底部选项卡( 固定高度<code>50px</code> 不可修改)</strong></p><h4 id="背景图注意点"><a href="#背景图注意点" class="headerlink" title="背景图注意点"></a>背景图注意点</h4><ul><li>支持base64、网络路径图</li><li>本地路径图小于40Kb,自动转化为base64,大于则须手动转化，或使用网络路径的方式引用。</li><li>推荐以<code>~@</code>的方式引用图片，而V3版本设定为不自动转化成base64</li><li><strong>微信小程序不支持相对路径</strong></li></ul><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.test</span> &#123;</span><br><span class="line">    <span class="attribute">background-image</span>: <span class="built_in">url</span>(<span class="string">'~@/static/logo.png'</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="字体图"><a href="#字体图" class="headerlink" title="字体图"></a>字体图</h5><ul><li>网络路径必须加协议头 <code>https</code></li><li>字体文件大于等于 40kb， 需开发者自己转换，否则使用将不生效；<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"> @<span class="keyword">font-face</span> &#123;</span><br><span class="line">     <span class="attribute">font-family</span>: test1-icon;</span><br><span class="line">     <span class="attribute">src</span>: <span class="built_in">url</span>(<span class="string">'~@/static/iconfont.ttf'</span>);</span><br><span class="line"> &#125;</span><br><span class="line">@<span class="keyword">font-face</span> &#123;</span><br><span class="line"><span class="attribute">font-family</span>: <span class="string">'iconfont'</span>;</span><br><span class="line"><span class="attribute">src</span>: <span class="built_in">url</span>(<span class="string">'https://at.alicdn.com/t/font_865816_17gjspmmrkti.ttf'</span>) <span class="built_in">format</span>(<span class="string">'truetype'</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><h2 id="TypeScript"><a href="#TypeScript" class="headerlink" title="TypeScript"></a>TypeScript</h2><p><a href="https://cn.vuejs.org/v2/guide/typescript.html">Vue.js 对 TypeScript 支持详情</a></p><h2 id="对应小程序自定义组件存放目录"><a href="#对应小程序自定义组件存放目录" class="headerlink" title="对应小程序自定义组件存放目录"></a><a href="https://uniapp.dcloud.io/frame?id=%e5%b0%8f%e7%a8%8b%e5%ba%8f%e7%bb%84%e4%bb%b6%e6%94%af%e6%8c%81">对应小程序自定义组件存放目录</a></h2>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;概叙&quot;&gt;&lt;a href=&quot;#概叙&quot; class=&quot;headerlink&quot; title=&quot;概叙&quot;&gt;&lt;/a&gt;概叙&lt;/h2&gt;&lt;p&gt;&lt;code&gt;uni-app&lt;/code&gt;是基于vueJS框架开发的微端应用框架，可一套代码跨ios\Android\H5\小程序等多个平台运
      
    
    </summary>
    
      <category term="notes" scheme="https://owen027.github.io/categories/notes/"/>
    
    
      <category term="uniapp" scheme="https://owen027.github.io/tags/uniapp/"/>
    
  </entry>
  
  <entry>
    <title>javascript_events</title>
    <link href="https://owen027.github.io/2019/12/18/javascript_events/"/>
    <id>https://owen027.github.io/2019/12/18/javascript_events/</id>
    <published>2019-12-18T05:55:26.000Z</published>
    <updated>2019-12-29T09:41:24.788Z</updated>
    
    <content type="html"><![CDATA[<h2 id="事件"><a href="#事件" class="headerlink" title="事件"></a>事件</h2><p>事件是某事发生的信号，它可以被系统侦测到，从而触发某个函数或程序</p><p>DOM 事件标准描述了事件传播的 3 个阶段：</p><ul><li>捕获阶段 —— 事件（从 Window）向下到达元素上。</li><li>目标阶段 —— 事件到达目标元素。</li><li>冒泡阶段 —— 事件从元素上开始冒泡。</li></ul><p>事件首先通过祖先链向下传递到元素（捕获），然后到达目标，最后上升（冒泡），在途中调用处理器。</p><h3 id="冒泡"><a href="#冒泡" class="headerlink" title="冒泡"></a>冒泡</h3><p>冒泡：当事件发生再元素上，它首先会运行元素本身的处理器，然后运行父级上同类型的处理器，之后运行其它祖级上同类型的处理器(大多数事件都是冒泡行为，forcus等例外)；可通过 <code>event.stopPropagation()</code><br>通过 JS<code>on&lt;event&gt;</code>属性、<code>addEventListener(event,handler,false)</code>或HTML属性添加的函数，发生在冒泡阶段和目标阶段</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="undefined">  body * &#123;</span></span><br><span class="line"><span class="undefined">    margin: 10px;</span></span><br><span class="line"><span class="undefined">    border: 1px solid blue;</span></span><br><span class="line"><span class="undefined">  &#125;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">onclick</span>=<span class="string">"alert('forbear')"</span>&gt;</span>FORBEAR</span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">onclick</span>=<span class="string">"alert('parent')"</span>&gt;</span>Parent</span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span> <span class="attr">onclick</span>=<span class="string">"alert('son')"</span>&gt;</span>SON<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><p>JS中与鼠标相关事件：<code>click</code>左击、<code>dblclick</code>左双击、<code>contextmenu</code>右击、<code>mouseover / mouseenter(不会冒泡)</code>鼠标移入元素、<code>mousemove / mouseleave(不会冒泡)</code>鼠标移出元素、<code>mousedown</code>按下、<code>mouseup</code>松开</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;事件&quot;&gt;&lt;a href=&quot;#事件&quot; class=&quot;headerlink&quot; title=&quot;事件&quot;&gt;&lt;/a&gt;事件&lt;/h2&gt;&lt;p&gt;事件是某事发生的信号，它可以被系统侦测到，从而触发某个函数或程序&lt;/p&gt;
&lt;p&gt;DOM 事件标准描述了事件传播的 3 个阶段：&lt;/p&gt;
&lt;u
      
    
    </summary>
    
      <category term="notes" scheme="https://owen027.github.io/categories/notes/"/>
    
    
      <category term="JS_events" scheme="https://owen027.github.io/tags/JS-events/"/>
    
  </entry>
  
  <entry>
    <title>MySQL 的更新和查询</title>
    <link href="https://owen027.github.io/2019/10/16/mysql_data_update_and_query/"/>
    <id>https://owen027.github.io/2019/10/16/mysql_data_update_and_query/</id>
    <published>2019-10-16T03:18:24.000Z</published>
    <updated>2019-12-25T13:34:08.619Z</updated>
    
    <content type="html"><![CDATA[<h2 id="更新"><a href="#更新" class="headerlink" title="更新"></a>更新</h2><p>数据更新有三种操作：插入数据（INSERT）、修改表中的数据(UPDATE)、删除数据(DELETE)</p><h3 id="插入数据"><a href="#插入数据" class="headerlink" title="插入数据"></a>插入数据</h3><h4 id="INSERT-…-VALUES-插入多行或单行元组数据"><a href="#INSERT-…-VALUES-插入多行或单行元组数据" class="headerlink" title="INSERT … VALUES 插入多行或单行元组数据"></a>INSERT … VALUES 插入多行或单行元组数据</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">INSERT</span> [<span class="keyword">INTO</span>] tbl_name [col_name,...]</span><br><span class="line">    &#123;<span class="keyword">VALUES</span>|<span class="keyword">VALUE</span>&#125;(&#123;expr|<span class="keyword">DEFAULT</span>&#125;,...),(...),...</span><br></pre></td></tr></table></figure><p>col_name :指定需要插入数据的列名列表。 如果向表中所有列插入数据，则全部列名可省略，这样做是不安全的，如果表结构发生变化，数据将会错乱。</p><p>向表的部分列插入数据，对于没被指定的列，其规则如下：</p><ol><li>对于具有标识（IDENTITY）属性的列，系统会自动生成序号值类唯一标识该列</li><li>具有默认值的列，通过 INSERT 中指定关键字 DEFALUT 将其设为默认值</li><li>没默认值的列，若允许空值，则通过 INSERT 指定 NULL 设为空，否则执行语句报错</li><li>对于类型为 TIMESTAMP 的列，系统自动赋值</li><li>AUTO_INCREMENT 属性列的值在表中其它列被赋值之 后生成，因此对表中其他列做赋值操作时，该属性列的引用只会返回数字 0</li></ol><p><code>VALUES 或 VALUE</code>：包含各列需要插入数据的清单。 数据的顺序必须与列的顺序相对应，该子句的值可以是：</p><ul><li>‘expr’: 一个常量、变量或表达式，也可以是NULL，其值的数据类型须与列的数据类型一致，否则报错</li><li>‘DEFAULT’：指定默认该列值为该列的默认值，前提该列已经明确指定了默认值，否则报错</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; INSERT INTO mysql_test.customers</span><br><span class="line">    -&gt; Values(901,'张三','F','北京市')</span><br><span class="line">Query OK, 1 row affected(0.09 sec)</span><br></pre></td></tr></table></figure><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; INSERT INTO mysql_test.customers</span><br><span class="line">    -&gt; Values(0,'李四',DEFAULT,'北京市')</span><br><span class="line">Query OK, 1 row affected(0.09 sec)</span><br></pre></td></tr></table></figure><p>上述中未给出待插入表的列清单，这样的操作是不安全的须改成：<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; INSERT INTO mysql_test.customers(cust_Id,cust_name,cust_sex,cust_address)</span><br><span class="line">    -&gt; Values(0,'李四',DEFAULT,'北京市')</span><br><span class="line">Query OK, 1 row affected(0.09 sec)</span><br></pre></td></tr></table></figure></p><p>当表的结构发生改变, INSERT 语句任能正确执行。</p><h4 id="INSERT…SET"><a href="#INSERT…SET" class="headerlink" title="INSERT…SET"></a>INSERT…SET</h4><p><code>INSERT...SET</code> 可以直接给表中的某些列指定对应的列值<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">INSERT</span> [<span class="keyword">INTO</span>] tbl_name</span><br><span class="line">    <span class="keyword">SET</span> col_name1=&#123;expr|<span class="keyword">DEFAULT</span>&#125;,col_name2=&#123;expr|<span class="keyword">DEFAULT</span>&#125;,....</span><br></pre></td></tr></table></figure></p><p>对于未指定的列为默认值<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; INSERT INTO mysql_test.customers</span><br><span class="line">    -&gt; SET cust_address='武汉',cust_name="李四"，cust_sex=DEFAULT</span><br><span class="line">Query OK, 1 row affected(0.09 sec)</span><br></pre></td></tr></table></figure></p><h3 id="删除数据"><a href="#删除数据" class="headerlink" title="删除数据"></a>删除数据</h3><p>使用<code>DELETE FROM tbl_name</code> 可删除行数据</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">DELETE</span> <span class="keyword">FROM</span> tbl_name</span><br><span class="line">    [<span class="keyword">WHERE</span> where_condition]</span><br><span class="line">    [<span class="keyword">ORDER</span> <span class="keyword">BY</span> ...]</span><br><span class="line">    [<span class="keyword">LIMIT</span> <span class="keyword">row_count</span>]</span><br></pre></td></tr></table></figure><p>-<code>WHERE</code>：限定删除条件，从而删除特定的行，如不指定条件则删除指定表的所有行数据</p><ul><li><code>ORDER BY</code>：各行按指定顺序进行删除</li><li><code>LIMIT</code>：告知服务器在控制命令被返回到客户端前被删除行的最大值</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">DELETE</span> <span class="keyword">FROM</span> mysql_test.customers</span><br><span class="line">   <span class="keyword">WHERE</span> cust_name=<span class="string">'王五'</span></span><br><span class="line"><span class="keyword">Query</span> OK, <span class="number">1</span> <span class="keyword">row</span> affected(<span class="number">0.09</span> sec)</span><br></pre></td></tr></table></figure><h3 id="修改数据"><a href="#修改数据" class="headerlink" title="修改数据"></a>修改数据</h3><p>使用<code>UPDATE</code> 更新表中的数据</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">UPDATE</span>  tbl_name</span><br><span class="line">    <span class="keyword">SET</span> col_name=&#123;expr|<span class="keyword">DEFAULT</span>&#125;[,col_name=&#123;expr|<span class="keyword">DEFAULT</span>&#125;]...</span><br><span class="line">    [<span class="keyword">WHERE</span> where_condition]</span><br><span class="line">    [<span class="keyword">ORDER</span> <span class="keyword">BY</span> ...]</span><br><span class="line">    [<span class="keyword">LIMIT</span> <span class="keyword">row_count</span>]</span><br></pre></td></tr></table></figure><p>-<code>WHERE</code>：限定修改条件，从而修改特定的行，如不指定条件则修改指定表的所有行数据</p><ul><li><code>ORDER BY</code>：各行按指定顺序进行修改</li><li><code>LIMIT</code>：限定被修改的行数</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">UPDATE</span>  mysql_test.customers</span><br><span class="line">   <span class="keyword">SET</span> cust_address = <span class="string">'北京'</span>,cust_sex = <span class="literal">NULL</span></span><br><span class="line">   <span class="keyword">WHERE</span> cust_name=<span class="string">'王五'</span></span><br><span class="line"><span class="keyword">Query</span> OK, <span class="number">1</span> <span class="keyword">row</span> affected(<span class="number">0.09</span> sec)</span><br></pre></td></tr></table></figure><hr><h2 id="查询数据"><a href="#查询数据" class="headerlink" title="查询数据"></a>查询数据</h2><p>数据查询是SQL 语言的核心功能，是使用最多的操作</p><h3 id="SELECT"><a href="#SELECT" class="headerlink" title="SELECT"></a>SELECT</h3><p>SELECT 可以从数据库中检索、统计或输出数据<br>执行过程是从数据库中选取匹配的特定行和列，并组成一个结果集放到临时表中返回。<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span></span><br><span class="line"> [<span class="keyword">ALL</span>|<span class="keyword">DISTINCT</span>|<span class="keyword">DISTINCTROW</span>]</span><br><span class="line"> select_expr[,select_expr ...]</span><br><span class="line"> <span class="keyword">FROM</span> table_references</span><br><span class="line"> [<span class="keyword">WHERE</span> where_condition]</span><br><span class="line"> [<span class="keyword">GROUP</span> <span class="keyword">BY</span> &#123;col_name|expr|<span class="keyword">position</span>&#125;</span><br><span class="line">    [<span class="keyword">ASC</span>|<span class="keyword">DESC</span>],...[<span class="keyword">WITH</span> <span class="keyword">ROLLUP</span>]]</span><br><span class="line"> [<span class="keyword">HAVING</span> where_condition]</span><br><span class="line"> [<span class="keyword">ORDER</span> <span class="keyword">BY</span> &#123;col_name|expr|<span class="keyword">position</span>&#125;</span><br><span class="line">    [<span class="keyword">ASC</span>|<span class="keyword">DESC</span>],...]</span><br><span class="line"> [<span class="keyword">LIMIT</span> &#123;[<span class="keyword">offset</span>,]<span class="keyword">row_count</span>|<span class="keyword">row_count</span> <span class="keyword">OFFSET</span> <span class="keyword">offset</span>&#125;]</span><br></pre></td></tr></table></figure></p><p>SELECT 子句用于指定输出的字段； （必选）<br>FROM 子句用于指定数据的来源；   （从表选择数据时使用）<br>WHERE 用于指数据的选择条件；<br>GROUP BY 用于对检索到的记录进行分组；（在按组计算聚合时使用）<br>HAVING 用于指定组的选择条件；<br>ORDER BY 用于对查询结果的排序；</p><label>必须按照SELECT 语句的语法格式所罗列的顺序格式查找数据。</label><p>如 HAVING 语句必须位于BROUP BY之后 OREDR BY 之前。</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;更新&quot;&gt;&lt;a href=&quot;#更新&quot; class=&quot;headerlink&quot; title=&quot;更新&quot;&gt;&lt;/a&gt;更新&lt;/h2&gt;&lt;p&gt;数据更新有三种操作：插入数据（INSERT）、修改表中的数据(UPDATE)、删除数据(DELETE)&lt;/p&gt;
&lt;h3 id=&quot;插入数据&quot;&gt;
      
    
    </summary>
    
      <category term="MySQL" scheme="https://owen027.github.io/categories/MySQL/"/>
    
    
      <category term="Database definition syntax" scheme="https://owen027.github.io/tags/Database-definition-syntax/"/>
    
  </entry>
  
  <entry>
    <title>MySQL的表索引定义</title>
    <link href="https://owen027.github.io/2019/10/15/mysql_index_definition/"/>
    <id>https://owen027.github.io/2019/10/15/mysql_index_definition/</id>
    <published>2019-10-15T07:38:24.000Z</published>
    <updated>2019-12-25T13:34:08.620Z</updated>
    
    <content type="html"><![CDATA[<h2 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h2><p>索引是 DBMS 根据表中的一列或若干列按一定的顺序建立的列值与记录行之间的对应关系表，方便 DBA 管理</p><ul><li>索引是以文件的形式存储，DBMS 将一张表的所有所有保存在同一个索引文件中，需要占用磁盘空间，如果有大量索引，可能比数据文件更快达到最大的文件尺寸。</li><li>索引提高查询速度的同时，会降低更新表的速度。更新表中索引列上的数据时，索引会被自动更新，确保索引树与表中的内容完全保持一致，因此索引越多，则更新时长更长。</li></ul><p>根据用途，索引在逻辑上大体分为三类</p><ol><li><p>普通索引（INDEX）: 最基本的索引类型，没有任何限制。通常使用关键字 INDEX 或 KEY</p></li><li><p>唯一性索引（UNIQUE）：索引中所有的值只能出现一次，必须唯一 通常使用关键字 UNIQUE</p></li><li><p>主键（PRIMARY KEY）：主键是一种唯一性索引。创建主键时，必须指定关键字 PRIMARY KEY，且不能有空值，一般在创建表的时候指定，也可通过修改表的方式添加，每张表只能有一个主键</p></li></ol><h2 id="创建索引"><a href="#创建索引" class="headerlink" title="创建索引"></a>创建索引</h2><p>分别有三种方式创建索引</p><h3 id="CREATE-INDEX"><a href="#CREATE-INDEX" class="headerlink" title="CREATE INDEX"></a><code>CREATE INDEX</code></h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> [<span class="keyword">UNIQUE</span>] <span class="keyword">INDEX</span> index_name</span><br><span class="line">    <span class="keyword">NO</span> tbl_name(index_col_name,...)</span><br></pre></td></tr></table></figure><ol><li><code>UNIQUE</code>：指定创建唯一性索引，一张表可以创建多个索引，每个索引在该表中名称唯一</li><li><code>tabl_name</code>: 数据库的表名</li><li><code>index_col_name</code> ：关于索引的描述。格式为<code>col_name[(length)][ASC|DESC]</code></li></ol><h4 id="索引的描述三个语法要素"><a href="#索引的描述三个语法要素" class="headerlink" title="索引的描述三个语法要素"></a>索引的描述三个语法要素</h4><ul><li><code>col_name</code>：指定要创建索引的列名，</li><li><code>lenght</code>:指定使用列的前length 个字符创建索引，有利于减小索引文件的大小</li><li><code>ASC|DESC</code>指定按升序（ASC）或降序（DESC）排列，默认 ASC</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt;CREATE INDEX index_customers</span><br><span class="line">    -&gt;  NO mysql_test.customers (cust_name(3)ASC)</span><br><span class="line">Query OK, 0 rows affected (0.20 sec)</span><br><span class="line">Records:0 Duplicates:0 Warning:0</span><br></pre></td></tr></table></figure><h4 id="CREATE-TABLE"><a href="#CREATE-TABLE" class="headerlink" title="CREATE TABLE"></a><code>CREATE TABLE</code></h4><ul><li><code>[CONSTRAINT [symbol]] PRIMARY KEY (index_col_name,...)</code>：创建新表的同时创建该表主键</li><li><code>{INDEX|KEY}[index_name](index_col_name,...)</code> ：创建表的同时创建该表索引</li><li><code>[CONSTRAINT [symbol]] UNIQUE [INDEX|KEY] [index_name] (index_col_name,...)</code>:用于创建表时创建唯一性索引</li><li><p><code>[CONSTRATIN [symbol]] FOREIGN KEY[index_name] (index_col_name,...)</code>:创建表的同时创建外键</p></li><li><p><code>KEY</code>: 关键字 INDEX的同义词</p></li><li><code>CONSTRAINT</code>：为主键、UNIQUE键、外键定义一个名字，使用 CREATE TABLE 定义列选项时，可以通过直接在某个列定义后面添加<code>PRIMARY KEY</code> 添加主键，主键由多列组成的多列索引时，不能使用此方法。</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; USE mysql_test</span><br><span class="line">Database changed</span><br><span class="line">mysql&gt; CREATE TABLE seller</span><br><span class="line">    -&gt;(</span><br><span class="line">    -&gt; seller_id int NOT NULL AUTO_INCREMENT</span><br><span class="line">    -&gt; seller_name char(50) NOT NLULL,</span><br><span class="line">    -&gt; seller_address char(50) null,</span><br><span class="line">    -&gt; product_type int(5) NULL</span><br><span class="line">    -&gt; sales int NULL</span><br><span class="line">    -&gt; PRIMARY KEY (seller_id,product_type)</span><br><span class="line">    -&gt; INDEX index_seller(salse)</span><br><span class="line">   -&gt;)</span><br><span class="line">Query OK, 0 rows affected (0.20 sec)</span><br></pre></td></tr></table></figure><h4 id="ALTER-TABLE"><a href="#ALTER-TABLE" class="headerlink" title="ALTER TABLE"></a><code>ALTER TABLE</code></h4><ul><li><code>ADD {INDEX|KEY} [index_name] (index_col_name,...)</code>: 新增表列的同时添加索引</li><li><code>ADD [CONTRAIN [smbol]] PRIMARY KEY [index_name] (index_col_name,...)</code>：新增列的同时添加主键</li><li><code>ADD [CONTRAIN [smbol]] UNIQUE [INDEX|KEY] [index_name] (index_col_name,...)</code>: 新增列的同时添加唯一性索引</li><li><code>ADD [CONTRAIN [smbol]] FOREIGN KEY [index_name] (index_col_name,...)</code>: 新增列的同时添加外键<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; ALTER TABLE mysql_test.seller</span><br><span class="line">    -&gt; ADD INDEX index_seller_name(seller_name)</span><br><span class="line">Query OK, 0 rows affected (0.20 sec)</span><br><span class="line"> Records: 0 Duplicates: 0 Warning: 0</span><br></pre></td></tr></table></figure></li></ul><h3 id="查看索引"><a href="#查看索引" class="headerlink" title="查看索引"></a>查看索引</h3><p>使用 SHOW INDEX 查看索引<br>语法：<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SHOW</span> &#123;<span class="keyword">INDEX</span>|<span class="keyword">INDEXES</span>|<span class="keyword">KEYS</span>&#125;</span><br><span class="line"> &#123;<span class="keyword">FROM</span>|<span class="keyword">IN</span>&#125; tbl_name</span><br><span class="line"> [&#123;<span class="keyword">FROM</span>|<span class="keyword">IN</span>&#125;db_name]</span><br><span class="line"> [<span class="keyword">WHERE</span> expr]</span><br></pre></td></tr></table></figure></p><h3 id="删除索引"><a href="#删除索引" class="headerlink" title="删除索引"></a>删除索引</h3><p>使用 DROP INDEX 或 ALTER TABLE 删除索引</p><ul><li>DROP INDEX</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">DROP</span> <span class="keyword">INDEX</span> index_name <span class="keyword">ON</span> tbl_name</span><br></pre></td></tr></table></figure><ul><li>ALTER TABLE</li></ul><ol><li><p>DROP PRIMARY KEY 删除表中主键</p></li><li><p>DROP INDEX 删除对应索引</p></li><li><p>DROP FOREIGN KEY 删除外键</p></li></ol><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; ALTER TABLE mysql_test.customers</span><br><span class="line">    -&gt; DROP PRIMARY KEY</span><br><span class="line">    -&gt; DROP INDEX index_custormes</span><br><span class="line">Query OK, 0 rows affected (0.20 sec)</span><br><span class="line"> Records: 0 Duplicates: 0 Warning: 0</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;概述&quot;&gt;&lt;a href=&quot;#概述&quot; class=&quot;headerlink&quot; title=&quot;概述&quot;&gt;&lt;/a&gt;概述&lt;/h2&gt;&lt;p&gt;索引是 DBMS 根据表中的一列或若干列按一定的顺序建立的列值与记录行之间的对应关系表，方便 DBA 管理&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;索引是
      
    
    </summary>
    
      <category term="MySQL" scheme="https://owen027.github.io/categories/MySQL/"/>
    
    
      <category term="Database definition syntax" scheme="https://owen027.github.io/tags/Database-definition-syntax/"/>
    
  </entry>
  
  <entry>
    <title>MySQL的数据库定义语法</title>
    <link href="https://owen027.github.io/2019/10/14/mysql_database_definition_syntax/"/>
    <id>https://owen027.github.io/2019/10/14/mysql_database_definition_syntax/</id>
    <published>2019-10-14T12:19:31.000Z</published>
    <updated>2019-12-25T13:34:08.620Z</updated>
    
    <content type="html"><![CDATA[<h3 id="创建数据库"><a href="#创建数据库" class="headerlink" title="创建数据库"></a>创建数据库</h3><p>在MySQL中，使用 CREATE DATABASE 或 CREATE SCHEMA 语句创建数据库<br>语法结构：<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> &#123;<span class="keyword">DATABASE</span>|<span class="keyword">SCHEMA</span>&#125;[<span class="keyword">IF</span> <span class="keyword">NOT</span> <span class="keyword">EXISTS</span>] db_name</span><br><span class="line">[<span class="keyword">DEFAULT</span>]<span class="built_in">CHARACTER</span> <span class="keyword">SET</span> [=]charest_name</span><br><span class="line">|[<span class="keyword">DEFAULT</span>]<span class="keyword">COLLATE</span> [=]collation_name</span><br></pre></td></tr></table></figure></p><p><code>[]</code>: 表示为可选<br><code>|</code>: 用于分隔花括号中的选项，表示任选一项语法<br><code>db_name</code>: 标识具体的数据库命名，必须符合操作系统文件夹命名规则，在MySQL中不区分大小写<br><code>DEFAULT</code>: 默认值<br><code>CHAREST SET</code>: 指定数据库字符集<br><code>COLLATE</code>: 指定字符集校对规则<br><code>IF NOT EXISTS</code>：创建数据库前进行判断，只有该数据库不存在时才能创建数据库</p><p><strong>Example：</strong><br>创建名称位 mysql_test 的数据库<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">DATABASE</span> mysql_test;</span><br></pre></td></tr></table></figure></p><p>在次输入同样的命令 将会报错 可添加 <code>IF NOT EXISTS</code> 避免报错</p><h3 id="选择数据库"><a href="#选择数据库" class="headerlink" title="选择数据库"></a>选择数据库</h3><p> MySQL 中创建数据库之后，不会自动使用新创建的数据库，可使用 <code>USE</code> 语句从当前环境切换换至新创建的数据库或其它数据库<br><strong>Example：</strong><br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">USE</span> mysql_test;</span><br></pre></td></tr></table></figure></p><h3 id="修改数据库"><a href="#修改数据库" class="headerlink" title="修改数据库"></a>修改数据库</h3><p>MySQL 中使用 ALTER DATABASE 或使用 ALTER SCHEMA 语句，修改数据库的相关参数<br>语法结构：<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> &#123;<span class="keyword">DATABASE</span>|<span class="keyword">SCHEMA</span>&#125;[db_name]</span><br></pre></td></tr></table></figure></p><p><strong>Example：</strong><br>修改已有数据库默认字符集和校对规则<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; ALTER DATABASE mysqle_test</span><br><span class="line">-&gt; DEFAULT CHARACTER SET gb2312</span><br><span class="line">-&gt; DEFAULT COLLATE gb2312_chinese_ci;</span><br><span class="line">...</span><br></pre></td></tr></table></figure></p><h3 id="删除数据库"><a href="#删除数据库" class="headerlink" title="删除数据库"></a>删除数据库</h3><p>MySQL 中使用 DROP DATABASE 或 DROP SCHEMA 来删除数据库,其数据永久删除<br>语法结构：<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">DROP</span> &#123;<span class="keyword">DATABASE</span>|<span class="keyword">SCHEMA</span>&#125;[<span class="keyword">IF</span> EXISITS]db_name</span><br></pre></td></tr></table></figure></p><p><strong>Example：</strong><br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">DROP</span> <span class="keyword">DATABASE</span> <span class="keyword">IF</span> EXISITS  mysqle_test</span><br><span class="line">...</span><br></pre></td></tr></table></figure></p><h3 id="查看数据库"><a href="#查看数据库" class="headerlink" title="查看数据库"></a>查看数据库</h3><p>MySQL 中使用 SHOW DATABASE 或 SHOW SCHEMA 来看可用数据库列表，只会列从出权限范围内的数据库<br>语法结构：<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SHOW</span> &#123;<span class="keyword">DATABASE</span>|<span class="keyword">SCHEMA</span>&#125;[<span class="keyword">LIKE</span><span class="string">'pattern'</span>|<span class="keyword">WHERE</span> expr]</span><br></pre></td></tr></table></figure></p><p><code>LIKE</code>: 匹配指定数据库名称<br><code>WHERE</code>: 指定数据库名称查询范围</p><p><strong>Example：</strong><br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SHOW</span> <span class="keyword">DATABASE</span></span><br></pre></td></tr></table></figure></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h3 id=&quot;创建数据库&quot;&gt;&lt;a href=&quot;#创建数据库&quot; class=&quot;headerlink&quot; title=&quot;创建数据库&quot;&gt;&lt;/a&gt;创建数据库&lt;/h3&gt;&lt;p&gt;在MySQL中，使用 CREATE DATABASE 或 CREATE SCHEMA 语句创建数据库&lt;br&gt;语法结构
      
    
    </summary>
    
      <category term="MySQL" scheme="https://owen027.github.io/categories/MySQL/"/>
    
    
      <category term="Database definition syntax" scheme="https://owen027.github.io/tags/Database-definition-syntax/"/>
    
  </entry>
  
  <entry>
    <title>MySQL的表定义语法</title>
    <link href="https://owen027.github.io/2019/10/14/mysql_table_definition_syntax/"/>
    <id>https://owen027.github.io/2019/10/14/mysql_table_definition_syntax/</id>
    <published>2019-10-14T12:15:35.000Z</published>
    <updated>2019-12-25T13:34:08.622Z</updated>
    
    <content type="html"><![CDATA[<h2 id="表定义"><a href="#表定义" class="headerlink" title="表定义"></a>表定义</h2><p>只有成功创建数据库后，才能创建数据表，数据表是字段的集合，在表中数据按行和列的格式存储</p><h3 id="创建表"><a href="#创建表" class="headerlink" title="创建表"></a>创建表</h3><p>MySQL 使用 CREATE TABLE 创建表。其中有多个选择，主要由表创建定义（create definition）、表选项定义（table options） 和区分选项（partition options）等内容构成。</p><p>表创建定义：由表列的名字、列的定义集可能的一个空值声明、一个完整性约束或表索引项组成，表索引项主要定义表的索引、主键、外键等。</p><p>语法结构：<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span>[<span class="keyword">TEMPORARY</span>]<span class="keyword">TABLE</span> tbl_name</span><br><span class="line">(</span><br><span class="line">    字段名|数据类型[列级完整性约束条件][默认值]</span><br><span class="line">    [,字段名<span class="number">2</span> 数据类型[列级完整性约束条件][默认值]]</span><br><span class="line">    [,....]</span><br><span class="line">    [,表级完整性约束条件]</span><br><span class="line">)[<span class="keyword">ENGINE</span>=引擎类型]</span><br></pre></td></tr></table></figure></p><p><strong>Example:</strong><br>新建一个客户信息<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; USE mysql_test</span><br><span class="line">Database changed</span><br><span class="line">mysql&gt; CRATE TABLE customers</span><br><span class="line">    -&gt;(</span><br><span class="line">    -&gt; cust_id INT NOT NULL AUTO_INCREMENT,</span><br><span class="line">    -&gt; cust_name CHAR(50) NOT NULL,</span><br><span class="line">    -&gt; cust_sex CHAR(1) NOT NULL DEFAULT 0,</span><br><span class="line">    -&gt; cust_address CHAR(50) NULL</span><br><span class="line">    -&gt; cust_contact CHAR(50) NULL</span><br><span class="line">    -&gt; PRIMARY KEY(CUST_ID)</span><br><span class="line">    -&gt;)</span><br><span class="line">Query OK, 0 rows affected(0.11 sec)</span><br></pre></td></tr></table></figure></p><h4 id="临时表与持久表"><a href="#临时表与持久表" class="headerlink" title="临时表与持久表"></a>临时表与持久表</h4><p>TEMPORARY：表示临时表，如果不选用则为持久表。<br>持久表一直存在，多个用户或应用程序可同时使用持久表，如果只需临时存放数据可添加 TEMPORARY 关键字<br>临时表只能对创建它的用户可见，断开数据库连接时，表会自动清除</p><h4 id="数据类型"><a href="#数据类型" class="headerlink" title="数据类型"></a>数据类型</h4><p>数据类型指系统中所允许的数据的类型。每列都应有适当的数据类型，来限制或允许该列的数据。 建表时必须为每列指定正确的数据类型及数据长度 （CHAR(50)）</p><p>MySQL 主要数据类型:</p><ul><li>数值类型：整型 int、浮点 double、布尔 bool</li><li>日期和时间类型：日期型、时间戳 timestamp、时间型 time</li><li>字符串类型：定长字符类型char、可变长字符类型varchrar</li><li>空间数据类型:单个几何类型 GEOMETRY等</li></ul><h4 id="关键字-AUTO-INCREMENT"><a href="#关键字-AUTO-INCREMENT" class="headerlink" title="关键字 AUTO_INCREMENT"></a>关键字 AUTO_INCREMENT</h4><p>AUTO_INCREMENT: 表中数据类型为整型的列设置自增属性 （++i）,从当前指或 1 开始，表中只能有一个 AUTO_INCREMENT。</p><p>当一个表列被指定为 AUTO_INCREMENT 后，其值可被覆盖，即可在表数据插入语句中为该列指定一个值（必须唯一），则该值将替换系统自动生成的值，后续增量基于该插入的值</p><h4 id="指定默认值"><a href="#指定默认值" class="headerlink" title="指定默认值"></a>指定默认值</h4><p>DEFAULT:用于指定MySQL在未给值的情况下默认的值（DEFAULT 0）</p><p>如果未指定默认值，则自动为其分配一个值，如若该列可取值NULL，则默认NULL，若定义 NOT NULL，则默认取决于该列的类型：</p><ul><li>一个没有声明 AUTO_INCREMENT 列 为数字类型，默认 0</li><li>一个 AUTO_INCREMENT 列 默认为顺序中的下一个值</li><li>对于除 TIMESTAMP 以外的日期和时间类型，默认为该类型适当的’零’值、</li><li>对于表中第一个 TIMESTAMP 列，默认值为当前日期和时间</li></ul><h4 id="NULL值"><a href="#NULL值" class="headerlink" title="NULL值"></a>NULL值</h4><p>NULL：没有值或缺值，允许NULL的列，插入行时可以不给该列的值；不允许NULL值的列，则该列必须有数据<br><code>NULL</code> 和 <code>&#39;&#39;</code>是不对等的 NOT NULL 列中允许<code>&#39;&#39;</code> 不允许 NULL</p><h4 id="主键"><a href="#主键" class="headerlink" title="主键"></a>主键</h4><p>PRIMARY KEY :指定主键，主键必须唯一且不能为NULL， 如果是单列，值必须唯一，如果是组合列，则其组合的值必须唯一</p><h3 id="更新表"><a href="#更新表" class="headerlink" title="更新表"></a>更新表</h3><p>通过使用 ALTER TABLE 来修改数据库</p><ul><li><code>ADD[COLUMN]</code>：新增表列，可增多列使用逗号分隔即可<br><strong>Example:</strong><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; ALTER TABLE mysqle_test.customers</span><br><span class="line">    -&gt; ADD COLUMN cust_city char(10) NOT NULL DEFAULT'ShenZhen' AFTER cust_sex;</span><br><span class="line">Query OK,0 rows affected(0.61 sec)</span><br><span class="line">Records:0 Duplicates:0 Warning:0</span><br></pre></td></tr></table></figure></li></ul><p>AFTER：将新增的列添加到cut_sexl 列之后<br>FIRST：将新增的列添加到表的第一列</p><p>若使用上述关键字则将新增的列添加至表最后</p><p>类似的 可以使用 ADDPRIMARY KEY 、ADDFOREIGN KEY 、ADD INDEX 添加对应的 主键、外键、索引</p><ul><li><code>CHANGE[COLUMN]</code>: 修改表中列的名称或数据类型，可修改多列使用逗号分隔即可</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; ALTER TABLE mysqle_test.customers</span><br><span class="line">    -&gt; CHANGE COLUMN cust_sex sex char(1) NULL DEFAULT 'M'</span><br><span class="line">Query OK,0 rows affected(0.66 sec)</span><br><span class="line">Records:0 Duplicates:0 Warning:0</span><br></pre></td></tr></table></figure><p>如果将数据类型更换，可能会丢失该列原有的数据，如果视图改变的数据类型于原有的数据类型不兼容，则SQL命令不会执行，且抛出错误。<br>再兼容的情况下，该列的数据可能会被截断，如：一列的数据类型为 varchart(10),改为char(1),则该列中的数据’ShenZhen’会变为’S’</p><ul><li><p><code>ALTER [COLUMN]</code>: 修改或删除指定列的默认值</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; ALTER TABLE mysqle_test.customers</span><br><span class="line">    -&gt; ALTER COLUMN cust_city SET  DEFAULT 'ShangHai'</span><br><span class="line">Query OK,0 rows affected(0.36 sec)</span><br><span class="line">Records:0 Duplicates:0 Warning:0</span><br></pre></td></tr></table></figure></li><li><p><code>MODIFY [COLUMN]</code>: 修改指定列的数据类型，通过 ‘FIRST’ 或 ‘AFTER’ 修改列的位置</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; ALTER TABLE mysqle_test.customers</span><br><span class="line">    -&gt; MODIFY COLUMN cust_name char(30)  FIRST</span><br><span class="line">Query OK,0 rows affected(0.20 sec)</span><br><span class="line">Records:0 Duplicates:0 Warning:0</span><br></pre></td></tr></table></figure></li><li><p><code>DROP [COLUMN]</code>: 删除列，该列所有数据一并删除</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; ALTER TABLE mysqle_test.customers</span><br><span class="line">    -&gt; DROP COLUMN cust_city</span><br><span class="line">Query OK,0 rows affected(0.42 sec)</span><br><span class="line">Records:0 Duplicates:0 Warning:0</span><br></pre></td></tr></table></figure></li></ul><p>同样 可使用 DROP PRIMARY KEY 、DROP FOREIGN KEY、DROP INDEX 删除对应的主键、外键、索引</p><ul><li><code>RENAME[TO]</code>:表重命名<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; ALTER TABLE mysqle_test.customers</span><br><span class="line">    -&gt; RENAME TO</span><br><span class="line">Query OK,0 rows affected(0.42 sec)</span><br></pre></td></tr></table></figure></li></ul><h3 id="重命名表"><a href="#重命名表" class="headerlink" title="重命名表"></a>重命名表</h3><p>除了 ALTER TABLE 中的 RENAME TO 修改表名，还可通过 RENAME TABLE 来修改单张和多张表（以逗号分隔）<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; RENAME TABLE mysql_test.back.customers TO mysqle_test.customers</span><br></pre></td></tr></table></figure></p><h3 id="删除表"><a href="#删除表" class="headerlink" title="删除表"></a>删除表</h3><p><code>DROP[TEMPORARY]TABLE[IF EXISTS]</code>删除一个已存在的表,可以删除多张表，前提操作人必须有权限，但是操作人在该张表上的权限不会被删除</p><h3 id="查看表"><a href="#查看表" class="headerlink" title="查看表"></a>查看表</h3><ul><li><code>SHOW [FULL] TABLES [{FROM|IN}db_name] [LIKE&#39;pattern&#39;|WHERE expr]</code>：  显示指定数据库中所有表名</li></ul><p><strong>Example：</strong><br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; USE mysql_test</span><br><span class="line">Database changed</span><br><span class="line">mysql&gt; SHOW TABLES:</span><br><span class="line"> Tables_in_mysql_test</span><br><span class="line"> customers</span><br><span class="line"> 1 row in <span class="keyword">set</span> &lt;<span class="number">0.01</span> sec&gt;</span><br></pre></td></tr></table></figure></p><ul><li><code>SHOW [FULL] COLUMNS {FROM|IN}tb_name[{FROM|IN}db_name] 或 {DESCRIBE|DESC} tbl_name[col_name|wild]</code>: 显示指定数据库表结构。</li></ul><p>MySQL 支持使用 DESCRIBE 代替 SHOW COLUMNS FROM 来查看表结构</p><p><strong>Example:</strong><br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; DESC mysql_test.custormes</span><br><span class="line">Field         Type       Null key  Default Extra</span><br><span class="line">cust_id       int&lt;11&gt;    NO   PRI  NULL    auto_increment</span><br><span class="line">cust_name     char&lt;50&gt;   NO        Null</span><br><span class="line">cust_sex      int&lt;1&gt;     NO        0</span><br><span class="line"></span><br><span class="line">3 row in <span class="keyword">set</span> &lt;<span class="number">1.56</span> sec&gt;</span><br></pre></td></tr></table></figure></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;表定义&quot;&gt;&lt;a href=&quot;#表定义&quot; class=&quot;headerlink&quot; title=&quot;表定义&quot;&gt;&lt;/a&gt;表定义&lt;/h2&gt;&lt;p&gt;只有成功创建数据库后，才能创建数据表，数据表是字段的集合，在表中数据按行和列的格式存储&lt;/p&gt;
&lt;h3 id=&quot;创建表&quot;&gt;&lt;a hr
      
    
    </summary>
    
      <category term="MySQL" scheme="https://owen027.github.io/categories/MySQL/"/>
    
    
      <category term="Table definiton syntax" scheme="https://owen027.github.io/tags/Table-definiton-syntax/"/>
    
  </entry>
  
  <entry>
    <title>SQL和MySQL 基础</title>
    <link href="https://owen027.github.io/2019/10/09/SQL_basic_operations/"/>
    <id>https://owen027.github.io/2019/10/09/SQL_basic_operations/</id>
    <published>2019-10-09T10:18:47.000Z</published>
    <updated>2019-12-25T13:34:08.614Z</updated>
    
    <content type="html"><![CDATA[<h1 id="SQL"><a href="#SQL" class="headerlink" title="SQL"></a>SQL</h1><h2 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h2><p>Struture Query Langue （结构化查询语言，SQL），于1974年 Boyce 和 Chamberlin 提出。其已成为关系数据库的标准语言，是一种数据库查询和程序设计语言，用于存取数据及查询、更新和管理关系数据库系统，具有数据库定义、数据操作和数据控制等功能</p><h3 id="特点"><a href="#特点" class="headerlink" title="特点"></a>特点</h3><ul><li>SQL不是特点的数据库专有语言，几乎所有重要的关系数据库管理系统都支持 SQL。</li><li>SQL简单易学，SQL语句不区分大小写。</li></ul><h3 id="组成"><a href="#组成" class="headerlink" title="组成"></a>组成</h3><p>SQL集数据查询（Data Query）、数据定义（Data Definition）、数据操纵（Data Manipulation）和数据控制（Data Control）四大功能于一体</p><h4 id="数据定义语言（DDL）"><a href="#数据定义语言（DDL）" class="headerlink" title="数据定义语言（DDL）"></a>数据定义语言（DDL）</h4><p>主要用于对数据库及数据库中的各种对象进行创建、修改、删除等操作。数据库对象主要为 表、默认约束、规则、视图、触发器、存储过程等</p><p><strong>关键字：</strong></p><ol><li>CREATE: 创建数据库或数据库对象</li><li>ALTER：修改数据库或数据库对象</li><li>DORP： 删除数据库或数据库对象</li></ol><h4 id="数据操作语言（DML）"><a href="#数据操作语言（DML）" class="headerlink" title="数据操作语言（DML）"></a>数据操作语言（DML）</h4><p>主要用于操作数据库中的各种对象，主要是检索和修改数据</p><p><strong>关键字：</strong></p><ol><li>SELECT：从表或视图中检索数据，使用最为频繁</li><li>INSERT：将数据插入到表或视图中</li><li>UPDATE：修改表或视图中的数据，可修改单行，也可修改多行</li><li>DELETE：删除表或视图中的数据，可跟据条件删除指定数据</li></ol><h4 id="数据控制语言（DCL）"><a href="#数据控制语言（DCL）" class="headerlink" title="数据控制语言（DCL）"></a>数据控制语言（DCL）</h4><p>用于安全管理（权限）</p><ol><li>GRANT：授予权限</li><li>REVOKE：回收权限</li></ol><hr><h1 id="MySQL"><a href="#MySQL" class="headerlink" title="MySQL"></a>MySQL</h1><h2 id="概述-1"><a href="#概述-1" class="headerlink" title="概述"></a>概述</h2><p>MySQL是一个关系数据库管理系统（RDBMS),具有客户/服务器体系结构，由瑞典MySQL AB公司开发。 具有体积小、速度快、开源、遵循GPL（GNU通用公共许可证）等特点</p><p>MySQL在SQL标准的基础上增加了部分扩展的语言要素包括常量、变量、运算符、表达式、函数、流程控制语句和注解等。</p><h3 id="运算符"><a href="#运算符" class="headerlink" title="运算符"></a>运算符</h3><!-- 1. 算术运算符: +、-、*、/、%2. 位运算符：&（位与）、|（位或）、^（位异或）、~（位取反）、>>（位右移）、<<（位左移）3. 比较运算符：=、>、<、>=、<=、<>（不等于）、!=（不等于）、<=>（相等或都等于空）4. 逻辑运算符：NOT 或 ! （逻辑非）、AND 或 &&（逻辑与）、OR 或 ||（逻辑或）、XOR（逻辑异或） --><table><thead><tr><th style="text-align:center">算术运算符</th><th style="text-align:center">位运算符</th><th style="text-align:center">比较运算符</th><th style="text-align:center">逻辑运算符</th></tr></thead><tbody><tr><td style="text-align:center">+</td><td style="text-align:center">&amp;（位与）</td><td style="text-align:center">=</td><td style="text-align:center">NOT 或 ! （逻辑非）</td></tr><tr><td style="text-align:center">-</td><td style="text-align:center">l（位或）</td><td style="text-align:center">&gt;</td><td style="text-align:center">AND 或 &amp;&amp;（逻辑与）</td></tr><tr><td style="text-align:center">*</td><td style="text-align:center">^（位异或）</td><td style="text-align:center">&lt;</td><td style="text-align:center">OR 或 ll（逻辑或）</td></tr><tr><td style="text-align:center">/</td><td style="text-align:center">~（位取反）</td><td style="text-align:center">&gt;=</td><td style="text-align:center">XOR（逻辑异或）</td></tr><tr><td style="text-align:center">%</td><td style="text-align:center">&gt;&gt;（位右移）</td><td style="text-align:center">&lt;=</td><td style="text-align:center"></td></tr><tr><td style="text-align:center"></td><td style="text-align:center">&lt;&lt;（位左移）</td><td style="text-align:center">&lt;&gt;（不等于）或 !=（不等于）</td><td style="text-align:center"></td></tr><tr><td style="text-align:center"></td><td style="text-align:center"></td><td style="text-align:center">&lt;=&gt;（相等或都等于空）</td><td style="text-align:center"></td></tr></tbody></table><h3 id="内置函数"><a href="#内置函数" class="headerlink" title="内置函数"></a>内置函数</h3><ul><li>数学函数，如ABS()、SORT()</li><li>聚合函数，如COUNT()</li><li>字符串函数，如ASCII()、CHAR()</li><li>日期和时间函数，NOW()、YEAR()</li><li>加密函数，ENCODE()、ENCRYPT()</li><li>控制流程函数，IF()、IFNULL()</li><li>格式化函数，FORMAT()</li><li>类型转换函数，CAST()</li><li>系统信息函数，USER(),VERSION()</li></ul><h2 id="数据定义"><a href="#数据定义" class="headerlink" title="数据定义"></a>数据定义</h2><p>SQL 的数据定义功能包括数据库模式、表、索引和视图的定义<br>SQL 标准不提供修改数库模式定义和修改视图定义的操作，如需修改对象，可先删除再创建，或通过RDBMS提供的扩展语句实现<br>SQL 标准不提供索引相关的语句</p><h3 id="数据库模式定义"><a href="#数据库模式定义" class="headerlink" title="数据库模式定义"></a>数据库模式定义</h3><p>对数据库的增、删、改、查、选择等操作</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;SQL&quot;&gt;&lt;a href=&quot;#SQL&quot; class=&quot;headerlink&quot; title=&quot;SQL&quot;&gt;&lt;/a&gt;SQL&lt;/h1&gt;&lt;h2 id=&quot;概述&quot;&gt;&lt;a href=&quot;#概述&quot; class=&quot;headerlink&quot; title=&quot;概述&quot;&gt;&lt;/a&gt;概述&lt;/h2&gt;&lt;p
      
    
    </summary>
    
      <category term="MySQL" scheme="https://owen027.github.io/categories/MySQL/"/>
    
    
      <category term="SQL basis" scheme="https://owen027.github.io/tags/SQL-basis/"/>
    
  </entry>
  
  <entry>
    <title>关系数据库设计方法</title>
    <link href="https://owen027.github.io/2019/10/08/relational_database_design_method/"/>
    <id>https://owen027.github.io/2019/10/08/relational_database_design_method/</id>
    <published>2019-10-08T10:59:17.000Z</published>
    <updated>2019-12-25T13:34:08.624Z</updated>
    
    <content type="html"><![CDATA[<h2 id="概念结构设计方法（概念模式）"><a href="#概念结构设计方法（概念模式）" class="headerlink" title="概念结构设计方法（概念模式）"></a>概念结构设计方法（概念模式）</h2><p>概念模式通常采取自顶向下法（实体分析法），通过两个步骤完成概念设计：</p><p>1.建立局部信息结构<br>2.将局部信息合并为全局信息结构并优化，使用 E-R 模型作为概念模型的描述工具</p><h3 id="E-R-图的表示方法"><a href="#E-R-图的表示方法" class="headerlink" title="E-R 图的表示方法"></a>E-R 图的表示方法</h3><p>概念结构设计是将需求分析得到的用户需求抽象为信息结构（概念模型）的过程，通常使用E-R图作为建模工具具体由三部分组成：</p><ol><li>实体型：用矩形表示，矩形内写明实体名称</li><li>属性：用椭圆表示，用无向边将其与响应实体连接起来</li><li>联系：用菱形表示，菱形内写明联系的名称，并用无向边分别和有关实体连接，同时无向边旁备注联系类型，如果联系也有属性，则同样使用无向边连接。</li></ol><h4 id="实体间的联系"><a href="#实体间的联系" class="headerlink" title="实体间的联系"></a>实体间的联系</h4><p>实体间的联系通常指不同实体型的实体集之间的联系一般有三种情形</p><h5 id="两个实体型之间的联系"><a href="#两个实体型之间的联系" class="headerlink" title="两个实体型之间的联系"></a>两个实体型之间的联系</h5><p>设两个实体集 A、B，两个实体型间的联系可分为 一对一、一对多、多对多</p><p>1&gt; 一对一（1:1）</p><p>对于 A 中每一天实体， B 中最多有一个与之联系，反之亦然，则 A与B 记为 1:1</p><p>2&gt; 一对多（1:N）<br>对于 A 中每一个实体，B 中有N个实体与之联系，反之，B的每一个实体，A中至多有一个实体与之对应，则记为 1:N</p><p>3&gt; 多对多（M:N）</p><p>对于 A 中每个实体，B 中有N个实体与之联系，反之 B 中每个实体，A 中有M个实体与之联系，记为 （M:N）</p><p><strong>example：</strong></p><pre class="mermaid">graph TBA[系] --1--> B{隶属}B --1--> C[系主任]a[班级] --1--> b{包含}b --N--> c[学生]q[学生] --M--> w{选课}w --N--> e[课程]</pre><h5 id="两个实体以上的实体型之间的联系"><a href="#两个实体以上的实体型之间的联系" class="headerlink" title="两个实体以上的实体型之间的联系"></a>两个实体以上的实体型之间的联系</h5><p>同两个实体之间的联系一样存在以上三种联系</p><p><strong>example：</strong></p><pre class="mermaid">graph TBA[课程] --1--> B{讲授}B --M--> C[教师]B --N--> D[参考书]a[供应商] --M--> b{供应}b --N--> c[项目]b --P--> d[零件]</pre><h5 id="单个实体型内的联系"><a href="#单个实体型内的联系" class="headerlink" title="单个实体型内的联系"></a>单个实体型内的联系</h5><p>同一个实体集内的各实体间也可以存在以上三种联系</p><p><strong>example：</strong></p><pre class="mermaid">graph LRA[职工] --1--> B{领导}B --N--> A</pre><h3 id="局部信息结构设计"><a href="#局部信息结构设计" class="headerlink" title="局部信息结构设计"></a>局部信息结构设计</h3><p>局部信息结构设计：根据需求分析报告中标明的不同用户视图范围所建立的满足该范围内用户需求的信息结构。通常为五个步骤</p><h4 id="确定局部范围"><a href="#确定局部范围" class="headerlink" title="确定局部范围"></a>确定局部范围</h4><p>主要依据需求分析报告中标明的用户视图范围来确定局部范围；基本准则：部门和功能相对独立，同其他局部范围相互影响较小，且实体个数适量。</p><h4 id="选择实体"><a href="#选择实体" class="headerlink" title="选择实体"></a>选择实体</h4><p>在确定的局部范围内选择一些合适的信息单位作为局部信息结构的基本实体</p><h4 id="选择实体的关键字属性"><a href="#选择实体的关键字属性" class="headerlink" title="选择实体的关键字属性"></a>选择实体的关键字属性</h4><p>实体的存在依赖于关键字的存在。关键字属性确定后，实体的非关键字就易于确定了。</p><h4 id="确定实体间联系"><a href="#确定实体间联系" class="headerlink" title="确定实体间联系"></a>确定实体间联系</h4><p>数据间的联系必须在概念设计时确定。<br>分析实体间是否存在联系的方法：将局部范围内的实体逐一取出与该范围内的其他实体试行匹配，能否找到与两个参加试匹配的实体都有关的问题或同一任务同时使用到参与试匹配的两个实体，存在则它们之间存在联系。</p><h4 id="确定实体属性"><a href="#确定实体属性" class="headerlink" title="确定实体属性"></a>确定实体属性</h4><p>属性分为标识属性和说明属性两类。<br>标识属性作用实体的关键字，说明属性作用描述实体的一般特征</p><p>确定说明属性的基本原则: 说明属性的存在和使用依赖于标识属性。值为单值，不允许嵌套属性和重复组的现象出现在实体中。</p><h3 id="全局信息结构设计"><a href="#全局信息结构设计" class="headerlink" title="全局信息结构设计"></a>全局信息结构设计</h3><p>将所有局部信息结构合并为一个全局信息结构。其必须是所有局部信息结构的全面准确的映像，形成的全局信息结构仍能实现各局部信息结构能实现的需求</p><p>合并是在假设各局部信息结构都说完全一致的前提下进行，即各局部信息结构能满足对于的需求，其内部不存在需要合并的成分。</p><p>由于局部信息结构仅以满足局部应用需求为目标，各个局部信息结构对同一数据对象因各自应用特征不同而可能采取不同处理，及每个开发人员对数据语义理解的差别等待，合并中会出现各种各样的冲突，需要合理的解决冲突才能进行合理的合并产出一个合理的全局信息结构。因此合并是一个不断发现和解决冲突的过程。</p><h4 id="冲突的种类"><a href="#冲突的种类" class="headerlink" title="冲突的种类"></a>冲突的种类</h4><h5 id="属性冲突"><a href="#属性冲突" class="headerlink" title="属性冲突"></a>属性冲突</h5><p>属性值域的冲突，如属性值的类型、取值范围、取值集合的不同<br>属性取值单位冲突，如某个属性有的值用 M 为度量单位，有的用 CM 为度量单位</p><h5 id="命名冲突"><a href="#命名冲突" class="headerlink" title="命名冲突"></a>命名冲突</h5><p>同名异义：不同意义的实体类型或联系类型名在不同的局部应用中具有相同的名字<br>异名同义: 相同意义的实体类型或联系类型名在不同局部应用中具有不同的名字</p><h4 id="结构冲突"><a href="#结构冲突" class="headerlink" title="结构冲突"></a>结构冲突</h4><p>同一对象在一个局部E-R图中作为实体，在另一个局部E-R途中作为属性<br>同一实体在不同E-R图中属性个数和类型不同<br>实体之间的联系在不同的E-R图中是不同的类型</p><h4 id="解决方法"><a href="#解决方法" class="headerlink" title="解决方法"></a>解决方法</h4><p>对于属性、命名冲突，通常采用讨论、协商等行政手段解决<br>对于结构冲突，须通过认真分析，采用技术手段加以解决</p><p>一个好的全局E-R模型除能反映用户功能需求之外，实体类型个数尽可能少，实体类型所含属性尽可能少，实体间联系无冗余。</p><p>全局E-R模型的优化可通过上述三个条件来完成</p><h2 id="逻辑结构设计方法"><a href="#逻辑结构设计方法" class="headerlink" title="逻辑结构设计方法"></a>逻辑结构设计方法</h2><p>逻辑结构设计是将概念模型转换为具体的 DBMS 所支持的逻辑数据模型，即将E-R图转换为关系模型、对关系数据模型进行优化、设计面向用户的外模式。</p><h3 id="E-R图转换为关系模型"><a href="#E-R图转换为关系模型" class="headerlink" title="E-R图转换为关系模型"></a>E-R图转换为关系模型</h3><h4 id="转换原则"><a href="#转换原则" class="headerlink" title="转换原则"></a>转换原则</h4><ul><li><p>一个实体型转换为一个关系模式。实体的属性转换为关系的属性，实体码作为关系码</p></li><li><p>一个一对一（1:1）联系转换为一个独立的关系模式，可与任意一端对应的关系模式合并。该联系相连的各实体码及联系本身的属性转换为关系的属性，每个实体码为关系候选码</p></li><li><p>一个一对多（1:N）联系转换为一个独立关系模式，可与N端对应的关系模式合并。同样相连的各实体码及联系本身属性均转换为关系的属性，关系的码为N端实体的码</p></li><li><p>一个多对多（M:N）联系转换为一个关系模式，与该联系相连的各实体码及联系本身的实现转换为关系属性，关系的码为各个实体码的组合</p></li><li><p>三个及三个以上实体间的一个多元联系转换为一个关系模式。与该多元联系相连的实体码及联系本身的属性转换为关系的属性，关系码为各个实体的组合</p></li><li><p>相同码的关系模式可合并</p></li></ul><h3 id="数据模型的优化"><a href="#数据模型的优化" class="headerlink" title="数据模型的优化"></a>数据模型的优化</h3><p>关系数据模型的优化通常参考关系规范化理论</p><h4 id="优化方法"><a href="#优化方法" class="headerlink" title="优化方法"></a>优化方法</h4><ul><li>确定各属性间的函数依赖关系</li><li>对于各关系模式之间的数据依赖进行极小化处理，消除冗余的联系。</li><li>判断每个关系模式的范式，根据实际需要确定最合适的范式</li><li>按需求分析阶段得到的处理要求，分析模式对于应用环境是否合适，去掉是否要对某些模式进行合并或分解</li></ul><h3 id="设计用户子模式"><a href="#设计用户子模式" class="headerlink" title="设计用户子模式"></a>设计用户子模式</h3><p>将概念模型转换为全局逻辑模型后，可根据局部应用需求，利用视图设计更符合局部用户需要的用户外模式<br>定义数据库全局模式主要从系统时间效率、空间效率、以为会角度出发，用户外模式与模式是相对独立的，因此外模式可注重考虑用户的习惯于方便。</p><ul><li>可通过视图机制在设计用户视图时，重新定义某些属性的别名</li><li>可对不同级别的用户定义不同的视图，保证系统安全性</li><li>简化用户对系统的使用。</li></ul><h2 id="物理设计方法"><a href="#物理设计方法" class="headerlink" title="物理设计方法"></a>物理设计方法</h2><ul><li><p>建立索引，通过 DBMS 提供的有关命令实现（有静态（频率高才用）和动态两种方式）</p></li><li><p>建立聚集，将相关数据集中存放的物理存储技术</p></li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;概念结构设计方法（概念模式）&quot;&gt;&lt;a href=&quot;#概念结构设计方法（概念模式）&quot; class=&quot;headerlink&quot; title=&quot;概念结构设计方法（概念模式）&quot;&gt;&lt;/a&gt;概念结构设计方法（概念模式）&lt;/h2&gt;&lt;p&gt;概念模式通常采取自顶向下法（实体分析法），通
      
    
    </summary>
    
      <category term="Database basis" scheme="https://owen027.github.io/categories/Database-basis/"/>
    
    
      <category term="database design" scheme="https://owen027.github.io/tags/database-design/"/>
    
  </entry>
  
  <entry>
    <title>数据库设计</title>
    <link href="https://owen027.github.io/2019/09/22/database_design/"/>
    <id>https://owen027.github.io/2019/09/22/database_design/</id>
    <published>2019-09-22T06:04:03.000Z</published>
    <updated>2019-12-25T13:34:08.617Z</updated>
    
    <content type="html"><![CDATA[<h2 id="概叙"><a href="#概叙" class="headerlink" title="概叙"></a>概叙</h2><blockquote><p>针对具体的应用场景，使用现有的 DBMS 构建适合的数据库模式，建立数据库及其应用系统，使之能有效的收集、存储、操作和管理数据，满足实际业务中各类用户的应用需求、信息需求和处理需求，这个过程称为数据库设计。</p></blockquote><p>1.数据库生命周期，从演变过程的角度分为两个阶段：分析与设计阶段 和 实现与操作阶段</p><p>1.1 分析与设计阶段细分为四个环节：需求方分析、概念设计、逻辑结构设计和物理结构设计。<br>1.2 实现与操作阶段细分为3个环节：数据库的实现、操作与监督和修改与调整。</p><ol start="2"><li><p>数据库设计主要以满足应用的功能需求和良好的数据库性能为目标。</p></li><li><p>数据库设计是从用户对数据的需求出发，研究并构造数据库的过程，包括两个方面：数据库结构设计（概念、逻辑和物理结构设计）和行为设计（对数据库的操作）</p></li><li><p>数据库设计的优劣，会直接影响当前的应用、数据库应用过程中的维护和生命周期，为使数据库设计更加合理，需要一个有效的指导原则（方法），大体分为三类：直观设计法、规范设计法和计算机辅助设计法。</p></li></ol><p>4.1 直观设计法：利用设计者的经验和技巧来设计数据库模式。此方法缺乏科学理论指导，质量很难保证。<br>4.2 规范设计法：又细分为 新奥尔良设计法、基于 E-R 模型的数据库设计法和基于第三范式的设计方法。<br>4.2.1 新奥尔良设计法：将数据库设计为四个阶段（需求分析、概念结构设计、逻辑结构设计和物理结构设计，注重结构设计）<br>4.2.2 E-R模型数据设计法：在需求分析的基础上用E-R图像构造一个反应现实世界实体之间联系的企业模式，然后将模式转换成某一特定 DBMS 下的概念模式。<br>4.2.3 基于第三范式的设计方法：在需求分析的基础上先确定数据库的模式，属性及属性间的依赖概念性，进行模式分解，规范成若干个第三范式关系模式的集合。</p><ol start="5"><li><p>计算机辅助设计方法：以领域专家的知识或经验为主导，模拟某一规范化设计的方法，通常通过人机交互的方式来完成设计的某些过程。</p></li><li><p>数据库设计的过程六大阶段：需求分析 -&gt; 结构设计（概念、逻辑和物理结构设计）∪ 行为设计（功能、事务和程序设计） -&gt; 数据库实施（加载数据库数据和调试运行应用程序） -&gt; 数据库运行和维护</p></li></ol><pre class="mermaid">graph LRA(需求分析) --> B(结构设计)A --> C(行为设计)B --> D(数据库实施)C --> D(数据库实施)D --> E(数据库运行与维护)</pre><p>数据库设计过程实际是一个反复修改、反复设计的迭代过程。</p><h2 id="数据库设计的基本步骤"><a href="#数据库设计的基本步骤" class="headerlink" title="数据库设计的基本步骤"></a>数据库设计的基本步骤</h2><h3 id="需求分析"><a href="#需求分析" class="headerlink" title="需求分析"></a>需求分析</h3><blockquote><p>需求分析是数据库设计的起点，直接影响后续阶段的设计和数据库系统能否被合理使用。分四个步骤：确定数据库范围、分析数据应用过程、收集与分析数据和编写需求分析报告。<br>需求分析的目标是了解与分析用户的信息及应用处理的要求，并将结果按一定格式整理形成需求分析报告。</p></blockquote><p><span class="skyblue">数据库设计人员进行需求分析基本方法：听取数据库应用部们人员的报告，并沟通。同时需求分析人员提交一份需求调查表，该表内容主要包括调查的内容和要求提供资料的格式，应用部门的业务人员可根据该表进行准备和提交材料；此外数据库设计人员还需查阅原始资料，及跟班作业等</span></p><h4 id="确定数据库范围"><a href="#确定数据库范围" class="headerlink" title="确定数据库范围"></a>确定数据库范围</h4><p>范围指数据库应支持哪些应用功能。该范围应尽可能的考虑较为广泛的应用部门或领域，充分满足用户的应用功能要求，有效地利用计算机设备及数据库系统的潜在能力。同时还应尽可能考虑将来的应用需求，提高数据库应变能力，避免以后频繁修改。</p><p>满足上述要求的数据库是复杂而庞大的，由于诸多因素的影响，设计人员当首先考虑支持用户工作需要所必须的应用要求。</p><h4 id="应用过程分析"><a href="#应用过程分析" class="headerlink" title="应用过程分析"></a>应用过程分析</h4><p>此过程分析指了解并分析数据与数据处理间的关系。在确定数据库范围后，设计人员应逐次地了解分析每一部门或功能要用到哪些数据、数据的使用顺序、对数据作何处理和处理的策略及处理结果等</p><p>过程分析的结果是数据库结构设计的重要依据。</p><h4 id="收集与分析数据"><a href="#收集与分析数据" class="headerlink" title="收集与分析数据"></a>收集与分析数据</h4><p> 数据收集与分析是指了解并分析数据的组成格式及操作特征，每个数据元素的语义及关系等，并将它们收集起来整理归档。<br> 可从三个方面展开工作：静态结构、动态结构及数据约束。</p><h5 id="静态结构"><a href="#静态结构" class="headerlink" title="静态结构"></a>静态结构</h5><p>静态结构指不施加应用操作于其上时数据的原始状况。通过数据分类表和数据元素表来说明</p><p>1）数据分类表用于数据的总体描述。对于每一客观存在的具有独立意义的单类数据单位应给出其名称、用途、编制者及使用者等说明：</p><table><thead><tr><th style="text-align:center">数据ID</th><th style="text-align:center">数据名</th><th style="text-align:center">用途</th><th style="text-align:center">主人</th><th style="text-align:center">用户</th><th style="text-align:center">来源</th><th style="text-align:center">去向</th><th style="text-align:center">存档时间</th><th style="text-align:center">数据量</th></tr></thead><tbody><tr><td style="text-align:center"></td></tr></tbody></table><p>2）数据元素表<br>数据元素表指通常意义下的数据项或属性。数据分类表中的每一类数据的所有数据元素名称、类型、长度、意义及算法等都应在数据元素表中进行详尽说明。格式如下：</p><table><thead><tr><th style="text-align:center">数据ID</th><th style="text-align:center">数据元素ID</th><th style="text-align:center">元素名</th><th style="text-align:center">意义</th><th style="text-align:center">类型</th><th style="text-align:center">长度</th><th style="text-align:center">算法</th><th style="text-align:center">备注</th></tr></thead><tbody><tr><td style="text-align:center"></td></tr></tbody></table><p>类型：描述元素的数据特征（字符串、整数型、实数型）</p><h5 id="动态结构"><a href="#动态结构" class="headerlink" title="动态结构"></a>动态结构</h5><p>动态结构指将应用操作施加于数据之上的数据状况，可通过任务分类表和数据操作特征表进行说明</p><p>1）任务分类表<br>根据对数据流程图的分析，可将业务处理过程划分不同任务。 一个任务指为完成某一特定处理功能的相对独立的操作序列。格式如下：</p><table><thead><tr><th style="text-align:center">任务ID</th><th style="text-align:center">名称</th><th style="text-align:center">功能</th><th style="text-align:center">类型</th><th style="text-align:center">主人</th><th style="text-align:center">用户</th><th style="text-align:center">执行日期</th><th style="text-align:center">频率</th><th style="text-align:center">操作过程</th><th>备注</th></tr></thead><tbody><tr><td style="text-align:center"></td></tr></tbody></table><p>类型：输入、查询、制表、统计、修改、删除等</p><p>2）数据操作特征表<br>数据操作特征表用来描述任务和数据之间的关系，包括不同任务对数据执行不同操作的频率。一条任务或数据分类表须建立对应的操作特征表。格式如下：</p><table><thead><tr><th style="text-align:center">任务ID</th><th style="text-align:center">数据ID</th><th style="text-align:center">建立</th><th style="text-align:center">查询</th><th style="text-align:center">插入</th><th style="text-align:center">修改</th><th style="text-align:center">删除</th><th style="text-align:center">数据量</th></tr></thead><tbody><tr><td style="text-align:center"></td></tr></tbody></table><h5 id="数据约束"><a href="#数据约束" class="headerlink" title="数据约束"></a>数据约束</h5><p>数据约束指使用数据时的特殊要求。主要有四个方面：</p><ol><li>数据的安全保密性，针对不同类型数据的操作权限。</li><li>数据完整性，指数据正确性的约束和验证准则，及一致性保护的要求</li><li>响应时间，主要指某些特点应用要求的数据存取时间限制</li><li>数据恢复，主要指转储及恢复的时机与范围等</li></ol><h4 id="编写需求分析报告"><a href="#编写需求分析报告" class="headerlink" title="编写需求分析报告"></a>编写需求分析报告</h4><p>需求分析报告要求包括6个方面（数据库的应用功能目标（明确数据库应用范围及应达到的应用处理功能）、标明不同用户视图范围）、应用处理过程需求说明、数据字典、数据量、数据约束：</p><h4 id="需求说明"><a href="#需求说明" class="headerlink" title="需求说明"></a>需求说明</h4><ol><li>要求有数据流程图，反映应用部门原始业务处理的工作流程</li><li>任务分类表，标明不同任务的功能及使用状况</li><li>数据库特征表，标明任务和数据间的联系及不同数据的不同澳洲特征与执行频率</li><li>操作过程说明书，根据流程图、任务分类表及数据特征表等，标明各个任务的主要逻辑执行步骤</li></ol><h4 id="数据字典"><a href="#数据字典" class="headerlink" title="数据字典"></a>数据字典</h4><p>数据字典是DBS中存储三级结构定义的数据库，通常指数据库系统中各类数据详细描述的集合。功能是存储和检索各种数据描述（元数据），提供对各类数据的集中管理，是一种数据分析、系统设计和管理的有力工具。</p><p>数据字典包括数据分类表、数据元素表和各类原始资料（所有单据、报表、文件及设计所需的原始资料，并根据数据分类表的数据ID统一分类编号）。</p><h3 id="概念结构设计"><a href="#概念结构设计" class="headerlink" title="概念结构设计"></a>概念结构设计</h3><p>概念设计结构是在需求分析中产生的需求分析报告基础上按照特定的方法设计满足应用需求的用户信息结构，通常称为概念模型</p><p>概念模型独立于任何软件硬件，主要目标是最大限度的满足应用需求，完全不顾忌软件硬件的限制，尤其是DBMS 的限制，它是一个符合用户要求的趋于理想化的信息结构，常用方法有实体分析法（自顶向下）和属性综合法（自顶向上）</p><h3 id="逻辑结构设计"><a href="#逻辑结构设计" class="headerlink" title="逻辑结构设计"></a>逻辑结构设计</h3><p>逻辑模型是将概念模型转换为等价的、并为特定 DBMS 所支持数据模型的结构。主要有层次、网状、关系模型</p><h4 id="逻辑模型的输入与输出信息"><a href="#逻辑模型的输入与输出信息" class="headerlink" title="逻辑模型的输入与输出信息"></a>逻辑模型的输入与输出信息</h4><p>逻辑模型是在需求分析与概念模型的基础上进行的，主要提供如下输入信息：</p><ol><li>独立于特定 DBMS 的概念模型。</li><li>有关响应时间、安全保密性、数据完整性及恢复方面的要求说明，包括数据的一致性的规则说明。</li><li>数据量及使用频率</li><li>特定 DBMS 特性，包括其支持的数据模型及数据定义语言的说明。</li></ol><p>输出信息：</p><ol><li>一个特定 DBMS 支持的模式（概念模式）</li><li>一个或多个外部视图（子模式）</li><li>物理设计说明，主要有存入数据库中的数据量、使用频率及响应时间要求</li><li>程序设计说明，在需求分析的基础上，根据逻辑模型，编制各程序名、执行逻辑步、存取数据的名、顺序及操作特征（读、写、改、删）的说明。</li></ol><h4 id="逻辑结构设计的步骤"><a href="#逻辑结构设计的步骤" class="headerlink" title="逻辑结构设计的步骤"></a>逻辑结构设计的步骤</h4><pre class="mermaid">graph LRA(概念设计) --> B(模型转换)B --> C(子模型设计)B --> D(应用程序设计说明)C --> E(设计评价)D --> EE --> F(物理设计)</pre><ol><li>模型转换：将概念模型等价转换为特定 DBMS 支持的关系、层次或网站模型</li><li>子模式设计的目标是抽取或导出模式的子集，以构造不同用户使用的局部数据逻辑结构</li><li>应用程序说明是为可实际运行的应用程序设计提供依据与指导，作为设计评价的基础</li><li>设计评价任务是分析并检验模式及子模式的正确性与合理性。</li></ol><h3 id="物理设计"><a href="#物理设计" class="headerlink" title="物理设计"></a>物理设计</h3><p>物理设计指对于一个给定的数据库逻辑结构，研究并构造物理结构的过程，主要是确定数据库在存储设备上的存储结构及存储方法， 因 DBMS 不同可能包括建立索引和聚集等待。</p><h3 id="数据库实施"><a href="#数据库实施" class="headerlink" title="数据库实施"></a>数据库实施</h3><p>本阶段需要完成 加载数据、应用程序设计和数据库试的运行工作</p><p>加载数据：将符合要求的初始数据装载到数据库中，包括数据的收集、分类、整理校验和输入等过程</p><h3 id="数据库运行和维护"><a href="#数据库运行和维护" class="headerlink" title="数据库运行和维护"></a>数据库运行和维护</h3><p>经过试运行后，确认系统无故障或暂未发现故障时，系统才可投入生成实际中运行，随着应用的深入和拓展，可能会暴露原未发现的问题，也有可能对数据的不断增、删、改使系统的物理结构变坏或存取效率下降，或者需要拓展应用功能，这些都需要开发人员做好维护工作。</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;概叙&quot;&gt;&lt;a href=&quot;#概叙&quot; class=&quot;headerlink&quot; title=&quot;概叙&quot;&gt;&lt;/a&gt;概叙&lt;/h2&gt;&lt;blockquote&gt;
&lt;p&gt;针对具体的应用场景，使用现有的 DBMS 构建适合的数据库模式，建立数据库及其应用系统，使之能有效的收集、存储、操
      
    
    </summary>
    
      <category term="Database basis" scheme="https://owen027.github.io/categories/Database-basis/"/>
    
    
      <category term="database design" scheme="https://owen027.github.io/tags/database-design/"/>
    
  </entry>
  
  <entry>
    <title>关系数据库的规范化理论</title>
    <link href="https://owen027.github.io/2019/09/19/normalization_theory/"/>
    <id>https://owen027.github.io/2019/09/19/normalization_theory/</id>
    <published>2019-09-19T12:00:02.000Z</published>
    <updated>2019-12-25T13:34:08.622Z</updated>
    
    <content type="html"><![CDATA[<h2 id="概叙"><a href="#概叙" class="headerlink" title="概叙"></a>概叙</h2><p>规范化理论研究的是关系模式中各属性间的依赖关系及对其概念性模式性能的影响，它提供了判断关系模式优劣的理论标准，能帮助数据库设计人员预测可能出现的问题。</p><p>规范化理论主要应用于数据库设计中的概念设计阶段。</p><h2 id="关系模式中可能存在的冗余或异常问题"><a href="#关系模式中可能存在的冗余或异常问题" class="headerlink" title="关系模式中可能存在的冗余或异常问题"></a>关系模式中可能存在的冗余或异常问题</h2><p>关系模式可能存在如下问题：</p><ul><li>数据冗余</li></ul><p>数据冗余指同一数据被反复存储的情况。如在一个供应商关系模式中，一个供应商每供应一种货物，其地址就存储一次，如果供应成千上万种货物，地址就会反复成千上完成。</p><ul><li><p>更新异常<br>数据冗余将导致存储空间的浪费和潜 在数据不一致性及修改麻烦问题。如供应1000种货物的供应商的地址信息发生变化，那么需要对这些供应商的地址进行逐一修改，这样就有可能在一个元组中修改了地址，而没修改该另一个元组中同一供应商的地址，从而导致与实际情况不相符</p></li><li><p>插入异常<br>插入异常指应该插入到数据库中的数据不能只需插入操作的情形。</p></li><li><p>删除异常<br>数据的删除操作异常指不应该删除的数据被删除的情形。</p></li></ul><p>产生上述问题的原因，及消除这些问题的方法，都与数据库依赖的概念密切相关。数据依赖是可以作为关系模式的取值的任何一个关系所必须满足的一种约束条件，是通过一个关系中各个元组的某些属性值之间的相等与否体现出来的相互关系。</p><h2 id="函数依赖与关键字"><a href="#函数依赖与关键字" class="headerlink" title="函数依赖与关键字"></a>函数依赖与关键字</h2><p>函数依赖指关系中属性间的对应关系</p><h3 id="定义"><a href="#定义" class="headerlink" title="定义"></a>定义</h3><p>设R 为任一给定关系，如果对于 R 中属性 X 的每个值，R 中的属性 Y 只有唯一值与之对应，则称 X 函数决定 Y （Y 函数依赖于 X） 记作 $X\to Y$。 X称为决定因素<br><strong>example:</strong><br><strong>表 T1</strong></p><table><thead><tr><th style="text-align:center">学号（SNO）</th><th style="text-align:center">姓名（SNAME）</th><th style="text-align:center">性别(SSEX)</th><th style="text-align:center">宿舍(SROOM)</th></tr></thead><tbody><tr><td style="text-align:center">0001</td><td style="text-align:center">张三</td><td style="text-align:center">男</td><td style="text-align:center">N101</td></tr><tr><td style="text-align:center">0002</td><td style="text-align:center">王二</td><td style="text-align:center">男</td><td style="text-align:center">N101</td></tr><tr><td style="text-align:center">0003</td><td style="text-align:center">李梅</td><td style="text-align:center">女</td><td style="text-align:center">C101</td></tr></tbody></table><p>T1中存在如下函数依赖：<br>$SNO\to SName$<br>$SNO\to SSEX$<br>$SNO\to SROOM$</p><p>T1 中的函数依赖关系仅当SNO作为决定因素时存在</p><label>函数依赖是针对关系的所有元组，只要有一个元组的属性值不满足函数依赖的定义，则相对应的依赖就不成立。</label><h3 id="完全函数依赖"><a href="#完全函数依赖" class="headerlink" title="完全函数依赖"></a>完全函数依赖</h3><p>设 R 为任一给定定关系，X、Y 为其属性集， 若$X\to Y$,且 X 中的任一真子集 $X^{‘}$都有 Y 函数不依赖于 $X^{‘}$，则 Y 完全依赖于 X</p><p><strong>Example：</strong></p><p><strong>表 T2</strong></p><table><thead><tr><th style="text-align:center">学号（SNO）</th><th style="text-align:center">课程编号（CNO）</th><th style="text-align:center">课程名（CTITLE）</th><th style="text-align:center">授课老师（INAME）</th><th style="text-align:center">成绩（GRADE）</th></tr></thead><tbody><tr><td style="text-align:center">0001</td><td style="text-align:center">201</td><td style="text-align:center">语</td><td style="text-align:center">张三</td><td style="text-align:center">80</td></tr><tr><td style="text-align:center">0002</td><td style="text-align:center">202</td><td style="text-align:center">数</td><td style="text-align:center">李四</td><td style="text-align:center">90</td></tr><tr><td style="text-align:center">0003</td><td style="text-align:center">203</td><td style="text-align:center">英</td><td style="text-align:center">王五</td><td style="text-align:center">60</td></tr></tbody></table><p>T2 中，函数依赖：$（SNO,CNO）\to GRADE$ ，它为完全函数依赖。因为其中单个属性 SNO/CNO 都不能单独决定GRADE</p><h3 id="部分函数依赖"><a href="#部分函数依赖" class="headerlink" title="部分函数依赖"></a>部分函数依赖</h3><p>设 R 为任一给定关系， X、Y 为其属性集合，若$X\to Y$,且 X 中存在某个真子集 $X^{‘}$满足  $X^{‘}\to Y$  ，则 Y 部分函数依赖于 X。</p><p>T1 中 函数依赖$（SNO,SNAME）\to SSEX$,而其中$SNO\to SSEX$ ,那么 SSEX部分函数依赖于（SNO,SNAME）</p><h3 id="传递函数依赖"><a href="#传递函数依赖" class="headerlink" title="传递函数依赖"></a>传递函数依赖</h3><p>设 R 为任一给定关系， X、Y、Z为不同属性子集，若$X\to Y$,X函数不依赖于Y，$Y\to Z$,则 $X\to Z$,即 Z传递函数依赖于X。</p><p><strong>Example：</strong></p><p>有一个关系模式 T2（BNO(书号),PNAME（出版社名）,PADDRESS（出版社地址））,一种书对应一个唯一的书号，且只能为某一出版社出版；<br>一个出版社只有唯一名称和地址，但一个出版社可出版多种书。<br>那么该关系中存在函数依赖：$BNO \to PNAME$, $PNAME\to PADDRESS$, PNAME函数不依赖于BNO，所以$BNO\to PADDRESS$</p><h3 id="严格的关键字定义"><a href="#严格的关键字定义" class="headerlink" title="严格的关键字定义"></a>严格的关键字定义</h3><p>设 R 为任一给定关系，U 为所有属性集合， X 为 U 的子集，若 U 完全依赖于 X，则 X 为 R 的候选关键字。</p><h2 id="范式与关系规范化过程"><a href="#范式与关系规范化过程" class="headerlink" title="范式与关系规范化过程"></a>范式与关系规范化过程</h2><p>关系数据库中的关系需要满足一定的要求，不同程度的要求称为不同的范式（Normal Form,NF）。</p><h3 id="第一范式-1FN"><a href="#第一范式-1FN" class="headerlink" title="第一范式 1FN"></a>第一范式 1FN</h3><p>设 R 为任一给定关系， R 中每个列和行的交点处的取值都是不可再分的基本元素，则 R 为 1FN。 1FN是范式的最低要求,是一个不含重复组的关系，不存在嵌套结构。</p><p><strong>表 T3 </strong></p><table><caption>学生选课信息表</caption><thead> <tr>    <th>SNO</th>    <th>CNO</th>    <th>CTITLE</th>    <th>INAME</th>    <th>IPLACE</th>    <th>GRADE</th> </tr></thead><tbody><tr><td>1027</td><td>C01</td><td>操作系统</td><td>王五</td><td>东01</td><td>100</td></tr><tr><td>1028</td><td>C02</td><td>数据库</td><td>刘备</td><td>东02</td><td>91</td></tr><tr><td rowspan="2">1029</td><td>C01</td><td>操作系统</td><td>王五</td><td>东01</td><td>88</td></tr><tr><td>C03</td><td>人工智能</td><td>曹操</td><td>东03</td><td>100</td></tr><tr><td>1030</td><td>C04</td><td>C语言</td><td>刘备</td><td>东02</td><td>97</td></tr></tbody></table><p>T3关系是一个非归范式关系，因为 SNO属性中 1029出现重复的组，可将T3转化为 1FN</p><p><strong>T4 1FN</strong></p><table><thead><tr><th style="text-align:center">SNO</th><th style="text-align:center">CNO</th><th style="text-align:center">CTITLE</th><th style="text-align:center">INAME</th><th style="text-align:center">IPLACE</th><th style="text-align:center">GRADE</th></tr></thead><tbody><tr><td style="text-align:center">1027</td><td style="text-align:center">C01</td><td style="text-align:center">操作系统</td><td style="text-align:center">王五</td><td style="text-align:center">东01</td><td style="text-align:center">100</td></tr><tr><td style="text-align:center">1028</td><td style="text-align:center">C02</td><td style="text-align:center">数据库</td><td style="text-align:center">刘备</td><td style="text-align:center">东02</td><td style="text-align:center">91</td></tr><tr><td style="text-align:center">1029</td><td style="text-align:center">C01</td><td style="text-align:center">操作系统</td><td style="text-align:center">王五</td><td style="text-align:center">东01</td><td style="text-align:center">88</td></tr><tr><td style="text-align:center">1029</td><td style="text-align:center">C03</td><td style="text-align:center">人工智能</td><td style="text-align:center">曹操</td><td style="text-align:center">东03</td><td style="text-align:center">100</td></tr><tr><td style="text-align:center">1030</td><td style="text-align:center">C04</td><td style="text-align:center">C语言</td><td style="text-align:center">刘备</td><td style="text-align:center">东02</td><td style="text-align:center">97</td></tr></tbody></table><h3 id="第二范式-2FN"><a href="#第二范式-2FN" class="headerlink" title="第二范式 2FN"></a>第二范式 2FN</h3><p>设 R 为任一给定关系，如果 R 为 1FN，且所有非主属性都完全函数依赖于候选关键字，则 R为 2FN。</p><p><strong>Example：</strong></p><p>T4 中存在着冗余度高、插入和删除操作异常等问题，CTITLE 中都某一课程被多人选修，那么对应的授课老师和地址将反复存储（数据冗余）；若新增一门课程，而没人任何同学选修，则这们课程将无法存储（插入异常）；如果将最后一元组删除，同时会删除C语言这门课程及相关老师和地址等信息（删除异常）；</p><p><span class="red">存在这些问题的原因在于仅有非主属性 GEEADE 完全 依赖于（SNO,CNO）,其他非主属性都只依赖于 CNO ，对于主键（SNO,CNO）为部分依赖</span></p><p><span class="skyblue">通过分解 T4 将部分函数依赖分解成完全函数依赖，得到 2FN</span><br><strong>T4.1</strong></p><table><thead><tr><th style="text-align:center">SNO</th><th style="text-align:center">CNO</th><th style="text-align:center">GRADE</th></tr></thead><tbody><tr><td style="text-align:center">1027</td><td style="text-align:center">C01</td><td style="text-align:center">100</td></tr><tr><td style="text-align:center">1028</td><td style="text-align:center">C02</td><td style="text-align:center">91</td></tr><tr><td style="text-align:center">1029</td><td style="text-align:center">C01</td><td style="text-align:center">88</td></tr><tr><td style="text-align:center">1029</td><td style="text-align:center">C03</td><td style="text-align:center">100</td></tr><tr><td style="text-align:center">1030</td><td style="text-align:center">C04</td><td style="text-align:center">97</td></tr></tbody></table><p><strong>T4.2</strong></p><table><thead><tr><th style="text-align:center">CNO</th><th style="text-align:center">CTITLE</th><th style="text-align:center">INAME</th><th style="text-align:center">IPLACE</th></tr></thead><tbody><tr><td style="text-align:center">C01</td><td style="text-align:center">操作系统</td><td style="text-align:center">王五</td><td style="text-align:center">东01</td></tr><tr><td style="text-align:center">C02</td><td style="text-align:center">数据库</td><td style="text-align:center">刘备</td><td style="text-align:center">东02</td></tr><tr><td style="text-align:center">C03</td><td style="text-align:center">人工智能</td><td style="text-align:center">曹操</td><td style="text-align:center">东03</td></tr><tr><td style="text-align:center">C04</td><td style="text-align:center">C语言</td><td style="text-align:center">刘备</td><td style="text-align:center">东02</td></tr></tbody></table><p>此时的 T4.2依然存在插入、删除操作及修改麻烦等异常问题。如:将一位新老师插入 T4.2表中，但这位老师暂无任何教学工作，因缺关键字 CNO的值而不能执行插入操作。</p><p><span class="red">原因在于：T4.2 关系中存在非主属性对主属性的传递函数依赖，须进一步分解。</span></p><h3 id="第三范式-3FN"><a href="#第三范式-3FN" class="headerlink" title="第三范式 3FN"></a>第三范式 3FN</h3><p>设 R 未任一给定关系， 如 R 未 2FN，且每一个非主属性都不传递依赖于候选关键字，则 R 为3FN。</p><p><strong>Example：</strong></p><p><span class="skyblue">通过分解 T4.2 将传递函数依赖分解成完全函数依赖，得到 3FN</span></p><p><strong>T4.2.1</strong></p><table><thead><tr><th style="text-align:center">CNO</th><th style="text-align:center">CTITLE</th><th style="text-align:center">INAME</th></tr></thead><tbody><tr><td style="text-align:center">C01</td><td style="text-align:center">操作系统</td><td style="text-align:center">王五</td></tr><tr><td style="text-align:center">C02</td><td style="text-align:center">数据库</td><td style="text-align:center">刘备</td></tr><tr><td style="text-align:center">C03</td><td style="text-align:center">人工智能</td><td style="text-align:center">曹操</td></tr><tr><td style="text-align:center">C04</td><td style="text-align:center">C语言</td><td style="text-align:center">刘备</td></tr></tbody></table><p><strong>T4.2.2</strong></p><table><thead><tr><th style="text-align:center">INAME</th><th style="text-align:center">IPLACE</th></tr></thead><tbody><tr><td style="text-align:center">王五</td><td style="text-align:center">东01</td></tr><tr><td style="text-align:center">刘备</td><td style="text-align:center">东02</td></tr><tr><td style="text-align:center">曹操</td><td style="text-align:center">东03</td></tr></tbody></table><h3 id="BCNF"><a href="#BCNF" class="headerlink" title="BCNF"></a>BCNF</h3><p>通常 3FN 大多数能解决插入和删除操作异常的问题，数据冗余也能得到有效控制。为解决3FN有时出现的操作问题，R.F.Boyce和E.F.Codd 提出 改进范式 BCNF</p><p>设 R 为任一给定关系，X、Y 为属性集，F为其函数依赖集， 若 R 为 3NF，且 F 中所有函数依赖 $X\to Y$ (Y 不属于 X)中 X 必须包含候选关键字，则 R 为 BCNF。<span class="red"> 即 R中每一函数依赖的决定因素X（可为单一属性或组合属性） 都包含 候选关键字，则 R 为 BCNF。</span></p><p>当所有属性集合为候选关键字时依然会存在操作异常和数据冗余等问题<br><strong>Example：</strong></p><p><strong>表  T5</strong></p><table><thead><tr><th style="text-align:center">SNO</th><th style="text-align:center">CTITLE</th><th style="text-align:center">TNAME</th></tr></thead><tbody><tr><td style="text-align:center">S01</td><td style="text-align:center">操作系统</td><td style="text-align:center">王五</td></tr><tr><td style="text-align:center">S02</td><td style="text-align:center">人工智能</td><td style="text-align:center">曹操</td></tr><tr><td style="text-align:center">S02</td><td style="text-align:center">数据库</td><td style="text-align:center">刘备</td></tr><tr><td style="text-align:center">S03</td><td style="text-align:center">数据库</td><td style="text-align:center">孙权</td></tr></tbody></table><p>T5中新增一门课程和一位老师的数据时，须至少有一位学生选修该课且指导老师已被分配才能插入T5中。</p><p><span class="skyblue">此时可通过公共的函数依赖将 T5分解位为 T5.1 和 T5.2</span></p><p><strong>T5.1</strong></p><table><thead><tr><th style="text-align:center">SNO</th><th style="text-align:center">TNAME</th></tr></thead><tbody><tr><td style="text-align:center">S01</td><td style="text-align:center">王五</td></tr><tr><td style="text-align:center">S02</td><td style="text-align:center">曹操</td></tr><tr><td style="text-align:center">S02</td><td style="text-align:center">刘备</td></tr><tr><td style="text-align:center">S03</td><td style="text-align:center">孙权</td></tr></tbody></table><p><strong>T5.2</strong></p><table><thead><tr><th style="text-align:center">TNAME</th><th style="text-align:center">CTITLE</th></tr></thead><tbody><tr><td style="text-align:center">王五</td><td style="text-align:center">操作系统</td></tr><tr><td style="text-align:center">曹操</td><td style="text-align:center">数据库</td></tr><tr><td style="text-align:center">刘备</td><td style="text-align:center">人工智能</td></tr><tr><td style="text-align:center">孙权</td><td style="text-align:center">C语言</td></tr></tbody></table>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;概叙&quot;&gt;&lt;a href=&quot;#概叙&quot; class=&quot;headerlink&quot; title=&quot;概叙&quot;&gt;&lt;/a&gt;概叙&lt;/h2&gt;&lt;p&gt;规范化理论研究的是关系模式中各属性间的依赖关系及对其概念性模式性能的影响，它提供了判断关系模式优劣的理论标准，能帮助数据库设计人员预测可能出
      
    
    </summary>
    
      <category term="Database basis" scheme="https://owen027.github.io/categories/Database-basis/"/>
    
    
      <category term="normalization theroy" scheme="https://owen027.github.io/tags/normalization-theroy/"/>
    
  </entry>
  
  <entry>
    <title>关系数据模型要素三 关系完整性约束</title>
    <link href="https://owen027.github.io/2019/09/19/integrity_constraint_of_relational/"/>
    <id>https://owen027.github.io/2019/09/19/integrity_constraint_of_relational/</id>
    <published>2019-09-19T11:18:07.000Z</published>
    <updated>2019-12-25T13:34:08.618Z</updated>
    
    <content type="html"><![CDATA[<h2 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h2><p> 数据完整性指数据库中数据的<strong>正确性、相容性和一致性</strong>。包括现实世界中的应用需求的完整性。数据的完整性由完整性规则来定义。</p><p>关系模型的完整性规则是对关系的某种约束，提供一种手段来保证用户对数据库的修改时不会破坏数据库中数据的完整性。保证数据是有意义的。</p><p>关系模型分三类约束：实体完整性约束、参照完整性约束和用户自定义完整性约束。 <strong>前两者是必须满足的条件，称作关系的两个不变性</strong>。由DBMS自动支持</p><h3 id="实体完整性约束（Entity-Integrity-Constraint）"><a href="#实体完整性约束（Entity-Integrity-Constraint）" class="headerlink" title="实体完整性约束（Entity Integrity Constraint）"></a>实体完整性约束（Entity Integrity Constraint）</h3><p>此约束指关系的主属性，主码不能为空，在关系数据库系统中，一个关系对应一张表，实体完整性指在数据存储数据的表中，主键/码不能取控值 NULL</p><h3 id="参照完整性约束-（Referential-Integrity-Constraint）"><a href="#参照完整性约束-（Referential-Integrity-Constraint）" class="headerlink" title="参照完整性约束 （Referential Integrity Constraint）"></a>参照完整性约束 （Referential Integrity Constraint）</h3><p>现实世界中实体之间往往存在某种联系，在关系模型中这种联系通过关系来描述</p><blockquote><p>参照完整性约束就说定义外码和主码之间的引用规则，是对关系间引用数据的一种限制。若属性（属性组）X 是基本关系 R 的外码，它与基本关系 S 的主码 Y 对应，那么 R 中每个元组在 F 上的值要么取 NULL，要么等于 S中对应元组的主码值。 R 和 S 可以是不同的关系，也可以是同一关系。</p></blockquote><p>如：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">教师（职工号，姓名，性别，系编号）</span><br><span class="line">系（系编号，系名，办公地点）</span><br></pre></td></tr></table></figure></p><p>上述两个关系之间存在属性的引用，系编码既是 <code>系</code> 关系的主码又是<code>教师</code>关系的外部码。那么<code>教师</code> 关系中系编码属性的取值需要参照 <code>系</code>关系中系编码的值或为 NULL。</p><h3 id="用户定义完整性约束-（User-defined-Integrity-constraint）"><a href="#用户定义完整性约束-（User-defined-Integrity-constraint）" class="headerlink" title="用户定义完整性约束 （User-defined Integrity constraint）"></a>用户定义完整性约束 （User-defined Integrity constraint）</h3><p>此约束针对某一应用环境的完整性约束条件，反映了某一具体应用所涉及的数据应满足的要求。关系模型提供定义和检验的机制，此类规则一般在建立数据库表的同时进行定义，如果某些条件未建立在库表一级，则应在各个模块的具体编程中通过程序进行检查和控制。</p><h3 id="关系模型完整性约束检验-重点"><a href="#关系模型完整性约束检验-重点" class="headerlink" title="关系模型完整性约束检验   重点"></a>关系模型完整性约束检验   <label style="color:red; ">重点</label></h3><p>在对数据库进行修改时须检验是否满足对上述三类完整性约束</p><h4 id="插入操作"><a href="#插入操作" class="headerlink" title="插入操作"></a>插入操作</h4><p>首先检查实体完整性约束，检查插入行在主码属性上的值是否已存在，不存在，可以执行插入，否则不可插入。再检查参照完整性约束，如果是向被参照关系插入，则不需要考虑此约束；如果向参照关系插入，则检查插入行在外码属性上的值是否已在相应被参照关系的主码属性中存在，存在，可插入，否则不可插入，或者将插入行的外码属性的值改为NULL，再插入，最后检查自定义完整性约束，包括数据的类性、精度、取值范围、是否允许空值、是否有默认值等，满足即可执行插入操作，否则给出错误信息。</p><h4 id="删除操作"><a href="#删除操作" class="headerlink" title="删除操作"></a>删除操作</h4><p>一般只需对被参照关系检查参照完整性约束。如果主键被引用则不可删，或将参照关系中对应行的外码属性改为为NULL，再删除</p><h4 id="更新操作"><a href="#更新操作" class="headerlink" title="更新操作"></a>更新操作</h4><p>结合删除 和 插入操作，先删除再插入。</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;概述&quot;&gt;&lt;a href=&quot;#概述&quot; class=&quot;headerlink&quot; title=&quot;概述&quot;&gt;&lt;/a&gt;概述&lt;/h2&gt;&lt;p&gt; 数据完整性指数据库中数据的&lt;strong&gt;正确性、相容性和一致性&lt;/strong&gt;。包括现实世界中的应用需求的完整性。数据的完整性由完整性
      
    
    </summary>
    
      <category term="Database basis" scheme="https://owen027.github.io/categories/Database-basis/"/>
    
    
      <category term="integrity constraint of relational" scheme="https://owen027.github.io/tags/integrity-constraint-of-relational/"/>
    
  </entry>
  
  <entry>
    <title>关系数据模型要素二 （关系操作集合）</title>
    <link href="https://owen027.github.io/2019/09/18/relational_operation/"/>
    <id>https://owen027.github.io/2019/09/18/relational_operation/</id>
    <published>2019-09-18T11:15:49.000Z</published>
    <updated>2020-05-16T11:07:19.599Z</updated>
    
    <content type="html"><![CDATA[ <link href="/static/css/relation_data_model.css" rel="stylesheet" type="text/css"><h3 id="基本的关系操作"><a href="#基本的关系操作" class="headerlink" title="基本的关系操作"></a>基本的关系操作</h3><p>增（插入 Insert）、删(Delete)、改(Update)、查（Query）。关系的查询表达能力是关系操作最主要的部分。查又可分为选择、投影、连接、除、并、差、交、笛卡尔积。集合操作方式（操作的对象和结果都是集合）。又称为一次一集合（set-at-a-time）</p><h3 id="关系数据语言的分类"><a href="#关系数据语言的分类" class="headerlink" title="关系数据语言的分类"></a>关系数据语言的分类</h3><p>通过关系语言实现关系操作。<label>它高度非过程化</label>用户不必请求DBM为其建立特殊的存取路径，由 DBMS 的优化机制来完成。</p><ol><li>代数方式：主要有关系代数，通过对关系的操作来表达查询要求</li><li>逻辑方式：主要有关系演算，是用谓词来表达查询要求，关系演算又按谓词变元的基本对象（元组变量或域变量），分为元组关系演算和域关系演算。</li><li>介于前两者之间的结构化查询语言（Structured Query Language,SQL）：SQL具有丰富的查询功能、数据定义和数据控制功能。集查询、数据定义语言（DDL）、数据操作语言（DML）和数据控制语言（Data Control Language, DCL）于一体；是关系数据库的标准语言。</li></ol><h3 id="关系代数"><a href="#关系代数" class="headerlink" title="关系代数"></a>关系代数</h3><p>关系代数是关系操作语言中的传统表示方式，以集合代数为基础发展而来。任何一种操作都是将一定的操作符作用域一定的操作对象上，得到预期的操作结果。</p><p><label>操作包含三大要素：操作对象、操作符、操作结果。</label>而对象和结果均为关系。关系代数直接应用关系的运算来表达操作的目的，运算符包括集合运算符和专门的关系运算符。</p><table cellpadding="5" id="operator"><caption>关系代数的运算符</caption><thead><th colspan="2">运算符</th><th>含义</th></thead><tbody><tr><td rowspan="4">集合运算符</td><td>∪</td><td>并</td></tr><tr><td>−</td><td>差</td></tr><tr><td>∩</td><td>交</td></tr><tr><td>×</td><td>笛卡尔积</td></tr><tr><td rowspan="4">专门的关系运算符</td><td>σ</td><td>选择</td></tr><tr><td>π</td><td>投影</td></tr><tr><td>⋈</td><td>连接</td></tr><tr><td>÷</td><td>除</td></tr><tr><td rowspan="6">比较操作符</td><td> > </td><td>大于</td></tr><tr><td>≥</td><td>大于等于</td></tr><tr><td> < </td><td>小于</td></tr><tr><td>≤</td><td>小于等于</td></tr><tr><td>＝</td><td>等于</td></tr><tr><td>≠</td><td>不等于</td></tr><tr><td rowspan="3">比较操作符</td><td> ¬ </td><td>非</td></tr><tr><td>∧</td><td>与</td></tr><tr><td> ∨ </td><td>或</td></tr></tbody></table><p>关系代数操作经过有限次复合的式子称为关系代数操作表达式（关系代数表达式），可使用表达式表示所需要执行的各种数据查询和修改处理，所有关系代数是一种抽象的查询语言，通过对关系的操作来表达查询。</p><p>按运算符分类，关系代数操作可分为：传统的集合运算和专门的关系运算</p><h3 id="集合运算"><a href="#集合运算" class="headerlink" title="集合运算"></a>集合运算</h3><p>传统集合运算是二目运算，将关系看成元组集合，运算从行的角度来进行，具有 并、差、交、迪卡尔积四种运算。</p><p><strong>Example：</strong></p><p><strong>表 T1</strong></p><table><thead><tr><th style="text-align:center">学号（SNO）</th><th style="text-align:center">姓名（SNAME）</th><th style="text-align:center">性别(SSEX)</th><th style="text-align:center">宿舍(SROOM)</th></tr></thead><tbody><tr><td style="text-align:center">0001</td><td style="text-align:center">张三</td><td style="text-align:center">男</td><td style="text-align:center">N101</td></tr><tr><td style="text-align:center">0002</td><td style="text-align:center">王二</td><td style="text-align:center">男</td><td style="text-align:center">N101</td></tr><tr><td style="text-align:center">0003</td><td style="text-align:center">李梅</td><td style="text-align:center">女</td><td style="text-align:center">C101</td></tr></tbody></table><p><strong>表 T2</strong></p><table><thead><tr><th style="text-align:center">学号（SNO）</th><th style="text-align:center">姓名（SNAME）</th><th style="text-align:center">性别(SSEX)</th><th style="text-align:center">宿舍(SROOM)</th></tr></thead><tbody><tr><td style="text-align:center">0004</td><td style="text-align:center">刘八</td><td style="text-align:center">男</td><td style="text-align:center">D101</td></tr><tr><td style="text-align:center">0005</td><td style="text-align:center">赵二</td><td style="text-align:center">男</td><td style="text-align:center">B201</td></tr><tr><td style="text-align:center">0003</td><td style="text-align:center">李梅</td><td style="text-align:center">女</td><td style="text-align:center">C101</td></tr></tbody></table><h4 id="并（UNION）"><a href="#并（UNION）" class="headerlink" title="并（UNION）"></a>并（UNION）</h4><p>表T1 和 表T2 使用并运算产生一个新表T3，（T3 = T1 ∪ T2）它是由T1和T2所有不同元组所组成，且 T1和T2属性个数、值域相同。下表为 T1 ∪ T2的结果<br><strong>表 T3</strong></p><table><thead><tr><th style="text-align:center">学号（SNO）</th><th style="text-align:center">姓名（SNAME）</th><th style="text-align:center">性别(SSEX)</th><th style="text-align:center">宿舍(SROOM)</th></tr></thead><tbody><tr><td style="text-align:center">0001</td><td style="text-align:center">张三</td><td style="text-align:center">男</td><td style="text-align:center">N101</td></tr><tr><td style="text-align:center">0002</td><td style="text-align:center">王二</td><td style="text-align:center">男</td><td style="text-align:center">N101</td></tr><tr><td style="text-align:center">0003</td><td style="text-align:center">李梅</td><td style="text-align:center">女</td><td style="text-align:center">C101</td></tr><tr><td style="text-align:center">0004</td><td style="text-align:center">刘八</td><td style="text-align:center">男</td><td style="text-align:center">D101</td></tr><tr><td style="text-align:center">0005</td><td style="text-align:center">赵二</td><td style="text-align:center">男</td><td style="text-align:center">B201</td></tr></tbody></table><h4 id="差（DIFFERENCE）"><a href="#差（DIFFERENCE）" class="headerlink" title="差（DIFFERENCE）"></a>差（DIFFERENCE）</h4><p>表T1 和 表T2 使用差运算产生一个新表T4，（T4 = T1 - T2）它有T1的所有元组但不包含T2的元组，且 T1和T2属性个数、值域必须相同。下表为 T1 - T2的结果</p><p><strong>表 T4</strong></p><table><thead><tr><th style="text-align:center">学号（SNO）</th><th style="text-align:center">姓名（SNAME）</th><th style="text-align:center">性别(SSEX)</th><th style="text-align:center">宿舍(SROOM)</th></tr></thead><tbody><tr><td style="text-align:center">0001</td><td style="text-align:center">张三</td><td style="text-align:center">男</td><td style="text-align:center">N101</td></tr><tr><td style="text-align:center">0002</td><td style="text-align:center">王二</td><td style="text-align:center">男</td><td style="text-align:center">N101</td></tr></tbody></table><h4 id="交（INTERSECTION）"><a href="#交（INTERSECTION）" class="headerlink" title="交（INTERSECTION）"></a>交（INTERSECTION）</h4><p>表T1 和 表T2 使用交运算产生一个新表T5，（T5 = T1 ∩ T2）它同时包含T1和T2相同的所有元组，且 T1和T2属性个数、值域必须相同，交运算可由差运算表示（T1∩T2 = T1-(T1-T2)）。下表为 T1 ∩ T2的结果</p><p><strong>表 T5</strong></p><table><thead><tr><th style="text-align:center">学号（SNO）</th><th style="text-align:center">姓名（SNAME）</th><th style="text-align:center">性别(SSEX)</th><th style="text-align:center">宿舍(SROOM)</th></tr></thead><tbody><tr><td style="text-align:center">0003</td><td style="text-align:center">李梅</td><td style="text-align:center">女</td><td style="text-align:center">C101</td></tr></tbody></table><h5 id="笛卡尔积（CARTESIAN-PRODUCT）"><a href="#笛卡尔积（CARTESIAN-PRODUCT）" class="headerlink" title="笛卡尔积（CARTESIAN PRODUCT）"></a>笛卡尔积（CARTESIAN PRODUCT）</h5><p>表T6 和 表T7 使用笛卡尔积运算产生一个新表T8，（T8 = T6 × T7）它是T6和T7的所有元组连接而成，即将两张表的元关系合并，且T6的每一元组都对应T7所有的元组<br>下表为 T6 × T7的结果</p><p><strong>表 T6</strong></p><table><thead><tr><th style="text-align:center">学号（SNO）</th><th style="text-align:center">姓名（SNAME）</th></tr></thead><tbody><tr><td style="text-align:center">0001</td><td style="text-align:center">张三</td></tr><tr><td style="text-align:center">0002</td><td style="text-align:center">王二</td></tr></tbody></table><p><strong>表 T7</strong></p><table><thead><tr><th style="text-align:center">课程号（CNO）</th><th style="text-align:center">课程名（CNAME）</th><th style="text-align:center">教室(SSEX)</th></tr></thead><tbody><tr><td style="text-align:center">1</td><td style="text-align:center">数据库</td><td style="text-align:center">C-101</td></tr><tr><td style="text-align:center">2</td><td style="text-align:center">操作系统</td><td style="text-align:center">C-102</td></tr></tbody></table><p><strong>表 T8</strong></p><table><thead><tr><th style="text-align:center">学号（SNO）</th><th style="text-align:center">姓名（SNAME）</th><th style="text-align:center">课程号（CNO）</th><th style="text-align:center">课程名（CNAME）</th><th style="text-align:center">教室(SSEX)</th></tr></thead><tbody><tr><td style="text-align:center">0001</td><td style="text-align:center">张三</td><td style="text-align:center">1</td><td style="text-align:center">数据库</td><td style="text-align:center">C-101</td></tr><tr><td style="text-align:center">0001</td><td style="text-align:center">张三</td><td style="text-align:center">2</td><td style="text-align:center">操作系统</td><td style="text-align:center">C-102</td></tr><tr><td style="text-align:center">0002</td><td style="text-align:center">王二</td><td style="text-align:center">1</td><td style="text-align:center">数据库</td><td style="text-align:center">C-101</td></tr><tr><td style="text-align:center">0002</td><td style="text-align:center">王二</td><td style="text-align:center">2</td><td style="text-align:center">操作系统</td><td style="text-align:center">C-102</td></tr></tbody></table><h3 id="专门的关系运算"><a href="#专门的关系运算" class="headerlink" title="专门的关系运算"></a>专门的关系运算</h3><p>此运算即涉及行，又涉及列，分为一元专门关系操作和二元专门关系操作</p><ul><li>一元关系操作：对单个关系进行垂直分解的投影运算和进行水平分解选择运算</li><li>二元关系操作：对两个关系进行操作，包括连运算和除运算</li></ul><h4 id="选择（SELECT）"><a href="#选择（SELECT）" class="headerlink" title="选择（SELECT）"></a>选择（SELECT）</h4><p>选择运算( $σ_F(R)$ )，F为条件表达式，R为指定的被运算关系名。 从指定关系中选取满足条件的若干元组组成一个新关系<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> 关系名 <span class="keyword">WHERE</span> 条件语句（表达式）</span><br></pre></td></tr></table></figure></p><p>条件语句：由常数、属性名或列名、比较操作符及逻辑操作符组成</p><p><strong>Example：</strong><br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> T8 <span class="keyword">WHERE</span> 姓名 = <span class="string">"张三"</span></span><br></pre></td></tr></table></figure></p><p><strong>表 T9</strong></p><table><thead><tr><th style="text-align:center">学号（SNO）</th><th style="text-align:center">姓名（SNAME）</th><th style="text-align:center">课程号（CNO）</th><th style="text-align:center">课程名（CNAME）</th><th style="text-align:center">教室(SSEX)</th></tr></thead><tbody><tr><td style="text-align:center">0001</td><td style="text-align:center">张三</td><td style="text-align:center">1</td><td style="text-align:center">数据库</td><td style="text-align:center">C-101</td></tr><tr><td style="text-align:center">0001</td><td style="text-align:center">张三</td><td style="text-align:center">2</td><td style="text-align:center">操作系统</td><td style="text-align:center">C-102</td></tr></tbody></table><h4 id="投影（PROJECTION）"><a href="#投影（PROJECTION）" class="headerlink" title="投影（PROJECTION）"></a>投影（PROJECTION）</h4><p>投影运算( $π_A(R)$ ), R为被运算关系，A为属性序列，从指定关系中选取指定的若干属性值组成新关系<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">PROJECTION 关系名 ( 属性名1, 属性名2 ,... )</span><br></pre></td></tr></table></figure></p><p>组成的新关系自动去重</p><p><strong>Example：</strong><br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">PROJECTION T8 (课程号,课程名)</span><br></pre></td></tr></table></figure></p><p><strong>表 T10</strong></p><table><thead><tr><th style="text-align:center">课程号（CNO）</th><th style="text-align:center">课程名（CNAME）</th></tr></thead><tbody><tr><td style="text-align:center">1</td><td style="text-align:center">数据库</td></tr><tr><td style="text-align:center">2</td><td style="text-align:center">操作系统</td></tr></tbody></table><h4 id="θ连接（JOIN）"><a href="#θ连接（JOIN）" class="headerlink" title="θ连接（JOIN）"></a>θ连接（JOIN）</h4><p>连接运算（$R\cfrac{⋈}{xθy}S$）,其中，R和S 代表两个不同的关系；<br>x 和 y 分别表示R中的第x列和S中的第y列属性；<br>θ表示比较运算符（&gt;、≥、&lt;、≤、=、≠）<br>从笛卡尔积 R × S 中选取R的第x列属性值与S的第y列属性值满足θ 的那些元组组成一个新关系。</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">JOIN 关系1 AND 关系2 WHERE 条件语句</span><br></pre></td></tr></table></figure><p>条件语句：由比较操作符和属性名或列名组成的表达式</p><ul><li>等值连接：θ值为 “=”，从R和S的笛卡尔积中选取 x、y 属性值相等的元组</li></ul><p><strong>Example：</strong></p><p><strong>表 T11</strong></p><table><thead><tr><th style="text-align:center">A</th><th style="text-align:center">B</th><th style="text-align:center">C</th></tr></thead><tbody><tr><td style="text-align:center">a</td><td style="text-align:center">b</td><td style="text-align:center">c</td></tr><tr><td style="text-align:center">d</td><td style="text-align:center">e</td><td style="text-align:center">f</td></tr></tbody></table><p><strong>表 T12</strong></p><table><thead><tr><th style="text-align:center">D</th><th style="text-align:center">E</th><th style="text-align:center">A</th></tr></thead><tbody><tr><td style="text-align:center">g</td><td style="text-align:center">h</td><td style="text-align:center">a</td></tr><tr><td style="text-align:center">b</td><td style="text-align:center">c</td><td style="text-align:center">d</td></tr></tbody></table><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">JOIN  T11 AND T12 WHERE C = E</span><br></pre></td></tr></table></figure><p><strong>T11 × T12</strong></p><table><thead><tr><th style="text-align:center">T11.A</th><th style="text-align:center">B</th><th style="text-align:center">C</th><th style="text-align:center">D</th><th style="text-align:center">E</th><th style="text-align:center">T12.A</th></tr></thead><tbody><tr><td style="text-align:center">a</td><td style="text-align:center">b</td><td style="text-align:center">c</td><td style="text-align:center">g</td><td style="text-align:center">h</td><td style="text-align:center">a</td></tr><tr><td style="text-align:center">a</td><td style="text-align:center">b</td><td style="text-align:center">c</td><td style="text-align:center">b</td><td style="text-align:center">c</td><td style="text-align:center">d</td></tr><tr><td style="text-align:center">d</td><td style="text-align:center">e</td><td style="text-align:center">f</td><td style="text-align:center">g</td><td style="text-align:center">h</td><td style="text-align:center">a</td></tr><tr><td style="text-align:center">d</td><td style="text-align:center">e</td><td style="text-align:center">f</td><td style="text-align:center">b</td><td style="text-align:center">c</td><td style="text-align:center">d</td></tr></tbody></table><p>等值结果为：</p><p><strong>表 T13</strong></p><table><thead><tr><th style="text-align:center">T11.A</th><th style="text-align:center">B</th><th style="text-align:center">C</th><th style="text-align:center">D</th><th style="text-align:center">E</th><th style="text-align:center">T12.A</th></tr></thead><tbody><tr><td style="text-align:center">a</td><td style="text-align:center">b</td><td style="text-align:center">c</td><td style="text-align:center">b</td><td style="text-align:center">c</td><td style="text-align:center">d</td></tr></tbody></table><ul><li>自然连接：是一种特殊的等值连接，要求两个关系中比较的分量必须是 <span style="color:red">相同的属性组，且结果中去除重复的属性列</span></li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">JOIN  T11 AND T12 WHERE A = A</span><br></pre></td></tr></table></figure><p><strong>表 T14</strong></p><table><thead><tr><th style="text-align:center">T11.A</th><th style="text-align:center">B</th><th style="text-align:center">C</th><th style="text-align:center">D</th><th style="text-align:center">E</th><th style="text-align:center">T12.A</th></tr></thead><tbody><tr><td style="text-align:center">a</td><td style="text-align:center">b</td><td style="text-align:center">c</td><td style="text-align:center">g</td><td style="text-align:center">h</td><td style="text-align:center">a</td></tr><tr><td style="text-align:center">d</td><td style="text-align:center">e</td><td style="text-align:center">f</td><td style="text-align:center">b</td><td style="text-align:center">c</td><td style="text-align:center">d</td></tr></tbody></table><p><strong>表 T14.2</strong></p><table><thead><tr><th style="text-align:center">A</th><th style="text-align:center">B</th><th style="text-align:center">C</th><th style="text-align:center">D</th><th style="text-align:center">E</th></tr></thead><tbody><tr><td style="text-align:center">a</td><td style="text-align:center">b</td><td style="text-align:center">c</td><td style="text-align:center">g</td><td style="text-align:center">h</td></tr><tr><td style="text-align:center">d</td><td style="text-align:center">e</td><td style="text-align:center">f</td><td style="text-align:center">b</td><td style="text-align:center">c</td></tr></tbody></table><p>自然连接是构造新关系的有效方法，投影和选择是分解关系的有效方法，自然连接中如果两个关系没有公共属性则变成笛卡尔积</p><h4 id="除（DIVISION）"><a href="#除（DIVISION）" class="headerlink" title="除（DIVISION）"></a>除（DIVISION）</h4><p>除运算（R÷S） R和S代表两个不同的关系。<br>假如被除关系R 为 m 元关系，除关系S 为 n 元关系，则运算结果的新关系为 m-n元关系。</p><p><strong>Example 1：</strong></p><p><strong>表 T15</strong></p><table><thead><tr><th style="text-align:center">A</th><th style="text-align:center">B</th><th style="text-align:center">C</th><th style="text-align:center">D</th><th style="text-align:center">E</th><th style="text-align:center">F</th><th style="text-align:center">G</th></tr></thead><tbody><tr><td style="text-align:center">a</td><td style="text-align:center">b</td><td style="text-align:center">c</td><td style="text-align:center">d</td><td style="text-align:center">e</td><td style="text-align:center">f</td><td style="text-align:center">g</td></tr><tr><td style="text-align:center">h</td><td style="text-align:center">i</td><td style="text-align:center">j</td><td style="text-align:center">k</td><td style="text-align:center">l</td><td style="text-align:center">m</td><td style="text-align:center">n</td></tr><tr><td style="text-align:center">a</td><td style="text-align:center">b</td><td style="text-align:center">c</td><td style="text-align:center">d</td><td style="text-align:center">e</td><td style="text-align:center">c</td><td style="text-align:center">d</td></tr><tr><td style="text-align:center">a</td><td style="text-align:center">c</td><td style="text-align:center">e</td><td style="text-align:center">f</td><td style="text-align:center">b</td><td style="text-align:center">m</td><td style="text-align:center">n</td></tr><tr><td style="text-align:center">a</td><td style="text-align:center">b</td><td style="text-align:center">c</td><td style="text-align:center">d</td><td style="text-align:center">e</td><td style="text-align:center">b</td><td style="text-align:center">h</td></tr><tr><td style="text-align:center">a</td><td style="text-align:center">b</td><td style="text-align:center">c</td><td style="text-align:center">d</td><td style="text-align:center">e</td><td style="text-align:center">g</td><td style="text-align:center">h</td></tr></tbody></table><p><strong>表 T16</strong></p><table><thead><tr><th style="text-align:center">H</th><th style="text-align:center">F</th><th style="text-align:center">G</th></tr></thead><tbody><tr><td style="text-align:center">b</td><td style="text-align:center">f</td><td style="text-align:center">g</td></tr><tr><td style="text-align:center">c</td><td style="text-align:center">m</td><td style="text-align:center">n</td></tr><tr><td style="text-align:center">b</td><td style="text-align:center">c</td><td style="text-align:center">d</td></tr><tr><td style="text-align:center">c</td><td style="text-align:center">b</td><td style="text-align:center">h</td></tr></tbody></table><p> T15 ÷  T16<br>运算步骤：</p><ol><li>被除关系R对除关系S不同的属性 X 进行投影</li></ol><p><strong>X 投影</strong></p><table><thead><tr><th style="text-align:center">A</th><th style="text-align:center">B</th><th style="text-align:center">C</th><th style="text-align:center">D</th><th style="text-align:center">E</th></tr></thead><tbody><tr><td style="text-align:center">a</td><td style="text-align:center">b</td><td style="text-align:center">c</td><td style="text-align:center">d</td><td style="text-align:center">e</td></tr><tr><td style="text-align:center">h</td><td style="text-align:center">i</td><td style="text-align:center">j</td><td style="text-align:center">k</td><td style="text-align:center">l</td></tr><tr><td style="text-align:center">a</td><td style="text-align:center">b</td><td style="text-align:center">c</td><td style="text-align:center">d</td><td style="text-align:center">e</td></tr><tr><td style="text-align:center">a</td><td style="text-align:center">c</td><td style="text-align:center">e</td><td style="text-align:center">f</td><td style="text-align:center">b</td></tr><tr><td style="text-align:center">a</td><td style="text-align:center">b</td><td style="text-align:center">c</td><td style="text-align:center">d</td><td style="text-align:center">e</td></tr><tr><td style="text-align:center">a</td><td style="text-align:center">b</td><td style="text-align:center">c</td><td style="text-align:center">d</td><td style="text-align:center">e</td></tr></tbody></table><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 列出 x 集合中的值 和对应象集</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="string">"a,b,c,d,e"</span>:&#123;(f,g),(c,d),(b,h),(g,h)&#125;,</span><br><span class="line">    </span><br><span class="line">    <span class="string">"h,i,j,k,l"</span>:&#123;(m,n)&#125;,</span><br><span class="line"></span><br><span class="line">    <span class="string">"a,c,e,f,b"</span>:&#123;(m,n)&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 列出 表 T16 中与 T15相同的列的投影</span></span><br><span class="line"></span><br><span class="line">&#123;</span><br><span class="line">  (f,g),(c,d),(b,h)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>通过对比发现 只有a,b,c,d,e值对应的象集包含关系T16的投影集，所以结果接</p><table><thead><tr><th style="text-align:center">A</th><th style="text-align:center">B</th><th style="text-align:center">C</th><th style="text-align:center">D</th><th style="text-align:center">E</th></tr></thead><tbody><tr><td style="text-align:center">a</td><td style="text-align:center">b</td><td style="text-align:center">c</td><td style="text-align:center">d</td><td style="text-align:center">e</td></tr></tbody></table>]]></content>
    
    <summary type="html">
    
      
      
         &lt;link href=&quot;/static/css/relation_data_model.css&quot; rel=&quot;stylesheet&quot; type=&quot;text/css&quot;&gt;

&lt;h3 id=&quot;基本的关系操作&quot;&gt;&lt;a href=&quot;#基本的关系操作&quot; class=&quot;headerlink&quot; 
      
    
    </summary>
    
      <category term="Database basis" scheme="https://owen027.github.io/categories/Database-basis/"/>
    
    
      <category term="relational operation" scheme="https://owen027.github.io/tags/relational-operation/"/>
    
  </entry>
  
  <entry>
    <title>关系数据模型要素一 （关系数据结构）</title>
    <link href="https://owen027.github.io/2019/09/09/relation_data_model/"/>
    <id>https://owen027.github.io/2019/09/09/relation_data_model/</id>
    <published>2019-09-09T13:37:35.000Z</published>
    <updated>2019-12-25T13:34:08.624Z</updated>
    
    <content type="html"><![CDATA[<link href="/static/css/relation_data_model.css" rel="stylesheet" type="text/css"><h2 id="概叙"><a href="#概叙" class="headerlink" title="概叙"></a>概叙</h2><p>关系数据库的基本特征是使用关系模型的组织数据，20世纪80年代以后，在商用DBMS中，关系模型逐步取代早期的网状模型和层次模型。</p><h2 id="关系数据模型"><a href="#关系数据模型" class="headerlink" title="关系数据模型"></a>关系数据模型</h2><p>作为数据模型，关系模型包含三个组成要素：关系数据结构、关系操作集合和关系完整性约束。</p><h3 id="关系数据结构-重点"><a href="#关系数据结构-重点" class="headerlink" title="关系数据结构  重点"></a>关系数据结构  <label style="color:red; ">重点</label></h3><p> 结构只包含单一的数据结构（关系），现实世界的实体与实体间的各种联系均用关系来表示。关系模型是把数据库表示为关系的集合，并以二维表格的形式组织数据。</p><p> 录入一张二维表格如：</p><table><thead><tr><th>学号</th><th>姓名</th><th>性别</th><th>籍贯</th><th>民族</th><th>…</th></tr></thead><tbody><tr><td>001</td><td>张三</td><td>男</td><td>陕西</td><td>汉</td><td>…</td></tr><tr><td>002</td><td>李四</td><td>男</td><td>湘西</td><td>苗</td><td>…</td></tr><tr><td>003</td><td>王五</td><td>男</td><td>河北</td><td>汉</td><td>…</td></tr><tr><td>004</td><td>赵六</td><td>男</td><td>东北</td><td>汉</td><td>…</td></tr><tr><td>…</td></tr></tbody></table><h4 id="基本术语"><a href="#基本术语" class="headerlink" title="基本术语"></a>基本术语</h4><ol><li>表(Table)：也称为关系，是二维数据结构，由表名、构成表的各列及若干行数据组成，每个表由唯一的表名，每一行数据描述一条具体的记录值。</li><li>关系（Relation）：一个关系逻辑上对应一张二维表，可以为每个关系取一个名称来标识。关系有三种类型：基本关系（基表，实际存在的表，是实际存储数据的逻辑表示）、查询表（查询结构对应的表）和视图表（由基本表或其他视图导出的表，不对应实际存储的数据）。</li><li>列（Column）：称为字段（Field）或属性（Attribute）。每一列有一个名称，表示实体属性，具有相同数据类型。在一个数据库中，表名，字段名必须唯一，不同的表可以有相同的字段名，且命名须有意义，简单。</li><li>属性（Attribute）：表列即属性，给属性起名即属性名。属性的个数称为关系的元或度。列值为属性值；取值范围为值域。</li><li>行（Row）：称为元组（Tuple）或记录（Record）。表中的数据按行存储，一行数据即一条记录或元组，每行又若干个字段值组成。</li><li>分量（Component）：元组的属性值为分量</li><li>码/键（key）：在一个关系中，有一个属性或属性组，能用来标识该关系的元组，则为该关系的码或键。</li><li>超码或超键（Super Key）：从码中去除某个属性，它仍然是对应关系的码，则为超码；每个关系至少有一个默认的超码（所有属性的集合）。</li><li>候选码或键（Candidate Key）：关系中的一个码或键中，不能去除任何一个属性，否则它就不是对应关系表的码或键，则此码为候选码（键），它是关系表中最小的超码或超键。</li><li>主键/码(Primary Key)：在一张关系表中的若干候选键中指定一个用来唯一标识该关系的元组，则该候选键为主键。</li><li>全键/码（All-Key）：一个关系中所有的属性集合是是这个关系是主键/码，则为全键/码。</li><li>主/非属性（Primary Attribute/Nonprimary Attribute）：关系中包含任何一个候选键/码的属性为主/码属性，不包含任何一个候选码的属性为非主/码属性。</li><li>外键/码（Foreign Key）：关系中的某个属性或属性组不是这个关系的主键或候选键，而是另一个关系的主键，则该属性（属性组）为关系的外键/码。</li><li>参照关系(Referencing Relation)/被参照关系（Referenced Relation）：参照关系也称从关系，被参照关系又称主关系，它们指以外码相关联的两个关系。而以外码为主码的关系为被参照关系；外码所在的关系为参照关系，这种联系通常是一对多关联。</li><li>域（Domain）：指属性取值范围。</li><li>数据类型（Data Type）：每列（元关系）都有相应的数据类型，用于限制该列中存储的数据。</li><li>关系模式（Relation Schema）：通数据模型一样，数据库也有型和值，在关系数据库中关系模式是型，关系是值，关系模式是对关系的描述。</li></ol><table><thead><tr><th style="text-align:center">中文字段名</th><th style="text-align:center">数据类型</th><th style="text-align:center">宽度</th><th style="text-align:center">…</th></tr></thead><tbody><tr><td style="text-align:center">学号</td><td style="text-align:center">字符类型</td><td style="text-align:center">8</td><td style="text-align:center">…</td></tr><tr><td style="text-align:center">姓名</td><td style="text-align:center">字符类型</td><td style="text-align:center">10</td><td style="text-align:center">…</td></tr><tr><td style="text-align:center">身份证</td><td style="text-align:center">字符类型</td><td style="text-align:center">18</td><td style="text-align:center">…</td></tr><tr><td style="text-align:center">…</td><td style="text-align:center">…</td><td style="text-align:center">…</td><td style="text-align:center">…</td></tr></tbody></table><p>上表是学生基本星系登记表关系的结构定义，关系则是元组的集合，是关系模式在某一时刻的状态或内容</p><p><label>关系模式是静态的、稳定的，而关系是动态的、随时间不断变化，因为关系操作在不断地更新着数据库的数据</label>实际工作中关系模式和关系统称为关系。</p><ol start="18"><li>关系数据库（Relation Database）：以关系模型作为数据的逻辑模型，并采用关系作为数据组织方式的一类数据库，其数据库操作建立在关系代数的基础上。在给定的应用领域中，所以关系的集合构成一个关系数据库。</li></ol><p>在实际的数据库应用系统中，一般使用英文作为表名、字段名等。因为在编写数据库应用程序时，表名、字段名会作为变量名，使用中文不方便标识，且有些DBMS不能很好的兼容中文。 <label style="color:red; ">重点</label><br>因此上表应该变更为：</p><table><thead><tr><th style="text-align:center">含义</th><th style="text-align:center">字段名</th><th style="text-align:center">数据类型</th><th style="text-align:center">宽度</th><th style="text-align:center">…</th></tr></thead><tbody><tr><td style="text-align:center">学号</td><td style="text-align:center">studentNo</td><td style="text-align:center">字符类型</td><td style="text-align:center">8</td><td style="text-align:center">…</td></tr><tr><td style="text-align:center">姓名</td><td style="text-align:center">sutdentName</td><td style="text-align:center">字符类型</td><td style="text-align:center">10</td><td style="text-align:center">…</td></tr><tr><td style="text-align:center">身份证</td><td style="text-align:center">studentId</td><td style="text-align:center">字符类型</td><td style="text-align:center">18</td><td style="text-align:center">…</td></tr><tr><td style="text-align:center">…</td><td style="text-align:center">…</td><td style="text-align:center">…</td><td style="text-align:center">…</td><td style="text-align:center">…</td></tr></tbody></table><p><strong>关系数据库对关系的限定：</strong></p><ul><li>每个属性都不可分解，是关系数据库对关系的最基本的限定，要求关系的每个分量必须是一个不可分的数据项，即不允许表中有表</li><li>一个关系对应一种关系模式，模式中的属性的数据类型及属性的个数是相对固定的</li><li>每个关系模式中的属性必须命名，在同一模式中，属性名必须是不同的</li><li>同一关系中不允许出现候选码或键值完全相同的元组</li><li>关系中的元组顺序是可任意交换</li><li>关系中的属性顺序可以任意交换</li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;link href=&quot;/static/css/relation_data_model.css&quot; rel=&quot;stylesheet&quot; type=&quot;text/css&quot;&gt;

&lt;h2 id=&quot;概叙&quot;&gt;&lt;a href=&quot;#概叙&quot; class=&quot;headerlink&quot; title=&quot;概叙&quot;&gt;
      
    
    </summary>
    
      <category term="Database basis" scheme="https://owen027.github.io/categories/Database-basis/"/>
    
    
      <category term="relationDataModel" scheme="https://owen027.github.io/tags/relationDataModel/"/>
    
  </entry>
  
  <entry>
    <title>数据库基础（Database Basis) (二)</title>
    <link href="https://owen027.github.io/2019/09/05/database_basis_2/"/>
    <id>https://owen027.github.io/2019/09/05/database_basis_2/</id>
    <published>2019-09-05T10:50:56.000Z</published>
    <updated>2019-09-24T12:33:09.766Z</updated>
    
    <content type="html"><![CDATA[<h2 id="数据库系统的结构"><a href="#数据库系统的结构" class="headerlink" title="数据库系统的结构"></a>数据库系统的结构</h2><blockquote><p>注：数据库（ DB ）数据库系统（DBS）数据库管理系统（DBMS） 数据库管理员（DBA）<br>在一个DBS中有着不同类型的用户，每个用户都从不同的角度以各自的观点看待数据库，从而形成了DBS不同的视图结构。因此DBS的结构可以有多种不同的层次或不同的视角。</p></blockquote><label>从数据库管理员（DBA）视角来看，DBS分为内部系统结构和外部体系结构，其中内部系统结构通常采用<code>三级模式结构</code>，外部体系结构通常表现为 <code>集中式结构</code>、<code>分布式结构</code>和<code>并行结构</code>等；</label><label>从数据库用户角度分为客户/服务器结构和浏览器/服务器结构，也就是DBS整体的运行与应用结构</label><h3 id="三级模式结构（DBA视角）"><a href="#三级模式结构（DBA视角）" class="headerlink" title="三级模式结构（DBA视角）"></a>三级模式结构（DBA视角）</h3><p>从DBA角度审视数据库系统，其内部基本遵循美国 <code>ANSI/SPAPRC</code> DBMS研究组提出的三体系结构（用户、概念级和物理级）。各个DBMS产品在体系结构上通常具有相同的特征（三级模式结构），并提供两层映像功能。DBS三模式结构是指 模式（Schema）、外模式（External Schema）和 内模式（Internal Schema）。</p><pre class="mermaid">graph LRA(数据库) --> B(内模式)B --内模式/模式映像--> C(模式)C -->  C1(外模式1)C --外模式/模式映像-->  C2(外模式2)C -->  C3(外模式3)C1 --> D1(应用1)C1 --> D2(应用2)C2 --> D3(应用3)C2 --> D4(应用4)C3 --> D5(应用5)C3 --> D6(应用6)</pre><p>外模式的描述向客户提供数据，内模式的描述存储数据，模式是两者的中间层，机不涉及数据的物理存储和硬件环境，也与具体应用程序、开发工具及设计语言无关。</p><p></p><h4>模式</h4><p></p><label>模式也称为概念模式或逻辑模式，是数据库中全体数据的逻辑结构和特征的描述，是所有用户的公共数据视图，即数据在逻辑上的视图（又称概念视图）</label><p>DBA必须考虑整个数据库的全局概念视图，它不包含任何的数据库实现细节，如何种D是BMS、文件组织、存取方法及设备特征等；而是定义数据库的逻辑结构、数据之间的联系，及数据相关的安全性、完整性等要求（由DBMS提供模式描述语言（Schema DDL）），同时一个数据库只有有个模式，且相对稳定。</p><h4 id="外模式"><a href="#外模式" class="headerlink" title="外模式"></a>外模式</h4><label>  外模式也称为子模式（Subschema）或用户模式,是数据库用户能看见和使用的局部数据的逻辑结构和特征的描述，是与某一应用有关数据的逻辑表示。（DBMS提供子模式描述语言（Subschema DDL）来严格定义子模式）<br>通常其用于满足不同数据库用户需求的数据视图（用户视图），是模式的子集，对数据库整体数据的局部重构。<br>不同用户在看待数据的方式、应用需求、对数据保密的要求等方面存在差异，对应外模式描述就不同，且模式中同样的数据，在外模式中的结构、类型、长度、保密级别等都可以不同</label><p>外模式是保证数据库安全的重要措施，每个用户只能看见和访问所对应的外模式中的数据，简化了DBS的用户接口，便于用户使用，并有效支持数据独立性和共享性。</p><h4 id="内模式"><a href="#内模式" class="headerlink" title="内模式"></a>内模式</h4><p>内模式也称存储模式（Storage Schema）, 是对数据库中的物理结构和存储方式的描述，是数据在数据库内部的表现形式。是整个数据库的最底层表示，它不同于物理层，是DBA所见到的，特定的DBMS所处理的数据库的内部结构（内部视图或存储视图）。</p><label>和模式一样，内模式在一个数据库中只有一个，它不存储设备上的物理记录或物理快，也不涉及任何具体设备限制。</label><h4 id="两层映像与数据独立性-重点"><a href="#两层映像与数据独立性-重点" class="headerlink" title="两层映像与数据独立性 重点"></a>两层映像与数据独立性 <label style="color:red; ">重点</label></h4><p>总体而言，三个模式的对数据的三级抽象，其特点如下：</p><ul><li>一个数据库的整理逻辑结构和特征的描述（概念模式）是独立于数据库其他层次结构（内/外模式）的描述，其是数据库的核心，也是数据库设计的关键。</li><li>一个数据库的内部存储模式依赖于概念模式，并且独立于外部模式和具体的存储设备。</li><li>用户逻辑结构（外模式）是在全局逻辑结构描述的基础上定义的，它面向具体的应用程序，独立于内部模式和存储设备。</li><li>应用程序是在外模式的逻辑结构上编写，依赖于特定的外模式，与数据库的模式和存储结构独立。</li></ul><label>用户不必考虑数据的物理存储细节，将其交给DBMS负责管理，同时为有效支撑数据库的三级抽象及它们之前的联系和相互转换，DBMS通过提供两层映像来实现（外模式/模式 和 模式/内模式）</label><h5 id="映像"><a href="#映像" class="headerlink" title="映像"></a>映像</h5><p>映像是指一种对应规则，指出映像双方如何进行转换。</p><ul><li>外模式/模式映像：定义各个外模式与概念模式之间的映像关系，这些定义通常在各自的外模式中加以描述。DBS的模式如若发生改变（增加新的关系、属性、改变数据类型等)，DBA会对各个映像做出相应改变，使那些对用户可见的外模式保持不变，从而使程序员不必去修改那些依据数据的外模式所编写的程序，这样外模式就不受模式的影响，保证数据与程序的独立性。</li><li>模式/内模式：定义数据库全局逻辑结构与物理存储之间的关系，通常在模式中加以描述。而DB只有一个模式，所以此映像是唯一的。同样，DBS 的物理存储如若发生改变（选用另一个存储结构或更换存储位置），DBA会的此映像做出相应调整，使DBS 的模式保持不变，不必修改应用程序，保证的物理独立性</li></ul><p>因此，两层映像保证了DBS中的数据具有较高的逻辑独立性和物理独立性，使数据的定义和描述可以从应用程序中分离，简化数据库应用程序的开发，减少维护工作量。</p><h3 id="DBS-的运行与应用结构（用户视角）"><a href="#DBS-的运行与应用结构（用户视角）" class="headerlink" title="DBS 的运行与应用结构（用户视角）"></a>DBS 的运行与应用结构（用户视角）</h3><h4 id="客户-服务器结构"><a href="#客户-服务器结构" class="headerlink" title="客户/服务器结构"></a>客户/服务器结构</h4><p>在DBMS中，DB的使用者（程序员，DBA等）可以使用命令行客户端、图形化界面管理工具、应用程序等连接DBMS，通过DBMS查询和处理存储在底层数据库中的各种数据。<label>那些不与DBMS直接联系的工具和程序被称为<code>客户端</code>、<code>前台</code>或<code>表示层</code>，主要完成交互任务，而DBMS称为<code>服务器</code>、<code>后台</code>或<code>数据层</code>，主要负责数据管理。</label> 这种工作模式就是客户/服务器结构(Client/Server,C/S).</p><h4 id="浏览器-服务器结构"><a href="#浏览器-服务器结构" class="headerlink" title="浏览器/服务器结构"></a>浏览器/服务器结构</h4><p>此结构基于Web应用的客户/服务器结构，或者三层客户/服务器结构。<br>在DBS中，它将与DBMS交互的客户端进一步细分为<code>表示层</code>和<code>处理层</code>。</p><p>表示层：指数据库使用者的操作和展示界面，通常由各种浏览器构成<br>处理层（中间层）：负责处理数据库使用者的具体应用逻辑，与后台的DBMS共同组成功能丰富的<code>胖服务器</code> 。</p><p>这种工作模式就是浏览器/服务器结构（Browser/Server，B/S）</p><hr><h2 id="数据模型"><a href="#数据模型" class="headerlink" title="数据模型"></a>数据模型</h2><blockquote><p>模型是现实世界特征的模拟和抽象表达，帮助人们更好的认识和理解客观事物、对象和过程等感兴趣的内容（飞机航模、建筑图纸、军事沙盘等）。而数据模型是用来模拟和抽象现实世界中的数据特征，描述的是数据的共性内容。</p></blockquote><h3 id="数据特征与数据模型组成要素"><a href="#数据特征与数据模型组成要素" class="headerlink" title="数据特征与数据模型组成要素"></a>数据特征与数据模型组成要素</h3><p>数据具有静态和动态两种特征。<br>静态特征：数据的基本结构、数据间的联系及对数据取值范围的约束。<br>动态特征：指对数据可以进行符合一定规则的操作。<br><strong>数据模型通常由数据结构、数据操作和数据约束三要素组成：</strong></p><ul><li>数据结构：是描述系统的静态特性，数据对象的类型、内容、属性及数据对象之间的联系。如层次结构、网状结构、关系结构的数据模型分别命名为层次模型、网站模型、关系模型及面向对象模型。</li><li>数据操作：描述的是系统动态特性，是对各种对象的实例允许执行的操作集合，包括操作及相关的操作规则。主要分为更新（增、删、改）和检索两大类。数据模型必须定义这些操作的确切含义、操作符号、操作规则（优先级等）及实现操作的语言。</li><li>数据约束：描述数据结构中国数据间的语法和语义关联，包括相互制约与依存关系及数据动态变化规则，保证数据正确性、有效性与相容性。约束包含数据完整性约束、数据安全性及并发控制约束；数据约束既刻画了数据静态特征，也表示了数据动态行为规则。</li></ul><h3 id="数据模型的分类"><a href="#数据模型的分类" class="headerlink" title="数据模型的分类"></a>数据模型的分类</h3><p><strong>数据模型应满足三个要求：</strong></p><ol><li>能比较真实的模拟现实世界</li><li>容易使人们理解</li><li>便于在计算机上实现</li></ol><p>目前一种数据模型要完全满足三个要求，很困难，因此需针对不同对象和应用，采取逐步抽象的方法，在不同抽象层使用不同的数据模型。</p><h4 id="概念层数据模型（数据的概念模型-（Conceptual-Model）-信息模型）"><a href="#概念层数据模型（数据的概念模型-（Conceptual-Model）-信息模型）" class="headerlink" title="概念层数据模型（数据的概念模型 （Conceptual Model）,信息模型）"></a>概念层数据模型（数据的概念模型 （Conceptual Model）,信息模型）</h4><p>概念层是数据抽象级别的最高层，目的是按照用户的观点对世界建模。概念层模型用来描述现实世界的事物，是对信息世界建模，与具体的计算机系统无关，独立于任何DBMS，容易向DBMS所支持的逻辑数据库模型转换，此类模型主要用于数据库的设计阶段，表示现实世界的各个事物及其联系。</p><h5 id="信息世界中的基本概念（类似于对象）重点"><a href="#信息世界中的基本概念（类似于对象）重点" class="headerlink" title="信息世界中的基本概念（类似于对象）重点"></a>信息世界中的基本概念（类似于对象）<label style="color:red;">重点</label></h5><p>概念模型用于信息世界的建模，是现实世界到信息世界的第一层抽象，是数据库设计人员进行数据库设计的有力工具，是设计人员和用户之间交流的语言，因此概念模型具有较强的语义表达能力，能够方便、直接地表达应用中的各种语义知识，它简单、清晰、易于理解。</p><ul><li>实体（Entity）：客观存在并可相互区别的事物，既可以是实体事物，也可以说抽象的概念或联系（学生、商品、部门、课程、比赛等都可以是实体）</li><li>属性（Attribute）：实体所具有的某种特性，一个实体可以由多个属性描述（性别，名称、日期，年龄等等）</li><li>码或键（Key）：可唯一标识实体的属性集。如学生的学号</li><li>域（Domain）：一个属性的取值范围。如学生实体中姓名的域</li><li>实体型（Entity Type）：具有相同属性的实体必然具有共同的特征和性质。用实体名于属性名集合抽象和刻画同类实体即实体型。（学号，姓名，性别）</li><li>实体集（Entity Set）：同实体的集合。（每个学生是一个实体，所以学生组成实体集）</li><li>联系（Relatinship）：现实世界中，事物内部及事物之间是有联系的，反应到信息世界中即实体（型）内部的联系和实体（型）之间的联系。实体内部的联系通常指各属性之间的联系。如确定学号，即知道对应的姓名，学号与姓名两个属性之间有联系。实体之间的联系指不同实体间的联系。如一个班有许多学生，一个学生只属于一个班级，这是学生与班级两个实体间的联系。</li></ul><p>数据模型中有<code>型【type】</code>（某一类数据的结构和属性说明）和<code>值【value】</code>（对型的赋值）的概念</p><h5 id="概念模型的表示方法"><a href="#概念模型的表示方法" class="headerlink" title="概念模型的表示方法"></a>概念模型的表示方法</h5><p>概念模型的表示方法有很多种，最常用的是实体-联系方法（Entity-Relationship approach）也称E-R模型，它是抽象和描述现实世界的有力工具，它独立于具体的DBMS所支持的逻辑模型，是各种逻辑模型的共同基础。</p><h4 id="逻辑层数据模型"><a href="#逻辑层数据模型" class="headerlink" title="逻辑层数据模型"></a>逻辑层数据模型</h4><p>逻辑层是数据抽象的中间层，描述数据整体逻辑结构；这层的数据抽象被称为逻辑模型，是用户通过DBMS看到的现实世界，基于计算机系统的观点来对数据进行建模和表示。因此，它既要让用户易于理解，又要便于DBMS实现。<br>主要的逻辑数据模型有 层次模型（Hierarchical）、网站模型（Network Model）、关系模型（Relational Model）和面向对象模型（Object Oriented Model）等</p><h5 id="层次模型"><a href="#层次模型" class="headerlink" title="层次模型"></a>层次模型</h5><p>此模型是数据库最早的一种数据模型，它的数据结构是一颗“有向树”，数的每个结点对应一个记录集。特点：有且仅有一个结点没有父结点（根结点）；其他结点有且仅有一个父结点。</p><h5 id="网状模型"><a href="#网状模型" class="headerlink" title="网状模型"></a>网状模型</h5><p>此模型以网状结构表示实体与实体之间的联系。是层次模型的扩展，允许结点又多个父结点，且可以有多个节点没有父结点。此模型可以方便的表示实体间各种类型的联系，但结构复杂，实现的算法难以规范化。</p><h5 id="关系模型-重点"><a href="#关系模型-重点" class="headerlink" title="关系模型 重点"></a>关系模型 <label style="color:red;">重点</label></h5><p>此模型用二维表结构来表示实体及实体间联系的模型，并以二维表格的形式组织数据库中的数据。<br><strong>特点：</strong></p><ul><li>建立在严格的数学概念基础之上</li><li>概念单一，统一用关系表示实体及实体间的联系，对数据的检索与更新结果同样也用关系（即表）表示。</li><li>关系模型的存取路径对用户透明，这样就具有更高的数据独立性、更好的安全保密性，简化了程序员的开发工作。目前流行的商用数据库大多基于关系模型（关系数据库管理系统）。</li></ul><h5 id="面向对象模型"><a href="#面向对象模型" class="headerlink" title="面向对象模型"></a>面向对象模型</h5><p>此模型是面向对象方法与数据库相结合所构成的数据模型。它既是概念模型又是逻辑模型。用面向对象观点描述现实世界实体逻辑组织、对象间的联系。</p><h4 id="物理层数据模型"><a href="#物理层数据模型" class="headerlink" title="物理层数据模型"></a>物理层数据模型</h4><p>此模型又叫数据的物理模型，描述数据在存储介质上的组织结构，是逻辑模型的物理实现，每一种逻辑模型在实现时都有与其对应的物理模型。物理模型是数据库最底层的抽象，它确定数据的物理存储结构、数据存取路径及调整、优化数据库的性能。<br>物理数据结构一般向用户屏蔽，用户不必了解其细节。</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;数据库系统的结构&quot;&gt;&lt;a href=&quot;#数据库系统的结构&quot; class=&quot;headerlink&quot; title=&quot;数据库系统的结构&quot;&gt;&lt;/a&gt;数据库系统的结构&lt;/h2&gt;&lt;blockquote&gt;
&lt;p&gt;注：数据库（ DB ）数据库系统（DBS）数据库管理系统（DBMS
      
    
    </summary>
    
      <category term="Database basis" scheme="https://owen027.github.io/categories/Database-basis/"/>
    
    
      <category term="Database_basis_2" scheme="https://owen027.github.io/tags/Database-basis-2/"/>
    
  </entry>
  
</feed>
